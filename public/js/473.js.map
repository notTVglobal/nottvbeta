{"version":3,"file":"js/473.js","mappings":"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","sources":["webpack://nottvbeta/./resources/js/Stores/ChannelPlaylistStore.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport dayjs from 'dayjs'\nimport timezone from 'dayjs/plugin/timezone'\nimport utc from 'dayjs/plugin/utc'\nimport isSameOrBefore from 'dayjs/plugin/isSameOrBefore'\nimport isSameOrAfter from 'dayjs/plugin/isSameOrAfter'\nimport { useNotificationStore } from '@/Stores/NotificationStore'\nimport { useUserStore } from '@/Stores/UserStore'\nimport { useAdminStore } from '@/Stores/AdminStore'\nimport { router } from '@inertiajs/vue3'\n\ndayjs.extend(utc)\ndayjs.extend(timezone)\ndayjs.extend(isSameOrBefore)\ndayjs.extend(isSameOrAfter)\n\nconst initialState = () => ({\n    playlists: [],\n    selectedPlaylist: null,\n    scheduleItems: [],\n    gaps: [],\n    startTime: dayjs().format('YYYY-MM-DDTHH:mm'),\n    endTime: dayjs().add(24, 'hour').format('YYYY-MM-DDTHH:mm'),\n    contentItems: [],\n    contentFetched: false,\n    currentPage: 1,\n    totalPages: 1,\n    searchQuery: '',\n    showModal: false,\n    loading: false,\n    loadingSchedules: false,\n    processing: false,\n    error: null,\n    id: null,\n    name: '',\n    description: '',\n    url: '',\n    type: 'regular',\n    priority: 1,\n    repeat_mode: 'repeat_all',\n    next_playlist_id: null,\n})\n\nexport const useChannelPlaylistStore = defineStore('channelPlaylistStore', {\n    state: initialState,\n    actions: {\n        reset() {\n            // Reset the store to its original state (clear all data)\n            Object.assign(this, initialState())\n        },\n        openAddContentModal() {\n            this.showModal = true\n        },\n        closeAddContentModal() {\n            this.showModal = false\n        },\n        async fetchPlaylists() {\n            this.loading = true\n            try {\n                const response = await axios.get('/admin/channel-playlist/get-playlists')\n                this.playlists = response.data.playlists\n                const {message, status} = response.data\n                const notificationStore = useNotificationStore()\n                notificationStore.setToastNotification(message, status)\n            } catch (error) {\n                this.error = error.response ? error.response.data.message : error.message\n                const notificationStore = useNotificationStore()\n                notificationStore.setToastNotification(this.error, 'error')\n            } finally {\n                this.loading = false\n            }\n        },\n        async createPlaylist(playlist) {\n            if (!this.validateScheduleItems()) return false;\n\n            this.loading = true\n            try {\n                const response = await axios.post('/channelPlaylists', {\n                    ...playlist,\n                    scheduleItems: this.getValidScheduleItems(),\n                })\n                this.playlists.push(response.data.playlist)\n                this.showNotification(response.data)\n                this.reset()\n                return true\n            } catch (error) {\n                this.handleError(error)\n                return false\n            } finally {\n                this.loading = false\n            }\n        },\n        async updatePlaylist(playlist) {\n            const adminStore = useAdminStore();\n            playlist.scheduleItems = this.scheduleItems;\n\n            if (!this.validateScheduleItems(playlist.scheduleItems)) {\n                console.error('Invalid schedule items');\n                return false;\n            }\n\n            this.loading = true;\n            try {\n                const response = await axios.put(`/channelPlaylists/${playlist.id}`, playlist);\n                const index = this.playlists.findIndex(p => p.id === playlist.id);\n                if (index !== -1) {\n                    this.playlists[index] = response.data.playlist;\n                }\n\n                const adminIndex = adminStore.items.findIndex(item => item.id === playlist.id);\n                if (adminIndex !== -1) {\n                    adminStore.items[adminIndex] = {\n                        ...response.data.playlist,\n                        playlist_items: this.scheduleItems\n                    };\n                }\n                this.showNotification(response.data);\n                document.getElementById('updateChannelPlaylistModal').close();\n                this.clearError()\n                return true;\n            } catch (error) {\n                this.handleError(error);\n                return false;\n            } finally {\n                this.loading = false;\n            }\n        },\n\n        validateScheduleItems() {\n            const notificationStore = useNotificationStore()\n\n            // Check for conflicts\n            if (this.scheduleItems.some(item => item.conflict)) {\n                notificationStore.setGeneralServiceNotification('Conflict Detected', 'There are conflicts in the schedule items. Please resolve them before proceeding.')\n                return false\n            }\n\n            // Check for gaps\n            const items = this.scheduleItems.filter(item => !item.removed && item.type !== 'gap').sort((a, b) => dayjs(a.start_dateTime).isBefore(dayjs(b.start_dateTime)) ? -1 : 1)\n            for (let i = 0; i < items.length - 1; i++) {\n                if (dayjs(items[i].end_dateTime).isBefore(dayjs(items[i + 1].start_dateTime))) {\n                    notificationStore.setGeneralServiceNotification('Gap Detected', 'There are gaps in the schedule items. Please ensure there are no gaps before proceeding.')\n                    return false\n                }\n            }\n            return true\n        },\n\n        getValidScheduleItems() {\n            return this.scheduleItems.filter(item => !item.removed && item.type !== 'gap').sort((a, b) => dayjs(a.start_dateTime).isBefore(dayjs(b.start_dateTime)) ? -1 : 1)\n        },\n\n        showNotification(response) {\n            const { message, status } = response\n            const notificationStore = useNotificationStore()\n            notificationStore.setToastNotification(message, status)\n        },\n\n        handleError(error) {\n            const notificationStore = useNotificationStore();\n            const errorMessage = error.response ? error.response.data.message : error.message;\n            let errorDetails = error.response && error.response.data.details ? error.response.data.details : '';\n\n            // Check if errorDetails is a string and parse it to an object if necessary\n            if (typeof errorDetails === 'string') {\n                try {\n                    errorDetails = JSON.parse(errorDetails);\n                } catch (e) {\n                    // If parsing fails, wrap the errorDetails in an object\n                    errorDetails = { details: errorDetails };\n                }\n            }\n\n            // Aggregate validation error messages with HTML styling\n            let detailedErrorMessages = '<ul>';\n            for (const [field, messages] of Object.entries(errorDetails)) {\n                // Ensure messages is an array and join them into a string\n                const messageText = Array.isArray(messages) ? messages.join(', ') : messages;\n                detailedErrorMessages += `<li><strong>${field}:</strong> ${messageText}</li>`;\n            }\n            detailedErrorMessages += '</ul>';\n\n            // Display general error message with aggregated details\n            notificationStore.setGeneralServiceNotification('Validation Error', `${errorMessage}\\n${detailedErrorMessages}`);\n\n            this.error = errorMessage;\n        },\n\n        setPlaylistData(playlist) {\n            console.log('playlist:', playlist)\n            const userStore = useUserStore()\n\n            const startTime = dayjs.utc(playlist.start_dateTime).tz(userStore.timezone).format('YYYY-MM-DDTHH:mm')\n            const endTime = dayjs.utc(playlist.end_dateTime).tz(userStore.timezone).format('YYYY-MM-DDTHH:mm')\n\n            this.id = playlist.id\n            this.name = playlist.name\n            this.description = playlist.description\n            this.url = playlist.url\n            this.type = playlist.type\n            this.priority = playlist.priority\n            this.repeat_mode = playlist.repeat_mode\n            this.next_playlist_id = playlist.next_playlist_id\n            this.startTime = startTime\n            this.endTime = endTime\n\n            console.log('playlist.playlist_items:', playlist.playlist_items)\n\n            this.scheduleItems = playlist.playlist_items\n                .filter(item => {\n                    console.log('Filtering item:', item)\n                    return item !== null && item !== undefined\n                })\n                .map(item => {\n                    const mappedItem = {\n                        id: item.id,\n                        content_id: item.content_id,\n                        content_type: item.content_type,\n                        order: item.order,\n                        media_type: item.media_type,\n                        source_path: item.source_path,\n                        source_type: item.source_type,\n                        is_live: item.is_live,\n                        is_scheduled: item.is_scheduled,\n                        current_viewers_count: item.current_viewers_count,\n                        max_viewers_count: item.max_viewers_count,\n                        additional_sources: item.additional_sources,\n                        custom_playback_options: item.custom_playback_options,\n                        metadata: item.metadata,\n                        has_played: item.has_played,\n                        start_dateTime: item.start_dateTime,\n                        end_dateTime: item.end_dateTime,\n                        duration_minutes: item.duration_minutes,\n                        type: item.type,\n                        content: item.content,\n                    }\n                    console.log('Mapped item:', mappedItem)\n                    return mappedItem\n                })\n\n            console.log('this.scheduleItems:', this.scheduleItems)\n        },\n        async fetchSchedules() {\n            this.loadingSchedules = true\n            this.clearError()\n            const notificationStore = useNotificationStore()\n\n            if (!this.startTime || !this.endTime) {\n                notificationStore.setGeneralServiceNotification('Start and End Times Required', 'Please check the schedule start and end times.')\n                this.loadingSchedules = false\n                return\n            }\n\n            try {\n                const response = await axios.get(`/api/schedules`, {\n                    params: {\n                        startTime: this.startTimeUTC,\n                        endTime: this.endTimeUTC,\n                    },\n                })\n                // Push new items to the existing array with added attributes\n                this.scheduleItems.push(...response.data.items.map(item => ({\n                    ...item,\n                    removed: false,\n                    is_scheduled: true\n                })))\n                const {message, status} = response.data\n                notificationStore.setToastNotification(message, status)\n                this.updateConflicts()\n                this.loadingSchedules = false\n                return response.data // return the data to the caller\n            } catch (error) {\n                this.error = error.response ? error.response.data.message : error.message\n                notificationStore.setToastNotification(this.error, 'error')\n                this.loadingSchedules = false\n                throw error\n            }\n        },\n        removeItem(id) {\n            const item = this.scheduleItems.find(item => item.id === id)\n            if (item) {\n                item.removed = true\n                this.scheduleItems = [...this.scheduleItems]  // Trigger reactivity\n                this.updateConflicts()\n            }\n            this.clearError()\n        },\n        addItem(id) {\n            const item = this.scheduleItems.find(item => item.id === id)\n            if (item) {\n                item.removed = false\n                this.scheduleItems = [...this.scheduleItems]  // Trigger reactivity\n                this.updateConflicts()\n            }\n            this.clearError()\n        },\n        removeAllItems() {\n            this.scheduleItems = []\n            this.clearError()\n        },\n        clearRemovedItems() {\n            this.scheduleItems = this.scheduleItems.filter(item => !item.removed)\n            this.clearError()\n            this.recalculateIndexes()\n        },\n        recalculateIndexes() {\n            this.scheduleItems = this.scheduleItems.map((item, index) => ({...item, index}))\n        },\n        updateConflicts() {\n            const items = this.scheduleItems.filter(item => !item.removed)\n            items.sort((a, b) => dayjs(a.start_dateTime).isBefore(dayjs(b.start_dateTime)) ? -1 : 1)\n\n            for (let i = 0; i < items.length; i++) {\n                const currentItem = items[i]\n                currentItem.conflict = false\n            }\n\n            for (let i = 0; i < items.length; i++) {\n                const currentItem = items[i]\n                for (let j = i + 1; j < items.length; j++) {\n                    const nextItem = items[j]\n                    if (\n                        dayjs(currentItem.start_dateTime).isBefore(dayjs(nextItem.end_dateTime)) &&\n                        dayjs(currentItem.end_dateTime).isAfter(dayjs(nextItem.start_dateTime))\n                    ) {\n                        currentItem.conflict = true\n                        nextItem.conflict = true\n                    }\n                }\n            }\n        },\n        selectPlaylist(playlist) {\n            this.selectedPlaylist = playlist\n        },\n        removePlaylist(playlistId) {\n            router.delete(route('channelPlaylists.destroy', { channelPlaylist: playlistId }))\n        },\n        clearError() {\n            this.error = null\n        },\n        resolveConflicts() {\n            this.processing = true // Set processing flag\n            let conflictsResolved\n\n            do {\n                conflictsResolved = false\n\n                // Create a copy of the items array without removed items\n                let items = this.scheduleItems.filter(item => !item.removed)\n\n                for (let i = 1; i < items.length; i++) {\n                    const currentItem = items[i]\n\n                    if (!currentItem.conflict) continue\n\n                    for (let j = 0; j < i; j++) {\n                        const previousItem = items[j]\n\n                        if (previousItem.removed) continue\n\n                        // Check for conflict\n                        const currentStart = dayjs(currentItem.start_dateTime)\n                        const previousEnd = dayjs(previousItem.end_dateTime)\n                        const previousStart = dayjs(previousItem.start_dateTime)\n\n                        if (\n                            currentStart.isSame(previousStart) ||\n                            (currentStart.isBefore(previousEnd) && !currentStart.isSame(previousEnd))\n                        ) {\n                            // Resolve conflict based on priority and creation date\n                            if (currentItem.priority > previousItem.priority) {\n                                this.scheduleItems = this.scheduleItems.map(item =>\n                                    item.id === currentItem.id ? {...item, removed: true} : item,\n                                )\n                                conflictsResolved = true\n                                break\n                            } else if (currentItem.priority < previousItem.priority) {\n                                this.scheduleItems = this.scheduleItems.map(item =>\n                                    item.id === previousItem.id ? {...item, removed: true} : item,\n                                )\n                                conflictsResolved = true\n                                break\n                            } else {\n                                if (dayjs(currentItem.created_at).isAfter(dayjs(previousItem.created_at))) {\n                                    this.scheduleItems = this.scheduleItems.map(item =>\n                                        item.id === currentItem.id ? {...item, removed: true} : item,\n                                    )\n                                    conflictsResolved = true\n                                    break\n                                } else {\n                                    this.scheduleItems = this.scheduleItems.map(item =>\n                                        item.id === previousItem.id ? {...item, removed: true} : item,\n                                    )\n                                    conflictsResolved = true\n                                    break\n                                }\n                            }\n                        }\n                    }\n\n                    if (conflictsResolved) break\n                }\n\n            } while (conflictsResolved)\n\n            this.updateConflicts()\n            // console.log('Finished processing conflicts')\n            this.processing = false // Clear processing flag\n        },\n\n        insertGaps() {\n            this.clearError()\n            // console.log('Start Time UTC:', this.startTimeUTC);\n            // console.log('End Time UTC:', this.endTimeUTC);\n\n            // Map schedule items to include dayjs objects for start and end times\n            const items = this.scheduleItems\n                .filter(item => !item.removed)\n                .map(item => ({\n                    ...item,\n                    start: dayjs(item.start_dateTime),\n                    end: dayjs(item.end_dateTime),\n                }))\n\n            // console.log('Items:', items);\n\n            this.gaps = []\n\n            if (items.length === 0) {\n                // console.log('No scheduled items, creating a single gap for the entire period.');\n                this.gaps.push({\n                    type: 'gap',\n                    start_dateTime: dayjs.utc(this.startTimeUTC).toISOString(),\n                    end_dateTime: dayjs.utc(this.endTimeUTC).toISOString(),\n                    duration_minutes: dayjs(this.endTimeUTC).diff(dayjs(this.startTimeUTC), 'minute'),\n                    id: `gap-${dayjs.utc(this.startTimeUTC).toISOString()}-${dayjs.utc(this.endTimeUTC).toISOString()}`,\n                    start: dayjs.utc(this.startTimeUTC),\n                    end: dayjs.utc(this.endTimeUTC),\n                })\n            } else {\n                this.checkForGapBeforeFirstItem(items)\n                this.checkForGapsBetweenItems(items)\n                this.checkForGapAfterLastItem(items)\n            }\n\n            // console.log('Gaps:', this.gaps);\n\n            // Add gaps to the schedule items and sort the list by start dateTime\n            this.scheduleItems = [...items, ...this.gaps].sort((a, b) => a.start.isBefore(b.start) ? -1 : 1)\n\n            // console.log('Final Schedule Items:', this.scheduleItems);\n        },\n\n\n        checkForGapBeforeFirstItem(items) {\n            // console.log('Checking for gap before the first item...')\n            if (items.length > 0 && dayjs.utc(this.startTimeUTC).isBefore(items[0].start)) {\n                const gapStart = dayjs.utc(this.startTimeUTC)\n                const gapEnd = items[0].start\n                const gapDuration = gapEnd.diff(gapStart, 'minute')\n                // console.log(`Creating gap before the first item: ${gapStart.toISOString()} to ${gapEnd.toISOString()}, duration: ${gapDuration} minutes`)\n\n                this.gaps.push({\n                    type: 'gap',\n                    start_dateTime: gapStart.toISOString(), // ISO 8601 string in UTC\n                    end_dateTime: gapEnd.toISOString(), // ISO 8601 string in UTC\n                    duration_minutes: gapDuration,\n                    id: `gap-${gapStart.toISOString()}-${gapEnd.toISOString()}`,\n                    start: gapStart,\n                    end: gapEnd,\n                })\n            } else {\n                // console.log('No gap before the first item.')\n            }\n        },\n\n        checkForGapsBetweenItems(items) {\n            // console.log('Checking for gaps between items...')\n            for (let i = 0; i < items.length - 1; i++) {\n                const currentItem = items[i]\n                const nextItem = items[i + 1]\n\n                const gapStart = currentItem.end\n                const gapEnd = nextItem.start\n\n                // console.log(`Current Item: ${currentItem.id}, End: ${currentItem.end.toISOString()}`)\n                // console.log(`Next Item: ${nextItem.id}, Start: ${nextItem.start.toISOString()}`)\n                // console.log(`Gap start: ${gapStart.toISOString()}, Gap end: ${gapEnd.toISOString()}`)\n\n                if (gapStart.isBefore(gapEnd)) {\n                    const gapDuration = gapEnd.diff(gapStart, 'minute')\n                    // console.log(`Creating gap between items: ${gapStart.toISOString()} to ${gapEnd.toISOString()}, duration: ${gapDuration} minutes`)\n\n                    this.gaps.push({\n                        type: 'gap',\n                        start_dateTime: gapStart.toISOString(), // ISO 8601 string in UTC\n                        end_dateTime: gapEnd.toISOString(), // ISO 8601 string in UTC\n                        duration_minutes: gapDuration,\n                        id: `gap-${gapStart.toISOString()}-${gapEnd.toISOString()}`,\n                        start: gapStart,\n                        end: gapEnd,\n                    })\n                } else {\n                    // console.log('No gap between these items.')\n                }\n            }\n        },\n\n        checkForGapAfterLastItem(items) {\n            // console.log('Checking for gap after the last item...');\n            if (items.length > 0) {\n                const lastItemEnd = items[items.length - 1].end\n                const endTime = dayjs.utc(this.endTimeUTC) // Ensure endTimeUTC is treated as UTC\n                // console.log(`Last Item End: ${lastItemEnd.toISOString()}, End Time: ${endTime.toISOString()}`);\n\n                // Check that last item ends before endTimeUTC\n                if (lastItemEnd.isBefore(endTime)) {\n                    const gapStart = lastItemEnd\n                    const gapEnd = endTime\n                    const gapDuration = gapEnd.diff(gapStart, 'minute')\n                    // console.log(`Creating gap after the last item: ${gapStart.toISOString()} to ${gapEnd.toISOString()}, duration: ${gapDuration} minutes`);\n\n                    this.gaps.push({\n                        type: 'gap',\n                        start_dateTime: gapStart.toISOString(), // ISO 8601 string in UTC\n                        end_dateTime: gapEnd.toISOString(), // ISO 8601 string in UTC\n                        duration_minutes: gapDuration,\n                        id: `gap-${gapStart.toISOString()}-${gapEnd.toISOString()}`,\n                        start: gapStart,\n                        end: gapEnd,\n                    })\n                } else {\n                    // console.log('No gap after the last item.');\n                }\n            } else {\n                // console.log('No items to check for gaps after.');\n            }\n        },\n        async fetchContent(contentType, maxDurationMinutes, startDateTime, page = 1, search = '') {\n            this.loading = true\n            this.clearError()\n            const notificationStore = useNotificationStore()\n\n            // Convert startDateTime from user's timezone to UTC\n            const startDateTimeUTC = dayjs(startDateTime).tz(dayjs.tz.guess()).utc().format('YYYY-MM-DDTHH:mm:ss[Z]')\n\n            // Log the parameters before making the request\n            // console.log('Fetching content with parameters:');\n            // console.log('Content Type:', contentType);\n            // console.log('Max Duration Minutes:', maxDurationMinutes);\n            // console.log('Start DateTime (User Timezone):', startDateTime);\n            // console.log('Start DateTime (UTC):', startDateTimeUTC);\n            // console.log('Page:', page);\n            // console.log('Search Query:', search);\n\n            try {\n                const response = await axios.get('/admin/channel-playlist/get-content', {\n                    params: {\n                        type: contentType,\n                        maxDurationMinutes: maxDurationMinutes,\n                        start_dateTime: startDateTimeUTC,\n                        page: page,\n                        search: search,\n                    },\n                })\n                console.log('Response data:', response.data)  // Log the response data\n                this.contentItems = response.data.items\n                this.currentPage = response.data.current_page\n                this.totalPages = response.data.total_pages\n                this.contentFetched = true\n                const {message, status} = response.data\n                notificationStore.setToastNotification(message, status)\n            } catch (error) {\n                this.error = error.response ? error.response.data.message : error.message\n                console.error('Error fetching content:', this.error)\n                notificationStore.setToastNotification(this.error, 'error')\n            } finally {\n                this.loading = false\n            }\n        },\n        addContentToSchedule(content) {\n            this.clearError()\n            this.scheduleItems.push(content)\n            this.scheduleItems = [...this.scheduleItems] // Trigger reactivity\n            this.removeGap(content.start_dateTime) // Remove the gap after adding content\n            this.insertGaps() // Update gaps after removing and adding content\n        },\n        removeGap(startDateTime) {\n            // console.log('removing gap...')\n            // console.log('start dateTime: ' + startDateTime)\n            this.scheduleItems = this.scheduleItems.filter(item => !(item.type === 'gap' && item.start_dateTime === startDateTime))\n        },\n        resetContent() {\n            this.contentItems = []\n            this.contentFetched = false\n            this.error = null\n            this.currentPage = 1\n            this.totalPages = 1\n            this.searchQuery = ''\n        },\n        setSearchQuery(query) {\n            this.searchQuery = query\n        },\n        setPage(page) {\n            this.currentPage = page\n        },\n    },\n\n    getters: {\n        startTimeUTC: state => {\n            return dayjs(state.startTime).utc().format('YYYY-MM-DDTHH:mm:ss[Z]')\n        },\n        endTimeUTC: state => {\n            return dayjs(state.endTime).utc().format('YYYY-MM-DDTHH:mm:ss[Z]')\n        },\n        scheduleItemsWithUserTimezone(state) {\n            const userStore = useUserStore()\n            const items = state.scheduleItems.map(item => {\n                return {\n                    ...item,\n                    start_dateTime: dayjs(item.start_dateTime).tz(userStore.timezone).format('YYYY-MM-DDTHH:mm:ssZ'),\n                    end_dateTime: dayjs(item.end_dateTime).tz(userStore.timezone).format('YYYY-MM-DDTHH:mm:ssZ'),\n                }\n            })\n            items.sort((a, b) => dayjs(a.start_dateTime).isBefore(dayjs(b.start_dateTime)) ? -1 : 1)\n            return items\n        },\n        hasRemovedItems(state) {\n            return state.scheduleItems.some(item => item.removed)\n        },\n        conflictCount(state) {\n            return state.scheduleItems.filter(item => item.conflict && !item.removed).length\n        },\n        gapCount(state) {\n            const items = state.scheduleItems\n                .filter(item => !item.removed && item.type !== 'gap')\n                .map(item => ({\n                    start: dayjs(item.start_dateTime),\n                    end: dayjs(item.end_dateTime),\n                    conflict: item.conflict,\n                }))\n\n            let gaps = 0\n\n            // console.log('Calculating gaps...');\n            // console.log('Start Time UTC:', state.startTimeUTC);\n            // console.log('End Time UTC:', state.endTimeUTC);\n            // console.log('Items:', items);\n\n            // If there are no items, the entire period is a single gap\n            if (items.length === 0) {\n                // console.log('No scheduled items, entire period is a gap.');\n                return 1\n            }\n\n            // Check for gap before the first item\n            if (dayjs.utc(state.startTimeUTC).isBefore(items[0].start)) {\n                // console.log('Gap before the first item');\n                gaps++\n            } else {\n                // console.log('No gap before the first item');\n            }\n\n            // Check for gaps between adjacent items\n            for (let i = 0; i < items.length - 1; i++) {\n                const currentItem = items[i]\n                const nextItem = items[i + 1]\n\n                // console.log(`Current Item: ${currentItem.start.toISOString()}, End: ${currentItem.end.toISOString()}`);\n                // console.log(`Next Item: ${nextItem.start.toISOString()}, Start: ${nextItem.end.toISOString()}`);\n\n                // Only consider gaps if there are no conflicts\n                if (!currentItem.conflict && !nextItem.conflict && currentItem.end.isBefore(nextItem.start)) {\n                    // console.log('Gap between items');\n                    gaps++\n                } else {\n                    // console.log('No gap between these items');\n                }\n            }\n\n            // Check for gap after the last item\n            if (dayjs.utc(state.endTimeUTC).isAfter(items[items.length - 1].end)) {\n                // console.log('Gap after the last item');\n                gaps++\n            } else {\n                // console.log('No gap after the last item');\n            }\n\n            // console.log('Total gaps:', gaps);\n            return gaps\n        },\n\n\n    },\n})\n"],"names":["_regeneratorRuntime","e","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","dayjs","utc","timezone","isSameOrBefore","isSameOrAfter","initialState","playlists","selectedPlaylist","scheduleItems","gaps","startTime","format","endTime","add","contentItems","contentFetched","currentPage","totalPages","searchQuery","showModal","loading","loadingSchedules","processing","error","id","description","url","priority","repeat_mode","next_playlist_id","useChannelPlaylistStore","defineStore","state","actions","assign","this","openAddContentModal","closeAddContentModal","fetchPlaylists","_this","_callee","response","_response$data","message","status","_context","axios","get","data","useNotificationStore","setToastNotification","t0","createPlaylist","playlist","_this2","_callee2","_context2","validateScheduleItems","post","_objectSpread","getValidScheduleItems","showNotification","handleError","updatePlaylist","_this3","_callee3","adminStore","index","adminIndex","_context3","useAdminStore","console","put","concat","findIndex","items","item","playlist_items","document","getElementById","close","clearError","notificationStore","some","conflict","setGeneralServiceNotification","filter","removed","sort","b","start_dateTime","isBefore","end_dateTime","errorMessage","errorDetails","details","JSON","parse","detailedErrorMessages","_i","_Object$entries","entries","_Object$entries$_i","_slicedToArray","field","messages","messageText","Array","isArray","join","setPlaylistData","log","userStore","useUserStore","tz","map","mappedItem","content_id","content_type","order","media_type","source_path","source_type","is_live","is_scheduled","current_viewers_count","max_viewers_count","additional_sources","custom_playback_options","metadata","has_played","duration_minutes","content","fetchSchedules","_this4","_callee4","_this4$scheduleItems","_response$data2","_context4","params","startTimeUTC","endTimeUTC","_toConsumableArray","updateConflicts","removeItem","find","addItem","removeAllItems","clearRemovedItems","recalculateIndexes","currentItem","j","nextItem","isAfter","selectPlaylist","removePlaylist","playlistId","router","route","channelPlaylist","resolveConflicts","conflictsResolved","_this5","_ret","_loop","_ret2","_loop2","previousItem","currentStart","previousEnd","previousStart","isSame","created_at","insertGaps","start","end","toISOString","diff","checkForGapBeforeFirstItem","checkForGapsBetweenItems","checkForGapAfterLastItem","gapStart","gapEnd","gapDuration","lastItemEnd","fetchContent","contentType","maxDurationMinutes","startDateTime","_arguments","_this6","_callee5","page","search","startDateTimeUTC","_response$data3","_context5","undefined","guess","current_page","total_pages","addContentToSchedule","removeGap","resetContent","setSearchQuery","query","setPage","getters","scheduleItemsWithUserTimezone","hasRemovedItems","conflictCount","gapCount"],"sourceRoot":""}