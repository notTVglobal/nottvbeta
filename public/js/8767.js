"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8767],{55398:(e,t,n)=>{n.d(t,{m:()=>o});var o=(0,n(69876).Q_)("newsStore",{state:function(){return{newsArticleIdTiptop:"",newsArticleTitleTiptop:"",newsArticleContentTiptop:[]}},actions:{}})},29122:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(94015),r=n.n(o),i=n(23645),l=n.n(i)()(r());l.push([e.id,"p[data-v-2ab7cda4]{margin-bottom:1em;margin-top:.75em}ol[data-v-2ab7cda4],ul[data-v-2ab7cda4]{padding:0 1rem}","",{version:3,sources:["webpack://./resources/js/Components/TextEditor/TiptapNewsPostEdit.vue"],names:[],mappings:"AA2GA,mBAEI,iBAAkB,CADlB,gBAEJ,CACA,wCAEI,cACJ",sourcesContent:['<template>\n    <TiptapButtons :editor="editor"/>\n\x3c!--    <button--\x3e\n\x3c!--        @click="editor.chain().focus().undo().run()"--\x3e\n\x3c!--        :disabled="!editor.can().undo()"--\x3e\n\x3c!--    >--\x3e\n\x3c!--        undo--\x3e\n\x3c!--    </button>--\x3e\n\x3c!--    <button--\x3e\n\x3c!--        @click="editor.chain().focus().redo().run()"--\x3e\n\x3c!--        :disabled="!editor.can().redo()"--\x3e\n\x3c!--    >--\x3e\n\x3c!--        redo--\x3e\n\x3c!--    </button>--\x3e\n\x3c!--    <button @click.prevent="editor.chain().focus().toggleBulletList().run()"  class="ProseMirror py-1 px-3 ml-2 mb-2 bg-gray-200 rounded-lg">--\x3e\n\x3c!--        Bullets--\x3e\n\x3c!--    </button>--\x3e\n\x3c!--    <button @click.prevent="editor.chain().focus().toggleList().run()" class="py-1 px-3 ml-2 mb-2 bg-gray-200 rounded-lg">--\x3e\n\x3c!--        List--\x3e\n\x3c!--    </button>--\x3e\n\x3c!--    <button @click.prevent="editor.chain().focus().toggleBlockquote().run()" class="py-1 px-3 ml-2 mb-2 bg-gray-200 rounded-lg">--\x3e\n\x3c!--        Block--\x3e\n\x3c!--    </button>--\x3e\n\x3c!--    <button @click.prevent="editor.chain().focus().toggleCode().run()" class="py-1 px-3 ml-2 mb-2 bg-gray-200 rounded-lg">--\x3e\n\x3c!--        Code--\x3e\n\x3c!--    </button>--\x3e\n\x3c!--    <tabbable-textarea :editor="editor" class="element" />--\x3e\n    <div class="overflow-y-scroll min-h-[13rem] max-h-[13rem] mb-2 pb-2 bg-gray-50 border border-1 border-gray-300 focus:outline-none text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 ">\n        <editor-content :editor="editor" class=""/>\n    </div>\n</template>\n\n<script setup>\nimport {useNewsStore} from "@/Stores/NewsStore"\nimport { Editor, EditorContent } from \'@tiptap/vue-3\'\nimport StarterKit from \'@tiptap/starter-kit\'\nimport Document from \'@tiptap/extension-document\'\nimport Paragraph from \'@tiptap/extension-paragraph\'\nimport Text from \'@tiptap/extension-text\'\nimport HardBreak from \'@tiptap/extension-hard-break\'\n// import {History} from "@tiptap/extension-history";\n// import {BulletList} from "@tiptap/extension-bullet-list";\nimport {ListItem} from "@tiptap/extension-list-item";\n// import {onBeforeUnmount} from "vue";\nimport {Inertia} from "@inertiajs/inertia";\nimport throttle from "lodash/throttle"\nimport axios from "axios";\nimport TabbableTextarea from "@/Components/TabbableTextarea.vue";\nimport TiptapButtons from "@/Components/News/TiptapButtons.vue";\n\nlet newsStore = useNewsStore();\n\nconst editor = new Editor({\n    content: newsStore.newsArticleContentTiptop,\n    extensions: [\n        StarterKit,\n        Paragraph.configure({\n            HTMLAttributes: {\n                class: \'news-paragraph\',\n            },\n        }),\n    ],\n\n\n\n\n    onUpdate: ({ editor }) => {\n        newsStore.newsArticleContentTiptop = editor.getHTML()\n        // newsStore.newsArticleContentTiptop = editor.getJSON()\n        // const value = editor.getJSON()\n\n        // Auto-save -> triggered on every change,\n        // currently disabled. Needs to be throttled.\n        //\n        // axios.post(\'/news/save\', { id: newsStore.newsArticleIdTiptop, body:newsStore.newsArticleContentTiptop, title:newsStore.newsArticleTitleTiptop })\n    },\n\n    autofocus: true,\n    editorProps: {\n        attributes: {\n            class: \'min-h-[12rem] max-h-[12rem] block w-full p-2.5 focus:outline-none\'\n        }\n    }\n})\n\n// editor.commands.setContent({\n//     "type": "doc",\n//     "content": newsStore.newsArticleTiptop,\n// })\n\n// const json = editor.getJSON()\n// newsStore.newsArticleTiptop = editor.getHTML()\n\n\n// onBeforeUnmount(() => {\n//     // this isn\'t working, I think it\'s\n//     // needed for the history extension.\n//     editor.destroy()\n// })\n\n// History.configure({\n//     depth: 10,\n// })\n\n<\/script>\n\n<style scoped>\np {\n    margin-top: 0.75em;\n    margin-bottom: 1em;\n}\nul,\nol {\n    padding: 0 1rem;\n}\n</style>\n'],sourceRoot:""}]);const a=l},57083:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(70821);const r={__name:"TiptapButtons",props:{editor:Object},setup:function(e){return function(t,n){return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createElementVNode)("button",{onClick:n[0]||(n[0]=(0,o.withModifiers)((function(t){return e.editor.chain().focus().toggleBold().run()}),["prevent"])),class:(0,o.normalizeClass)(["py-1 px-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-bold",{"bg-gray-600 text-white":e.editor.isActive("bold")}])}," B ",2),(0,o.createElementVNode)("button",{onClick:n[1]||(n[1]=(0,o.withModifiers)((function(t){return e.editor.chain().focus().toggleItalic().run()}),["prevent"])),class:(0,o.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("italic")}])}," i ",2),(0,o.createElementVNode)("button",{onClick:n[2]||(n[2]=(0,o.withModifiers)((function(t){return e.editor.chain().focus().toggleHeading({level:1}).run()}),["prevent"])),class:(0,o.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("heading",{level:1})}])}," h1 ",2),(0,o.createElementVNode)("button",{onClick:n[3]||(n[3]=(0,o.withModifiers)((function(t){return e.editor.chain().focus().toggleHeading({level:2}).run()}),["prevent"])),class:(0,o.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("heading",{level:2})}])}," h2 ",2),(0,o.createElementVNode)("button",{onClick:n[4]||(n[4]=(0,o.withModifiers)((function(t){return e.editor.chain().focus().toggleHeading({level:3}).run()}),["prevent"])),class:(0,o.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("heading",{level:3})}])}," h3 ",2)])}}}},36414:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(70821),r=["onKeydown","textContent"];const i={__name:"TabbableTextarea",props:{modelValue:String},emits:["update:modelValue"],setup:function(e,t){var n=t.emit;function i(e){var t=e.target,n=t.value,o=t.selectionStart,r=t.selectionEnd;t.value=n.substring(0,o)+"\t"+n.substring(r),t.selectionStart=t.selectionEnd=o+1}return function(t,l){return(0,o.openBlock)(),(0,o.createElementBlock)("textarea",{onKeydown:(0,o.withKeys)((0,o.withModifiers)(i,["prevent"]),["tab"]),onKeyup:l[0]||(l[0]=function(e){return(0,o.unref)(n)("update:modelValue",e.target.value)}),textContent:(0,o.toDisplayString)(e.modelValue)},null,40,r)}}}},30131:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(70821),r=n(39038),i={key:0},l=(0,o.createElementVNode)("div",{class:"font-medium text-red-600"}," Whoops! Something went wrong. ",-1),a={class:"mt-3 list-disc list-inside text-sm text-red-600"};const s={__name:"ValidationErrors",setup:function(e){var t=(0,o.computed)((function(){return(0,r.qt)().props.value.errors})),n=(0,o.computed)((function(){return Object.keys(t.value).length>0}));return function(e,r){return n.value?((0,o.openBlock)(),(0,o.createElementBlock)("div",i,[l,(0,o.createElementVNode)("ul",a,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(t.value,(function(e,t){return(0,o.openBlock)(),(0,o.createElementBlock)("li",{key:t},(0,o.toDisplayString)(e),1)})),128))])])):(0,o.createCommentVNode)("",!0)}}}},38767:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var o=n(70821),r=n(39038),i=n(40191),l=n(90771),a=n(55398),s=n(30131),c=n(95404),d=n(90173),u=(n(20336),n(26022)),p=(n(52701),n(35525),n(34565),n(9680)),m=(n(23493),n(9669),n(36414),n(57083)),g={class:"overflow-y-scroll min-h-[13rem] max-h-[13rem] mb-2 pb-2 bg-gray-50 border border-1 border-gray-300 focus:outline-none text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500"};const b={__name:"TiptapNewsPostEdit",setup:function(e){var t=(0,a.m)(),n=new c.ML({content:t.newsArticleContentTiptop,extensions:[d.Z,u.Z.configure({HTMLAttributes:{class:"news-paragraph"}})],onUpdate:function(e){var n=e.editor;t.newsArticleContentTiptop=n.getHTML()},autofocus:!0,editorProps:{attributes:{class:"min-h-[12rem] max-h-[12rem] block w-full p-2.5 focus:outline-none"}}});return function(e,t){return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createVNode)(m.Z,{editor:(0,o.unref)(n)},null,8,["editor"]),(0,o.createElementVNode)("div",g,[(0,o.createVNode)((0,o.unref)(c.kg),{editor:(0,o.unref)(n),class:""},null,8,["editor"])])],64)}}};var x=n(72446),f=n.n(x),v=n(29122),w={insert:"head",singleton:!1};f()(v.Z,w);v.Z.locals;const h=(0,n(83744).Z)(b,[["__scopeId","data-v-2ab7cda4"]]);var y=n(664),k={class:"place-self-center flex flex-col gap-y-3"},C={id:"topDiv",class:"bg-white text-black dark:bg-gray-800 dark:text-gray-50 p-5 mb-10"},E={class:"flex flex-row justify-between"},N=(0,o.createElementVNode)("h2",{class:"text-xl font-semibold leading-tight"}," Edit News Post ",-1),T={class:"flex justify-end space-x-2"},B={key:0,class:"px-4 py-2 text-white bg-yellow-600 hover:bg-yellow-500 rounded-lg disabled:bg-gray-400"},V={class:"p-6 border-b border-gray-200"},A=["onSubmit"],S={class:"mb-6"},M=(0,o.createElementVNode)("label",{for:"Title",class:"block mb-2 text-sm font-bold text-gray-900 dark:text-gray-300"},"Title",-1),I={key:0,class:"text-sm text-red-600"},L={class:"mb-6"},_=(0,o.createElementVNode)("label",{for:"slug",class:"block mb-2 text-sm font-bold text-gray-900 dark:text-gray-300"},"Content",-1),H={key:1,class:"text-sm text-red-600"},P={class:"flex justify-start"},Z=["disabled"];const j={__name:"Edit",props:{news:Object,can:Object},setup:function(e){var t=e,n=(0,i.q)(),c=(0,l.L)(),d=(0,a.m)(),u=(0,r.cI)({id:t.news.id,title:t.news.title,body:d.newsArticleContentTiptop}),m=function(){u.body=d.newsArticleContentTiptop,u.put(route("news.update",t.news.id))};function g(){d.newsArticleContentTiptop="";var e=(0,r.qt)().props.value.urlPrev;"empty"!==e&&p.Inertia.visit(e)}return n.currentPage="newsEdit",c.showFlashMessage=!0,d.newsArticleIdTiptop=t.news.id,d.newsArticleTitleTiptop=t.news.title,d.newsArticleContentTiptop=t.news.content,u.body=d.newsArticleContentTiptop,(0,o.onMounted)((function(){n.makeVideoTopRight(),c.isMobile&&(n.ottClass="ottClose",n.ott=0),document.getElementById("topDiv").scrollIntoView()})),function(e,r){var i=(0,o.resolveComponent)("Head"),l=(0,o.resolveComponent)("Link");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createVNode)(i,{title:"Edit News Post"}),(0,o.createElementVNode)("div",k,[(0,o.createElementVNode)("div",C,[(0,o.unref)(c).showFlashMessage?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(y.Z),{key:0,flash:e.$page.props.flash},null,8,["flash"])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",E,[N,(0,o.createElementVNode)("div",T,[(0,o.createVNode)(l,{href:"/newsroom"},{default:(0,o.withCtx)((function(){return[t.can.viewNewsroom?((0,o.openBlock)(),(0,o.createElementBlock)("button",B,"Newsroom")):(0,o.createCommentVNode)("",!0)]})),_:1}),(0,o.createElementVNode)("div",null,[(0,o.createElementVNode)("button",{onClick:g,class:"px-4 py-2 text-white bg-orange-600 hover:bg-orange-500 rounded-lg"},"Cancel ")])])]),(0,o.createElementVNode)("div",V,[(0,o.createElementVNode)("form",{onSubmit:(0,o.withModifiers)(m,["prevent"])},[(0,o.createElementVNode)("div",S,[M,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=function(e){return(0,o.unref)(u).title=e}),name:"title",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:""},null,512),[[o.vModelText,(0,o.unref)(u).title]]),(0,o.unref)(u).errors.title?((0,o.openBlock)(),(0,o.createElementBlock)("div",I,(0,o.toDisplayString)((0,o.unref)(u).errors.title),1)):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("div",L,[_,"newsEdit"===(0,o.unref)(n).currentPage?((0,o.openBlock)(),(0,o.createBlock)(h,{key:0})):(0,o.createCommentVNode)("",!0),(0,o.unref)(u).errors.body?((0,o.openBlock)(),(0,o.createElementBlock)("div",H,(0,o.toDisplayString)((0,o.unref)(u).errors.body),1)):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("div",P,[(0,o.createElementVNode)("button",{type:"submit",class:(0,o.normalizeClass)(["text-white bg-blue-700 hover:bg-blue-500 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5",{"opacity-25":(0,o.unref)(u).processing}]),disabled:(0,o.unref)(u).processing}," Save ",10,Z),(0,o.createVNode)(s.Z,{class:"ml-4"})])],40,A)])])])],64)}}}}}]);
//# sourceMappingURL=8767.js.map