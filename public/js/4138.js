/*! For license information please see 4138.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4138,5398],{55398:(e,t,r)=>{r.r(t),r.d(t,{useNewsStore:()=>p});var n=r(69876),o=r(87879),i=r(83004);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(){l=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof w?t:w,a=Object.create(i.prototype),s=new j(n||[]);return o(a,"_invoke",{value:L(e,r,s)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var h="suspendedStart",m="suspendedYield",y="executing",g="completed",v={};function w(){}function b(){}function x(){}var E={};d(E,s,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(D([])));k&&k!==r&&n.call(k,s)&&(E=k);var N=x.prototype=w.prototype=Object.create(E);function C(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(o,i,s,c){var l=p(e[o],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==a(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,c)}),(function(e){r("throw",e,s,c)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,c)}))}c(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function L(t,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=P(s,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=p(t,r,n);if("normal"===l.type){if(o=n.done?g:m,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=g,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=p(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(a(t)+" is not iterable")}return b.prototype=x,o(N,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=d(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,u,"GeneratorFunction")),e.prototype=Object.create(N),e},t.awrap=function(e){return{__await:e}},C(_.prototype),d(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(N),d(N,u,"Generator"),d(N,s,(function(){return this})),d(N,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function u(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,s,"next",e)}function s(e){u(i,n,o,a,s,"throw",e)}a(void 0)}))}}var f=function(){return{id:null,slug:"",title:"",content:"",newsPerson:[],category:{},subCategory:{},city:{},province:{},federalElectoralDistrict:{},subnationalElectoralDistrict:{},country:[],image:{},status:[],video:{},created_at:"",published_at:"",cachedContent:{},categories:[],subCategories:[],type:"",displayText:"",newsPersons:[],citySearchItems:[],showEditor:!1,showNewsPersonSelector:!1,showCategoryCitySelector:!1,citySelectDropdownVisible:!1,showSaveMessage:!1,focusedIndex:0,searchQuery:"",filters:[],search:"",errors:[],newsStoryStatuses:{},newsStoryId:"",isLoadingCategoryCityData:!1,isLoading:!0,processing:!1,latestStories:[],newsStories:[],currentPage:1,totalPages:1,selectedSubCategoryId:"",selectedSubCategoryName:"",selectedSubCategoryDescription:"",selectedCategoryId:null,selectedCityId:null,selectedFederalDistrictId:null,selectedSubnationalDistrictId:null}},p=(0,n.Q_)("newsStore",{state:f,actions:{reset:function(){Object.assign(this,{id:null,slug:"",title:"",content:"",newsPerson:[],category:{},subCategory:{},city:{},province:{},federalElectoralDistrict:{},subnationalElectoralDistrict:{},country:[],image:{},status:[],video:{},created_at:"",published_at:"",cachedContent:{},categories:[],subCategories:[],type:"",displayText:"",newsPersons:[],citySearchItems:[],showEditor:!1,showNewsPersonSelector:!1,showCategoryCitySelector:!1,citySelectDropdownVisible:!1,showSaveMessage:!1,focusedIndex:0,searchQuery:"",filters:[],search:"",errors:[],newsStoryStatuses:{},newsStoryId:"",isLoadingCategoryCityData:!1,isLoading:!0,processing:!1,latestStories:[],newsStories:[],currentPage:1,totalPages:1,selectedSubCategoryId:"",selectedSubCategoryName:"",selectedSubCategoryDescription:"",selectedCategoryId:null,selectedCityId:null,selectedFederalDistrictId:null,selectedSubnationalDistrictId:null})},initializeNewsStore:function(e){this.id=e.id,this.slug=e.slug,this.title=e.title,this.status=e.status,this.content=e.content,this.newsPerson=e.newsPerson,this.category=e.category,this.subCategory=e.subCategory,this.city=e.city,this.province=e.province,this.federalElectoralDistrict=e.federalElectoralDistrict,this.subnationalElectoralDistrict=e.subnationalElectoralDistrict,this.image=e.image,this.video=e.video,this.created_at=e.created_at,this.published_at=e.published_at,this.cachedContent=e.cachedContent},toggleCategoryCitySelector:function(){this.showCategoryCitySelector=!this.showCategoryCitySelector},toggleNewsPersonSelector:function(){this.showNewsPersonSelector=!this.showNewsPersonSelector},setSelectedCategory:function(){var e=this,t=this.categories.find((function(t){return t.id===e.news_category_id}));this.selectedCategory=t||null,this.news_category_sub_id,3===this.news_category_id?this.setSelectedLocation():this.resetLocationIds()},fetchCategories:function(){var e=this;return d(l().mark((function t(){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoadingCityData=!0,t.prev=1,t.next=4,fetch("/api/news/categories");case 4:if(!(r=t.sent).ok){t.next=11;break}return t.next=8,r.json();case 8:e.categories=t.sent,t.next=12;break;case 11:console.error("Failed to fetch categories:",r.statusText);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),console.error("Error fetching categories:",t.t0);case 17:return t.prev=17,e.isLoadingCityData=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,14,17,20]])})))()},fetchCitiesForSearch:function(){var e=this;return d(l().mark((function t(){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/news/cities");case 3:if(!(r=t.sent).ok){t.next=10;break}return t.next=7,r.json();case 7:e.citySearchItems=t.sent,t.next=11;break;case 10:console.error("Failed to fetch locations:",r.statusText);case 11:e.isLoadingCityData=!1,t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),console.error("Error fetching locations:",t.t0),e.isLoadingCityData=!1;case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))()},setSelectedLocation:function(){var e=this;this.city={},this.province={},this.federalElectoralDistrict={},this.subnationalElectoralDistrict={};var t=null;if(this.city.id?t=this.citySearchItems.find((function(t){return t.id===e.city.id&&("city"===t.type||"town"===t.type)})):this.province.id?t=this.citySearchItems.find((function(t){return t.id===e.province.id&&"province"===t.type})):this.federalElectoralDistrict.id?t=this.citySearchItems.find((function(t){return t.id===e.federalElectoralDistrict.id&&"federalElectoralDistrict"===t.type})):this.subnationalElectoralDistrict.id&&(t=this.citySearchItems.find((function(t){return t.id===e.subnationalElectoralDistrict.id&&"subnationalElectoralDistrict"===t.type}))),t)switch(t.type){case"city":case"town":this.city={id:t.id,name:t.name,type:t.type},this.province={id:t.province.id,name:t.province.name},this.displayText="".concat(t.name,", ").concat(t.province.name);break;case"province":this.province={id:t.id,name:t.name,type:t.type},this.displayText=t.name;break;case"federalElectoralDistrict":this.federalElectoralDistrict={id:t.id,name:t.name,type:t.type},this.displayText=t.name;break;case"subnationalElectoralDistrict":this.subnationalElectoralDistrict={id:t.id,name:t.name,type:t.type},this.displayText=t.name;break;default:this.displayText=""}else this.displayText=""},fetchCitiesAndCategories:function(){var e=this;return d(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchCitiesForSearch();case 2:e.setSelectedLocation();case 3:case"end":return t.stop()}}),t)})))()},updateSelectedLocation:function(e){if(!e)return this.city={},this.province={},this.federalElectoralDistrict={},this.subnationalElectoralDistrict={},void(this.displayText="");switch(this.selectedLocation=e,this.displayText=this.getDisplayTextForType(e.type),this.city={},this.province={},this.federalElectoralDistrict={},this.subnationalElectoralDistrict={},this.displayText=this.getDisplayTextForType(e.type),e.type){case"city":case"town":this.city={id:e.id,name:e.name,province:e.province},this.province={id:e.province.id,name:e.province.name},this.displayText="".concat(e.name,", ").concat(e.province.name);break;case"province":case"territory":this.province={id:e.id,name:e.name,type:e.type},this.displayText=e.name;break;case"federalElectoralDistrict":this.federalElectoralDistrict={id:e.id,name:e.name,type:e.type},this.displayText=e.name;break;case"subnationalElectoralDistrict":this.subnationalElectoralDistrict={id:e.id,name:e.name,type:e.type},this.displayText=e.name;break;default:this.displayText=""}},getDisplayTextForType:function(e){switch(e){case"city":return this.type="city","City";case"town":return this.type="town","Town";case"province":return this.type="province","Province";case"territory":return this.type="territory","Territory";case"federalElectoralDistrict":return this.type="federalElectoralDistrict","Federal Electoral District";case"subnationalElectoralDistrict":return this.type="subnationalElectoralDistrict","Subnational Electoral District";default:return""}},setSearchInput:function(e){this.search=e},resetLocationIds:function(e){if(this.city_id=null,this.province_id=null,this.federal_electoral_district_id=null,this.subnational_electoral_district_id=null,e)switch(e.type){case"city":this.city_id=e.city_id,this.province_id=e.province_id;break;case"province":case"territory":this.province_id=e.province_id;break;case"federalElectoralDistrict":this.federal_electoral_district_id=e.federal_electoral_district_id;break;case"subnationalElectoralDistrict":this.subnational_electoral_district_id=e.subnational_electoral_district_id}},updateSearch:function(e){this.search=e},fetchNewsPersons:function(){var e=this;return d(l().mark((function t(){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("get news persons"),t.prev=1,t.next=4,fetch("/api/news/persons");case 4:return r=t.sent,t.next=7,r.json();case 7:e.newsPersons=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.error("Failed to fetch news persons:",t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},setNewsPerson:function(e){this.newsPerson=e},submit:function(){var e=this;return d(l().mark((function t(){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.processing=!0,r={id:e.id,title:e.title,status:e.status.id,content:e.content,news_category_id:e.category.id,news_category_sub_id:e.subCategory.id,city_id:e.city.id,province_id:e.province.id,federal_electoral_district_id:e.federalElectoralDistrict.id,subnational_electoral_district_id:e.subnationalElectoralDistrict.id,type:e.type,news_person_id:e.newsPerson.id},t.prev=2,!e.id){t.next=8;break}return t.next=6,o.Nd.patch(route("newsStory.update",e.slug),r,{onError:function(t){e.errors=t,e.processing=!1},onSuccess:function(){e.processing=!1}});case 6:t.next=10;break;case 8:return t.next=10,o.Nd.post(route("newsStory.store"),r,{onError:function(t){e.errors=t,e.processing=!1},onSuccess:function(){e.processing=!1}});case 10:t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),console.error("An unexpected error occurred:",t.t0),e.processing=!1;case 16:case"end":return t.stop()}}),t,null,[[2,12]])})))()},publish:function(e){var t=this;return d(l().mark((function r(){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.Nd.patch(route("newsroom.publish",e),{onError:function(e){t.errors=e,t.processing=!1,notificationStore.setToastNotification(e,"error")},onSuccess:function(){t.processing=!1,(0,i.useNotificationStore)().setToastNotification("News story published successfully.","success")}});case 2:case"end":return r.stop()}}),r)})))()},changeNewsStoryStatus:function(e){document.getElementById("newsStoryStatusChangeModal").close(),o.Nd.patch(route("news.story.changeStatus"),{newsStory_id:this.newsStoryId,new_status_id:e},{onError:function(e){console.error("Error changing status:",e)}})},fetchNewsStories:function(){var e=arguments,t=this;return d(l().mark((function r(){var n,o,i,a,c,u,d,f;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:null,o=e.length>1&&void 0!==e[1]?e[1]:null,i=e.length>2&&void 0!==e[2]?e[2]:null,a=e.length>3&&void 0!==e[3]?e[3]:null,c=e.length>4&&void 0!==e[4]?e[4]:null,u=e.length>5&&void 0!==e[5]?e[5]:1,r.prev=6,r.next=9,axios.get("/news-stories",{params:{news_category_id:n,news_category_sub_id:o,city_id:i,federal_district_id:a,subnational_district_id:c,page:u}});case 9:d=r.sent,f=d.data,t.newsStories=1===u?f.data:[].concat(s(t.newsStories),s(f.data)),t.currentPage=f.current_page,t.totalPages=f.last_page,r.next=19;break;case 16:r.prev=16,r.t0=r.catch(6),console.error("Failed to fetch news stories:",r.t0);case 19:case"end":return r.stop()}}),r,null,[[6,16]])})))()},filterStoriesBySubCategory:function(e,t,r){this.selectedSubCategoryId=e,this.selectedSubCategoryName=t,this.selectedSubCategoryDescription=r,this.fetchNewsStories(this.selectedCategoryId,e,this.selectedCityId,this.selectedFederalDistrictId,this.selectedSubnationalDistrictId,1)},resetFilter:function(){this.selectedSubCategoryId=null,this.selectedSubCategoryName="",this.selectedSubCategoryDescription=""},updateSelectedSubCategory:function(e){this.selectedSubCategoryId=e},initializeLatestStories:function(e,t,r){this.latestStories=e,this.selectedCategoryId=t,this.selectedCityId=r}},getters:{filteredNewsStories:function(e){return e.selectedSubCategoryId?e.newsStories:e.latestStories},filteredCitySearchItems:function(e){return e.search?e.citySearchItems.filter((function(t){return t.name.toLowerCase().includes(e.search.toLowerCase())})):e.citySearchItems},searchInput:function(e){return e.city.id?"".concat(e.city.name,", ").concat(e.province.name):e.province.id?e.province.name:e.federalElectoralDistrict.id?e.federalElectoralDistrict.name:e.subnationalElectoralDistrict.id?e.subnationalElectoralDistrict.name:e.search},locationType:function(e){if(!e.selectedLocation)return e.type="",e.displayText="","location type is not set";switch(e.selectedLocation.type){case"city":e.type="city",e.displayText="City";break;case"town":e.type="town",e.displayText="Town";break;case"province":e.displayText="Province",e.type="province";break;case"territory":e.displayText="Territory",e.type="territory";break;case"federalElectoralDistrict":e.displayText="Federal Electoral District",e.type="federalElectoralDistrict";break;case"subnationalElectoralDistrict":e.displayText="Subnational Electoral District",e.type="subnationalElectoralDistrict";break;default:e.displayText=""}return"location type is set"}}})},24831:(e,t,r)=>{r.d(t,{U:()=>c});var n=r(70821),o=r(90771),i=r(58358),a=r(40191),s=r(87879);function c(e){var t=(0,o.useUserStore)(),r=(0,i.useAppSettingStore)(),c=(0,a.useVideoPlayerStore)();r.currentPage=e,r.showFlashMessage=!0,r.pageIsHidden=!1,t.isMobile||window.innerWidth<1024||r.fullPage?r.ott=0:(0===r.ott&&(r.ott=4),r.showOttButtons=!0),c.makeVideoTopRight(),r.pageReload&&(r.pageReload=!1,r.pageWasReloaded=!0,window.location.reload()),s.Nd.on("navigate",(function(e){t.isMobile||window.innerWidth<1024||r.fullPage?r.ott=0:0===r.ott&&(r.ott=4),""!==window.location.search&&!r.shouldScrollToTop||requestAnimationFrame((function(){var e=document.getElementById("topDiv");e?e.scrollIntoView({behavior:"auto"}):window.scrollTo(0,0)})),r.shouldScrollToTop=!1})),r.setPrevUrl(),r.showOttButtons=!0,r.noLayout=!1,(0,n.watch)((function(){return r.isSmallScreen}),(function(e){r.ott=e?0:4}),{immediate:!0})}},38967:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(94015),o=r.n(n),i=r(23645),a=r.n(i)()(o());a.push([e.id,".checkbox-container[data-v-010175d3]{align-items:center;display:flex}.checkbox[data-v-010175d3]{margin-right:8px}","",{version:3,sources:["webpack://./resources/js/Components/Global/Uploaders/ImageUpload.vue"],names:[],mappings:"AA6HA,qCAEE,kBAAmB,CADnB,YAEF,CAEA,2BACE,gBACF",sourcesContent:["<template>\n  <div class=\"\">\n    <div class=\"max-full mx-auto mt-2 mb-6 bg-gray-200 p-6 text-black\">\n      <h2 class=\"text-xl font-semibold\">{{ name }}</h2>\n      <ul class=\"pb-4\">\n        <li>Max File Size: <span class=\"text-orange-400\">{{ maxSize }}</span></li>\n        <li>File Types accepted: <span class=\"text-orange-400\">{{ fileTypes }}</span></li>\n      </ul>\n\n      <div class=\"checkbox-container mb-4\">\n        <input type=\"checkbox\" id=\"removeExif\" v-model=\"removeExif\" class=\"checkbox checkbox-md\">\n        <label for=\"removeExif\" class=\"checkbox-label\">Remove EXIF data</label>\n      </div>\n\n\n      <file-pond\n          name=\"image\"\n          ref=\"pond\"\n          class-name=\"my-pond\"\n          allow-multiple=\"false\"\n          label-idle=\"Click to choose file, or drag here...\"\n          :server=\"serverOptions\"\n          accepted-file-types=\"image/jpeg, image/png\"\n          @init=\"handleFilePondInit\"\n          @processfile=\"handleProcessedFile\"\n          :max-file-size=\"maxSize\"\n          allowRemove=\"false\"\n          allowRevert=\"false\"\n      />\n    </div>\n  </div>\n\n</template>\n\n<script setup>\nimport vueFilePond from 'vue-filepond'\nimport FilePondPluginFileValidateType from 'filepond-plugin-file-validate-type'\nimport FilePondPluginFileValidateSize from 'filepond-plugin-file-validate-size'\nimport FilePondPluginImagePreview from 'filepond-plugin-image-preview'\nimport 'filepond/dist/filepond.min.css'\nimport 'filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.css'\nimport { ref } from 'vue'\nimport { useNotificationStore } from '@/Stores/NotificationStore'\n\nconst notificationStore  = useNotificationStore()\n\nlet props = defineProps({\n  // image: Object,\n  name: String,\n  metadataKey: String,\n  metadataValue: String,\n  modelType: String,\n  modelId: Number,\n  maxSize: String,\n  fileTypes: String,\n})\n\nconst myFiles = ref([''])\n\nconst emit = defineEmits(['reloadImage', 'imageUploaded'])\n\nconst FilePond = vueFilePond(\n    FilePondPluginFileValidateType,\n    FilePondPluginFileValidateSize,\n    FilePondPluginImagePreview,\n)\n\n// Define reactive variables\nconst removeExif = ref(false)\nconst maxSize = ref('30MB')\nconst fileTypes = ref(['image/png', 'image/jpeg'])\n// const modelType = 'yourModelType'; // Replace with your actual model type\n// const modelId = 'yourModelId'; // Replace with your actual model ID\n\n// Get the CSRF token from the meta tag\nconst csrfToken = document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')\n\nconst serverOptions = ref({\n  process: {\n    url: `/api/image-upload?modelType=${props.modelType}&modelId=${props.modelId}&removeExif=${removeExif.value}`,\n    method: 'POST',\n    headers: {\n      'X-CSRF-TOKEN': csrfToken\n    },\n    withCredentials: false,\n    onload: (response) => {\n      const jsonResponse = JSON.parse(response);\n      if (jsonResponse.error) {\n        throw new Error(jsonResponse.error);\n      }\n      return jsonResponse;\n    },\n    onerror: (response) => {\n      const error = JSON.parse(response);\n      console.error('FilePond error:', error);\n      notificationStore.setGeneralServiceNotification('Error', response);\n      return error.error || 'Upload failed';\n    },\n  },\n})\n\n\n// function filepondInitialized() {\n//   console.log('Filepond is ready!')\n// }\n\nfunction handleFilePondInit() {\n  console.log('FilePond has initialized')\n}\n\nfunction handleProcessedFile(error, file) {\n  if (error) {\n    console.log('FilePond processed file error:', error);\n    return;\n  }\n  emit('reloadImage')\n\n  // const response = JSON.parse(file.serverId)\n  // emit('imageUploaded', response)\n}\n\n\n<\/script>\n\n<style scoped>\n.checkbox-container {\n  display: flex;\n  align-items: center; /* Align items vertically */\n}\n\n.checkbox {\n  margin-right: 8px; /* Space between the checkbox and the label */\n}\n</style>"],sourceRoot:""}]);const s=a},14607:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(94015),o=r.n(n),i=r(23645),a=r.n(i)()(o());a.push([e.id,".fade-enter-active[data-v-6493ea3a],.fade-leave-active[data-v-6493ea3a]{transition:opacity .5s}.fade-enter[data-v-6493ea3a],.fade-leave-to[data-v-6493ea3a]{opacity:0}","",{version:3,sources:["webpack://./resources/js/Pages/News/Stories/{$id}/Edit.vue"],names:[],mappings:"AAsGA,wEACE,sBACF,CAEA,6DACE,SACF",sourcesContent:['<template>\n\n  <Head title="Edit News Post"/>\n\n  <div class="place-self-center flex flex-col gap-y-3">\n    <div v-if="newsStore.isLoading" class="bg-white text-black dark:bg-gray-800 dark:text-gray-50 p-5 mb-10">\n      <span class="loading loading-spinner text-info"></span>\n      <span class="ml-4">Loading... please wait.</span>\n      </div>\n    <div v-else id="topDiv" class="bg-white text-black dark:bg-gray-800 dark:text-gray-50 p-5 mb-10">\n\n      <Message v-if="appSettingStore.showFlashMessage" :flash="$page.props.flash"/>\n      <JetValidationErrors class="ml-4"/>\n\n      <NewsEditHeader :can="can" />\n\n      <div class="p-6 border-b border-gray-200">\n\n        <div class="flex flex-wrap justify-between gap-3">\n          <NewsSelectPersonContainer :can="can" class="flex-grow"/>\n          <ChangeNewsImage />\n        </div>\n\n        <NewsCategoryCityContainer />\n\n        <div class="py-4 px-6 mb-6 bg-white shadow rounded-lg">\n\n          \x3c!-- Prompt the user to restore cached content --\x3e\n          \x3c!-- TipTapNewsEditor is inside here, in NewsEditComponent --\x3e\n          <NewsRestoreCachedContent />\n\n          <div class="flex justify-end items-center">\n            <transition name="fade">\n              <div v-if="newsStore.showSaveMessage" class="save-message text-xs mr-2 text-green-500">\n                Content cached\n              </div>\n            </transition>\n            <button\n                @click="newsStore.submit"\n                class="text-white bg-blue-700 hover:bg-blue-500 focus:outline-none font-medium rounded-lg text-sm px-5 py-2"\n                :disabled="newsStore.processing"\n                :class="{ \'opacity-25\': newsStore.processing }"\n            >\n              Save\n            </button>\n            <JetValidationErrors class="ml-4"/>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { defineAsyncComponent, onMounted, onUnmounted } from \'vue\'\nimport { usePageSetup } from \'@/Utilities/PageSetup\'\nimport { useAppSettingStore } from \'@/Stores/AppSettingStore\'\nimport { useNewsStore } from \'@/Stores/NewsStore\'\nimport JetValidationErrors from \'@/Jetstream/ValidationErrors\'\nimport Message from \'@/Components/Global/Modals/Messages\'\nimport \'vue-select/dist/vue-select.css\';\nimport NewsEditHeader from \'@/Components/Pages/News/NewsEditHeader.vue\'\nimport NewsRestoreCachedContent from \'@/Components/Pages/News/NewsRestoreCachedContent.vue\'\nimport ChangeNewsImage from \'@/Components/Pages/News/ChangeNewsImage.vue\'\nconst NewsCategoryCityContainer = defineAsyncComponent({\n  loader: () => import(\'@/Components/Pages/News/NewsCategoryCityContainer.vue\'),\n  loadingComponent: { template: \'<p>Loading...</p>\' },\n  errorComponent: { template: \'<p>Error loading component</p>\' },\n})\nconst NewsSelectPersonContainer = defineAsyncComponent({\n  loader: () => import(\'@/Components/Pages/News/NewsSelectPersonContainer.vue\'),\n  loadingComponent: { template: \'<p>Loading...</p>\' },\n  errorComponent: { template: \'<p>Error loading component</p>\' },\n})\n\nusePageSetup(\'newsEdit\')\n\nconst appSettingStore = useAppSettingStore()\nconst newsStore = useNewsStore()\n\nconst props = defineProps({\n  newsStory: Object,\n  cachedContent: Object,\n  can: Object,\n  errors: Object,\n})\n\nnewsStore.errors = props.errors; // This will contain the error messages\n\nonMounted(() => {\n  newsStore.initializeNewsStore(props.newsStory)\n  if (props.cachedContent) {\n    newsStore.cachedContent = props.cachedContent\n  }\n  newsStore.isLoading = false\n})\n\nonUnmounted(() => {\n  newsStore.reset();\n})\n<\/script>\n<style scoped>\n.fade-enter-active, .fade-leave-active {\n  transition: opacity 0.5s;\n}\n\n.fade-enter, .fade-leave-to {\n  opacity: 0;\n}\n</style>'],sourceRoot:""}]);const s=a},19204:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(70821),o=r(87879),i=r(58358),a=r(90771);const s={__name:"CancelButton",props:{url:String},setup:function(e){var t=(0,i.useAppSettingStore)(),r=(0,a.useUserStore)(),s=e;function c(){if(t.prevUrl)s.url?o.Nd.visit(s.url):o.Nd.visit(t.prevUrl);else if(s.url)o.Nd.visit(s.url);else{var e=r.isCreator?"/dashboard":"/";o.Nd.visit(e)}}return function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createElementVNode)("button",{onClick:(0,n.withModifiers)(c,["prevent"]),class:"ml-2 px-4 py-2 text-white bg-orange-600 hover:bg-orange-500 rounded-lg"},"Cancel ")])}}}},59369:(e,t,r)=>{r.d(t,{Z:()=>v});var n=r(70821),o=r(87879),i=r(58358);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(){s=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof w?t:w,a=Object.create(i.prototype),s=new j(n||[]);return o(a,"_invoke",{value:L(e,r,s)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var h="suspendedStart",m="suspendedYield",y="executing",g="completed",v={};function w(){}function b(){}function x(){}var E={};d(E,c,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(D([])));k&&k!==r&&n.call(k,c)&&(E=k);var N=x.prototype=w.prototype=Object.create(E);function C(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(o,i,s,c){var l=p(e[o],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==a(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,c)}),(function(e){r("throw",e,s,c)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,c)}))}c(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function L(t,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=P(s,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=p(t,r,n);if("normal"===l.type){if(o=n.done?g:m,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=g,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=p(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(a(t)+" is not iterable")}return b.prototype=x,o(N,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=d(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,u,"GeneratorFunction")),e.prototype=Object.create(N),e},t.awrap=function(e){return{__await:e}},C(_.prototype),d(_.prototype,l,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(N),d(N,u,"Generator"),d(N,c,(function(){return this})),d(N,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function c(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var l={class:"mx-4 my-4"},u={key:0,class:"alert alert-info mt-4"},d=(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"stroke-current shrink-0 w-6 h-6"},[(0,n.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),f={key:1,class:"alert alert-success mt-4 mx-3"},p=(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[(0,n.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),h={key:2,class:"alert alert-warning mt-4 mx-3"},m=(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[(0,n.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),y={key:3,class:"alert alert-error mt-4 mx-3"},g=(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[(0,n.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1);const v={__name:"Messages",props:{flash:Object},setup:function(e){(0,i.useAppSettingStore)().showFlashMessage=!0;var t=e,r=((0,n.computed)((function(){return{"text-green-700 bg-green-100 dark:bg-green-200 dark:text-green-800":t.flash.success,"text-blue-700 bg-blue-100 dark:bg-blue-200 dark:text-blue-800":t.flash.message,"text-orange-700 bg-orange-100 dark:bg-orange-200 dark:text-orange-800":t.flash.warning,"text-red-700 bg-red-100 dark:bg-red-200 dark:text-red-800":t.flash.error}})),function(){var e,t=(e=s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Nd.post(route("flash.clear"));case 2:o.Nd.reload();case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){c(i,n,o,a,s,"next",e)}function s(e){c(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}());return function(e,o){return(0,n.openBlock)(),(0,n.createElementBlock)("div",l,[(0,n.unref)(t).flash.message?((0,n.openBlock)(),(0,n.createElementBlock)("div",u,[d,(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(t).flash.message),1),(0,n.createElementVNode)("button",{class:"text-xs ml-12",onClick:r}," Close")])):(0,n.createCommentVNode)("",!0),(0,n.unref)(t).flash.success?((0,n.openBlock)(),(0,n.createElementBlock)("div",f,[p,(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(t).flash.success),1),(0,n.createElementVNode)("button",{class:"text-xs ml-12",onClick:r}," Close")])):(0,n.createCommentVNode)("",!0),(0,n.unref)(t).flash.warning?((0,n.openBlock)(),(0,n.createElementBlock)("div",h,[m,(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(t).flash.warning),1),(0,n.createElementVNode)("button",{class:"text-xs ml-12",onClick:r}," Close")])):(0,n.createCommentVNode)("",!0),(0,n.unref)(t).flash.error?((0,n.openBlock)(),(0,n.createElementBlock)("div",y,[g,(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(t).flash.error),1),(0,n.createElementVNode)("button",{class:"text-xs ml-12",onClick:r}," Close")])):(0,n.createCommentVNode)("",!0)])}}}},63974:(e,t,r)=>{r.d(t,{Z:()=>C});var n=r(70821),o=r(61658),i=r.n(o),a=r(90521),s=r.n(a),c=r(18236),l=r.n(c),u=r(72965),d=r.n(u),f=(r(62869),r(61712),r(83004)),p={class:""},h={class:"max-full mx-auto mt-2 mb-6 bg-gray-200 p-6 text-black"},m={class:"text-xl font-semibold"},y={class:"pb-4"},g={class:"text-orange-400"},v={class:"text-orange-400"},w={class:"checkbox-container mb-4"},b=function(e){return(0,n.pushScopeId)("data-v-010175d3"),e=e(),(0,n.popScopeId)(),e}((function(){return(0,n.createElementVNode)("label",{for:"removeExif",class:"checkbox-label"},"Remove EXIF data",-1)}));const x={__name:"ImageUpload",props:{name:String,metadataKey:String,metadataValue:String,modelType:String,modelId:Number,maxSize:String,fileTypes:String},emits:["reloadImage","imageUploaded"],setup:function(e,t){var r=t.emit,o=(0,f.useNotificationStore)(),a=e,c=((0,n.ref)([""]),r),u=i()(s(),l(),d()),x=(0,n.ref)(!1),E=(0,n.ref)("30MB"),S=(0,n.ref)(["image/png","image/jpeg"]),k=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),N=(0,n.ref)({process:{url:"/api/image-upload?modelType=".concat(a.modelType,"&modelId=").concat(a.modelId,"&removeExif=").concat(x.value),method:"POST",headers:{"X-CSRF-TOKEN":k},withCredentials:!1,onload:function(e){var t=JSON.parse(e);if(t.error)throw new Error(t.error);return t},onerror:function(e){var t=JSON.parse(e);return console.error("FilePond error:",t),o.setGeneralServiceNotification("Error",e),t.error||"Upload failed"}}});function C(){console.log("FilePond has initialized")}function _(e,t){e?console.log("FilePond processed file error:",e):c("reloadImage")}return function(t,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",p,[(0,n.createElementVNode)("div",h,[(0,n.createElementVNode)("h2",m,(0,n.toDisplayString)(e.name),1),(0,n.createElementVNode)("ul",y,[(0,n.createElementVNode)("li",null,[(0,n.createTextVNode)("Max File Size: "),(0,n.createElementVNode)("span",g,(0,n.toDisplayString)(E.value),1)]),(0,n.createElementVNode)("li",null,[(0,n.createTextVNode)("File Types accepted: "),(0,n.createElementVNode)("span",v,(0,n.toDisplayString)(S.value),1)])]),(0,n.createElementVNode)("div",w,[(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"checkbox",id:"removeExif","onUpdate:modelValue":r[0]||(r[0]=function(e){return x.value=e}),class:"checkbox checkbox-md"},null,512),[[n.vModelCheckbox,x.value]]),b]),(0,n.createVNode)((0,n.unref)(u),{name:"image",ref:"pond","class-name":"my-pond","allow-multiple":"false","label-idle":"Click to choose file, or drag here...",server:N.value,"accepted-file-types":"image/jpeg, image/png",onInit:C,onProcessfile:_,"max-file-size":E.value,allowRemove:"false",allowRevert:"false"},null,8,["server","max-file-size"])])])}}};var E=r(93379),S=r.n(E),k=r(38967),N={insert:"head",singleton:!1};S()(k.Z,N);k.Z.locals;const C=(0,r(83744).Z)(x,[["__scopeId","data-v-010175d3"]])},30131:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(70821),o=r(87879),i={key:0},a=(0,n.createElementVNode)("div",{class:"font-medium text-red-600"}," Whoops! Something went wrong. ",-1),s={class:"mt-3 list-disc list-inside text-sm text-red-600"};const c={__name:"ValidationErrors",setup:function(e){var t=(0,n.computed)((function(){return(0,o.qt)().props.errors})),r=(0,n.computed)((function(){return Object.keys(t.value).length>0}));return function(e,o){return r.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",i,[a,(0,n.createElementVNode)("ul",s,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(t.value,(function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("li",{key:t},(0,n.toDisplayString)(e),1)})),128))])])):(0,n.createCommentVNode)("",!0)}}}},34138:(e,t,r)=>{r.r(t),r.d(t,{default:()=>J});var n=r(70821),o=r(24831),i=r(58358),a=r(55398),s=r(30131),c=r(59369),l=(r(24932),r(19204)),u={class:"flex flex-row justify-between mt-6"},d=(0,n.createElementVNode)("h2",{class:"text-xl font-semibold leading-tight"}," Edit News Post ",-1),f={class:"flex justify-end space-x-2"},p={class:""},h=["disabled"];const m={__name:"NewsEditHeader",props:{can:Object},setup:function(e){var t=(0,i.useAppSettingStore)(),r=(0,a.useNewsStore)();return function(o,i){return(0,n.openBlock)(),(0,n.createElementBlock)("div",u,[d,(0,n.createElementVNode)("div",f,[(0,n.createElementVNode)("div",null,[e.can.viewNewsroom?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,onClick:i[0]||(i[0]=function(e){return(0,n.unref)(t).btnRedirect("/newsroom")}),class:"px-4 py-2 text-white bg-yellow-600 hover:bg-yellow-500 rounded-lg disabled:bg-gray-400"},"Newsroom ")):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",p,[(0,n.createElementVNode)("button",{onClick:i[1]||(i[1]=(0,n.withModifiers)((function(){var e;return(0,n.unref)(r).submit&&(e=(0,n.unref)(r)).submit.apply(e,arguments)}),["prevent"])),class:(0,n.normalizeClass)(["text-white bg-blue-700 hover:bg-blue-500 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5",{"opacity-25":(0,n.unref)(r).processing}]),disabled:(0,n.unref)(r).processing}," Save ",10,h)]),(0,n.createElementVNode)("div",null,[(0,n.createVNode)(l.Z)])])])}}};var y=r(83004);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function v(){v=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof w?t:w,a=Object.create(i.prototype),s=new j(n||[]);return o(a,"_invoke",{value:L(e,r,s)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function w(){}function b(){}function x(){}var E={};l(E,a,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(D([])));k&&k!==r&&n.call(k,a)&&(E=k);var N=x.prototype=w.prototype=Object.create(E);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(o,i,a,s){var c=d(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==g(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function L(t,r,n){var o=f;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=P(s,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(t,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(g(t)+" is not iterable")}return b.prototype=x,o(N,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=l(x,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l(e,c,"GeneratorFunction")),e.prototype=Object.create(N),e},t.awrap=function(e){return{__await:e}},C(_.prototype),l(_.prototype,s,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(N),l(N,c,"Generator"),l(N,a,(function(){return this})),l(N,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function w(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){w(i,n,o,a,s,"next",e)}function s(e){w(i,n,o,a,s,"throw",e)}a(void 0)}))}}var x={key:0};const E={__name:"NewsRestoreCachedContent",setup:function(e){var t=(0,n.defineAsyncComponent)({loader:function(){return Promise.all([r.e(8898),r.e(1041)]).then(r.bind(r,51041))},loadingComponent:{template:"<p>Loading...</p>"},errorComponent:{template:"<p>Error loading component</p>"}}),o=(0,a.useNewsStore)(),i=(0,y.useNotificationStore)();return(0,n.watch)((function(){return i.confirmation}),(function(e){null!==e&&(e&&o.initializeNewsStore(o.cachedContent),i.clearConfirmNotification(),o.showEditor=!0)})),(0,n.onMounted)(b(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.clearConfirmNotification(),o.cachedContent?i.setConfirmNotification("Confirmation Needed","You have unsaved changes from your previous session. Do you want to load them?"):o.showEditor=!0;case 2:case"end":return e.stop()}}),e)})))),function(e,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.unref)(o).showEditor?((0,n.openBlock)(),(0,n.createElementBlock)("div",x,[(0,n.createVNode)((0,n.unref)(t))])):(0,n.createCommentVNode)("",!0)])}}};var S=r(63974),k=r(25543);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function C(){C=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new j(n||[]);return o(a,"_invoke",{value:L(e,r,s)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function g(){}function v(){}function w(){}var b={};l(b,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(D([])));E&&E!==r&&n.call(E,a)&&(b=E);var S=w.prototype=g.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(o,i,a,s){var c=d(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==N(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function L(t,r,n){var o=f;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=P(s,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(t,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(N(t)+" is not iterable")}return v.prototype=w,o(S,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:v,configurable:!0}),v.displayName=l(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(_.prototype),l(_.prototype,s,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(S),l(S,c,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function _(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var L={class:"w-full flex justify-between gap-2"};const P={__name:"ChangeNewsImage",setup:function(e){var t=(0,a.useNewsStore)(),r=(0,y.useNotificationStore)(),o=function(e){console.log(e),t.image=e},i=function(){var e,n=(e=C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.post("/api/remove-image",{modelId:t.id,modelType:"newsStory",imageId:t.image.id});case 3:t.image=null,r.setToastNotification("Image removed.","info"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error removing image:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){_(i,n,o,a,s,"next",e)}function s(e){_(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();return function(e,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createElementVNode)("div",L,[(0,n.createVNode)(k.Z,{image:(0,n.unref)(t).image,alt:"image",class:(0,n.normalizeClass)("skeleton max-w-20 max-h-20 object-contain")},null,8,["image"]),(0,n.unref)(t).image?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,onClick:i,class:"btn btn-danger mt-2"},"Remove Image")):(0,n.createCommentVNode)("",!0)]),((0,n.openBlock)(),(0,n.createBlock)(S.Z,{image:(0,n.unref)(t).image,modelType:"newsStory",modelId:"".concat((0,n.unref)(t).id),name:"Upload News Image",maxSize:"30MB",fileTypes:"image/jpg, image/jpeg, image/png",onImageUploaded:o,key:(0,n.unref)(t).image},null,8,["image","modelId"]))])}}};var T=function(e){return(0,n.pushScopeId)("data-v-6493ea3a"),e=e(),(0,n.popScopeId)(),e},I={class:"place-self-center flex flex-col gap-y-3"},j={key:0,class:"bg-white text-black dark:bg-gray-800 dark:text-gray-50 p-5 mb-10"},D=[T((function(){return(0,n.createElementVNode)("span",{class:"loading loading-spinner text-info"},null,-1)})),T((function(){return(0,n.createElementVNode)("span",{class:"ml-4"},"Loading... please wait.",-1)}))],V={key:1,id:"topDiv",class:"bg-white text-black dark:bg-gray-800 dark:text-gray-50 p-5 mb-10"},O={class:"p-6 border-b border-gray-200"},F={class:"flex flex-wrap justify-between gap-3"},B={class:"py-4 px-6 mb-6 bg-white shadow rounded-lg"},A={class:"flex justify-end items-center"},G={key:0,class:"save-message text-xs mr-2 text-green-500"},M=["disabled"];const z={__name:"Edit",props:{newsStory:Object,cachedContent:Object,can:Object,errors:Object},setup:function(e){var t=(0,n.defineAsyncComponent)({loader:function(){return r.e(7697).then(r.bind(r,37697))},loadingComponent:{template:"<p>Loading...</p>"},errorComponent:{template:"<p>Error loading component</p>"}}),l=(0,n.defineAsyncComponent)({loader:function(){return r.e(9735).then(r.bind(r,9735))},loadingComponent:{template:"<p>Loading...</p>"},errorComponent:{template:"<p>Error loading component</p>"}});(0,o.U)("newsEdit");var u=(0,i.useAppSettingStore)(),d=(0,a.useNewsStore)(),f=e;return d.errors=f.errors,(0,n.onMounted)((function(){d.initializeNewsStore(f.newsStory),f.cachedContent&&(d.cachedContent=f.cachedContent),d.isLoading=!1})),(0,n.onUnmounted)((function(){d.reset()})),function(r,o){var i=(0,n.resolveComponent)("Head");return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[(0,n.createVNode)(i,{title:"Edit News Post"}),(0,n.createElementVNode)("div",I,[(0,n.unref)(d).isLoading?((0,n.openBlock)(),(0,n.createElementBlock)("div",j,D)):((0,n.openBlock)(),(0,n.createElementBlock)("div",V,[(0,n.unref)(u).showFlashMessage?((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(c.Z),{key:0,flash:r.$page.props.flash},null,8,["flash"])):(0,n.createCommentVNode)("",!0),(0,n.createVNode)((0,n.unref)(s.Z),{class:"ml-4"}),(0,n.createVNode)(m,{can:e.can},null,8,["can"]),(0,n.createElementVNode)("div",O,[(0,n.createElementVNode)("div",F,[(0,n.createVNode)((0,n.unref)(l),{can:e.can,class:"flex-grow"},null,8,["can"]),(0,n.createVNode)(P)]),(0,n.createVNode)((0,n.unref)(t)),(0,n.createElementVNode)("div",B,[(0,n.createVNode)(E),(0,n.createElementVNode)("div",A,[(0,n.createVNode)(n.Transition,{name:"fade"},{default:(0,n.withCtx)((function(){return[(0,n.unref)(d).showSaveMessage?((0,n.openBlock)(),(0,n.createElementBlock)("div",G," Content cached ")):(0,n.createCommentVNode)("",!0)]})),_:1}),(0,n.createElementVNode)("button",{onClick:o[0]||(o[0]=function(){var e;return(0,n.unref)(d).submit&&(e=(0,n.unref)(d)).submit.apply(e,arguments)}),class:(0,n.normalizeClass)(["text-white bg-blue-700 hover:bg-blue-500 focus:outline-none font-medium rounded-lg text-sm px-5 py-2",{"opacity-25":(0,n.unref)(d).processing}]),disabled:(0,n.unref)(d).processing}," Save ",10,M),(0,n.createVNode)((0,n.unref)(s.Z),{class:"ml-4"})])])])]))])],64)}}};var R=r(93379),U=r.n(R),Z=r(14607),Y={insert:"head",singleton:!1};U()(Z.Z,Y);Z.Z.locals;const J=(0,r(83744).Z)(z,[["__scopeId","data-v-6493ea3a"]])}}]);
//# sourceMappingURL=4138.js.map