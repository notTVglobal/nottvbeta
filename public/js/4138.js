/*! For license information please see 4138.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4138,5398],{55398:(e,t,r)=>{r.r(t),r.d(t,{useNewsStore:()=>f});var n=r(69876),o=r(87879),i=r(83004);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(){c=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var i=t&&t.prototype instanceof w?t:w,a=Object.create(i.prototype),c=new V(n||[]);return o(a,"_invoke",{value:_(e,r,c)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var h="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var E={};f(E,s,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(D([])));k&&k!==r&&n.call(k,s)&&(E=k);var N=x.prototype=w.prototype=Object.create(E);function L(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,c,s){var l=d(e[o],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==a(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function _(t,r,n){var o=h;return function(i,a){if(o===m)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var l=d(t,r,n);if("normal"===l.type){if(o=n.done?v:y,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function V(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(a(t)+" is not iterable")}return b.prototype=x,o(N,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,u,"GeneratorFunction")),e.prototype=Object.create(N),e},t.awrap=function(e){return{__await:e}},L(C.prototype),f(C.prototype,l,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new C(p(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},L(N),f(N,u,"Generator"),f(N,s,(function(){return this})),f(N,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,V.prototype={constructor:V,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function s(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,c,"next",e)}function c(e){s(i,n,o,a,c,"throw",e)}a(void 0)}))}}var u=function(){return{id:null,slug:"",title:"",content:"",newsPerson:[],category:{},subCategory:{},city:{},province:{},federalElectoralDistrict:{},subnationalElectoralDistrict:{},country:[],image:{},status:[],video:{},created_at:"",published_at:"",cachedContent:{},categories:[],subCategories:[],type:"",displayText:"",newsPersons:[],citySearchItems:[],showEditor:!1,showNewsPersonSelector:!1,showCategoryCitySelector:!1,citySelectDropdownVisible:!1,showSaveMessage:!1,focusedIndex:0,searchQuery:"",filters:[],search:"",errors:[],newsStoryStatuses:{},newsStoryId:"",isLoadingCategoryCityData:!1,isLoading:!0,processing:!1}},f=(0,n.Q_)("newsStore",{state:u,actions:{reset:function(){Object.assign(this,{id:null,slug:"",title:"",content:"",newsPerson:[],category:{},subCategory:{},city:{},province:{},federalElectoralDistrict:{},subnationalElectoralDistrict:{},country:[],image:{},status:[],video:{},created_at:"",published_at:"",cachedContent:{},categories:[],subCategories:[],type:"",displayText:"",newsPersons:[],citySearchItems:[],showEditor:!1,showNewsPersonSelector:!1,showCategoryCitySelector:!1,citySelectDropdownVisible:!1,showSaveMessage:!1,focusedIndex:0,searchQuery:"",filters:[],search:"",errors:[],newsStoryStatuses:{},newsStoryId:"",isLoadingCategoryCityData:!1,isLoading:!0,processing:!1})},initializeNewsStore:function(e){this.id=e.id,this.slug=e.slug,this.title=e.title,this.status=e.status,this.content=e.content,this.newsPerson=e.newsPerson,this.category=e.category,this.subCategory=e.subCategory,this.city=e.city,this.province=e.province,this.federalElectoralDistrict=e.federalElectoralDistrict,this.subnationalElectoralDistrict=e.subnationalElectoralDistrict,this.image=e.image,this.video=e.video,this.created_at=e.created_at,this.published_at=e.published_at,this.cachedContent=e.cachedContent},toggleCategoryCitySelector:function(){this.showCategoryCitySelector=!this.showCategoryCitySelector},toggleNewsPersonSelector:function(){this.showNewsPersonSelector=!this.showNewsPersonSelector},setSelectedCategory:function(){var e=this,t=this.categories.find((function(t){return t.id===e.news_category_id}));this.selectedCategory=t||null,this.news_category_sub_id,3===this.news_category_id?this.setSelectedLocation():this.resetLocationIds()},fetchCategories:function(){var e=this;return l(c().mark((function t(){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoadingCityData=!0,t.prev=1,t.next=4,fetch("/api/news/categories");case 4:if(!(r=t.sent).ok){t.next=11;break}return t.next=8,r.json();case 8:e.categories=t.sent,t.next=12;break;case 11:console.error("Failed to fetch categories:",r.statusText);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),console.error("Error fetching categories:",t.t0);case 17:return t.prev=17,e.isLoadingCityData=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,14,17,20]])})))()},fetchCitiesForSearch:function(){var e=this;return l(c().mark((function t(){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/news/cities");case 3:if(!(r=t.sent).ok){t.next=10;break}return t.next=7,r.json();case 7:e.citySearchItems=t.sent,t.next=11;break;case 10:console.error("Failed to fetch locations:",r.statusText);case 11:e.isLoadingCityData=!1,t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),console.error("Error fetching locations:",t.t0),e.isLoadingCityData=!1;case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))()},setSelectedLocation:function(){var e=this;this.city={},this.province={},this.federalElectoralDistrict={},this.subnationalElectoralDistrict={};var t=null;if(this.city.id?t=this.citySearchItems.find((function(t){return t.id===e.city.id&&("city"===t.type||"town"===t.type)})):this.province.id?t=this.citySearchItems.find((function(t){return t.id===e.province.id&&"province"===t.type})):this.federalElectoralDistrict.id?t=this.citySearchItems.find((function(t){return t.id===e.federalElectoralDistrict.id&&"federalElectoralDistrict"===t.type})):this.subnationalElectoralDistrict.id&&(t=this.citySearchItems.find((function(t){return t.id===e.subnationalElectoralDistrict.id&&"subnationalElectoralDistrict"===t.type}))),t)switch(t.type){case"city":case"town":this.city={id:t.id,name:t.name,type:t.type},this.province={id:t.province.id,name:t.province.name},this.displayText="".concat(t.name,", ").concat(t.province.name);break;case"province":this.province={id:t.id,name:t.name,type:t.type},this.displayText=t.name;break;case"federalElectoralDistrict":this.federalElectoralDistrict={id:t.id,name:t.name,type:t.type},this.displayText=t.name;break;case"subnationalElectoralDistrict":this.subnationalElectoralDistrict={id:t.id,name:t.name,type:t.type},this.displayText=t.name;break;default:this.displayText=""}else this.displayText=""},fetchCitiesAndCategories:function(){var e=this;return l(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchCitiesForSearch();case 2:e.setSelectedLocation();case 3:case"end":return t.stop()}}),t)})))()},updateSelectedLocation:function(e){if(!e)return this.city={},this.province={},this.federalElectoralDistrict={},this.subnationalElectoralDistrict={},void(this.displayText="");switch(this.selectedLocation=e,this.displayText=this.getDisplayTextForType(e.type),this.city={},this.province={},this.federalElectoralDistrict={},this.subnationalElectoralDistrict={},this.displayText=this.getDisplayTextForType(e.type),e.type){case"city":case"town":this.city={id:e.id,name:e.name,province:e.province},this.province={id:e.province.id,name:e.province.name},this.displayText="".concat(e.name,", ").concat(e.province.name);break;case"province":case"territory":this.province={id:e.id,name:e.name,type:e.type},this.displayText=e.name;break;case"federalElectoralDistrict":this.federalElectoralDistrict={id:e.id,name:e.name,type:e.type},this.displayText=e.name;break;case"subnationalElectoralDistrict":this.subnationalElectoralDistrict={id:e.id,name:e.name,type:e.type},this.displayText=e.name;break;default:this.displayText=""}},getDisplayTextForType:function(e){switch(e){case"city":return this.type="city","City";case"town":return this.type="town","Town";case"province":return this.type="province","Province";case"territory":return this.type="territory","Territory";case"federalElectoralDistrict":return this.type="federalElectoralDistrict","Federal Electoral District";case"subnationalElectoralDistrict":return this.type="subnationalElectoralDistrict","Subnational Electoral District";default:return""}},setSearchInput:function(e){this.search=e},resetLocationIds:function(e){if(this.city_id=null,this.province_id=null,this.federal_electoral_district_id=null,this.subnational_electoral_district_id=null,e)switch(e.type){case"city":this.city_id=e.city_id,this.province_id=e.province_id;break;case"province":case"territory":this.province_id=e.province_id;break;case"federalElectoralDistrict":this.federal_electoral_district_id=e.federal_electoral_district_id;break;case"subnationalElectoralDistrict":this.subnational_electoral_district_id=e.subnational_electoral_district_id}},updateSearch:function(e){this.search=e},fetchNewsPersons:function(){var e=this;return l(c().mark((function t(){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("get news persons"),t.prev=1,t.next=4,fetch("/api/news/persons");case 4:return r=t.sent,t.next=7,r.json();case 7:e.newsPersons=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.error("Failed to fetch news persons:",t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},setNewsPerson:function(e){this.newsPerson=e},submit:function(){var e=this;return l(c().mark((function t(){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.processing=!0,r={id:e.id,title:e.title,status:e.status.id,content:e.content,news_category_id:e.category.id,news_category_sub_id:e.subCategory.id,city_id:e.city.id,province_id:e.province.id,federal_electoral_district_id:e.federalElectoralDistrict.id,subnational_electoral_district_id:e.subnationalElectoralDistrict.id,type:e.type,news_person_id:e.newsPerson.id},t.prev=2,!e.id){t.next=8;break}return t.next=6,o.Nd.patch(route("newsStory.update",e.slug),r,{onError:function(t){e.errors=t,e.processing=!1},onSuccess:function(){e.processing=!1}});case 6:t.next=10;break;case 8:return t.next=10,o.Nd.post(route("newsStory.store"),r,{onError:function(t){e.errors=t,e.processing=!1},onSuccess:function(){e.processing=!1}});case 10:t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),console.error("An unexpected error occurred:",t.t0),e.processing=!1;case 16:case"end":return t.stop()}}),t,null,[[2,12]])})))()},publish:function(e){var t=this;return l(c().mark((function r(){return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.Nd.patch(route("newsroom.publish",e),{onError:function(e){t.errors=e,t.processing=!1,notificationStore.setToastNotification(e,"error")},onSuccess:function(){t.processing=!1,(0,i.useNotificationStore)().setToastNotification("News story published successfully.","success")}});case 2:case"end":return r.stop()}}),r)})))()},changeNewsStoryStatus:function(e){document.getElementById("newsStoryStatusChangeModal").close(),o.Nd.patch(route("news.story.changeStatus"),{newsStory_id:this.newsStoryId,new_status_id:e},{onError:function(e){console.error("Error changing status:",e)}})}},getters:{filteredCitySearchItems:function(e){return e.search?e.citySearchItems.filter((function(t){return t.name.toLowerCase().includes(e.search.toLowerCase())})):e.citySearchItems},searchInput:function(e){return e.city.id?"".concat(e.city.name,", ").concat(e.province.name):e.province.id?e.province.name:e.federalElectoralDistrict.id?e.federalElectoralDistrict.name:e.subnationalElectoralDistrict.id?e.subnationalElectoralDistrict.name:e.search},locationType:function(e){if(!e.selectedLocation)return e.type="",e.displayText="","location type is not set";switch(e.selectedLocation.type){case"city":e.type="city",e.displayText="City";break;case"town":e.type="town",e.displayText="Town";break;case"province":e.displayText="Province",e.type="province";break;case"territory":e.displayText="Territory",e.type="territory";break;case"federalElectoralDistrict":e.displayText="Federal Electoral District",e.type="federalElectoralDistrict";break;case"subnationalElectoralDistrict":e.displayText="Subnational Electoral District",e.type="subnationalElectoralDistrict";break;default:e.displayText=""}return"location type is set"}}})},24831:(e,t,r)=>{r.d(t,{U:()=>s});var n=r(70821),o=r(90771),i=r(58358),a=r(40191),c=r(87879);function s(e){var t=(0,o.useUserStore)(),r=(0,i.useAppSettingStore)(),s=(0,a.useVideoPlayerStore)();r.currentPage=e,r.showFlashMessage=!0,r.pageIsHidden=!1,t.isMobile||window.innerWidth<1024||r.fullPage?r.ott=0:(0===r.ott&&(r.ott=4),r.showOttButtons=!0),s.makeVideoTopRight(),r.pageReload&&(r.pageReload=!1,r.pageWasReloaded=!0,window.location.reload()),c.Nd.on("navigate",(function(e){t.isMobile||window.innerWidth<1024||r.fullPage?r.ott=0:0===r.ott&&(r.ott=4),""!==window.location.search&&!r.shouldScrollToTop||requestAnimationFrame((function(){var e=document.getElementById("topDiv");e?e.scrollIntoView({behavior:"auto"}):window.scrollTo(0,0)})),r.shouldScrollToTop=!1})),r.setPrevUrl(),r.showOttButtons=!0,r.noLayout=!1,(0,n.watch)((function(){return r.isSmallScreen}),(function(e){r.ott=e?0:4}),{immediate:!0})}},14607:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(94015),o=r.n(n),i=r(23645),a=r.n(i)()(o());a.push([e.id,".fade-enter-active[data-v-6493ea3a],.fade-leave-active[data-v-6493ea3a]{transition:opacity .5s}.fade-enter[data-v-6493ea3a],.fade-leave-to[data-v-6493ea3a]{opacity:0}","",{version:3,sources:["webpack://./resources/js/Pages/News/Stories/{$id}/Edit.vue"],names:[],mappings:"AAsGA,wEACE,sBACF,CAEA,6DACE,SACF",sourcesContent:['<template>\n\n  <Head title="Edit News Post"/>\n\n  <div class="place-self-center flex flex-col gap-y-3">\n    <div v-if="newsStore.isLoading" class="bg-white text-black dark:bg-gray-800 dark:text-gray-50 p-5 mb-10">\n      <span class="loading loading-spinner text-info"></span>\n      <span class="ml-4">Loading... please wait.</span>\n      </div>\n    <div v-else id="topDiv" class="bg-white text-black dark:bg-gray-800 dark:text-gray-50 p-5 mb-10">\n\n      <Message v-if="appSettingStore.showFlashMessage" :flash="$page.props.flash"/>\n      <JetValidationErrors class="ml-4"/>\n\n      <NewsEditHeader :can="can" />\n\n      <div class="p-6 border-b border-gray-200">\n\n        <div class="flex flex-wrap justify-between gap-3">\n          <NewsSelectPersonContainer :can="can" class="flex-grow"/>\n          <ChangeNewsImage />\n        </div>\n\n        <NewsCategoryCityContainer />\n\n        <div class="py-4 px-6 mb-6 bg-white shadow rounded-lg">\n\n          \x3c!-- Prompt the user to restore cached content --\x3e\n          \x3c!-- TipTapNewsEditor is inside here, in NewsEditComponent --\x3e\n          <NewsRestoreCachedContent />\n\n          <div class="flex justify-end items-center">\n            <transition name="fade">\n              <div v-if="newsStore.showSaveMessage" class="save-message text-xs mr-2 text-green-500">\n                Content cached\n              </div>\n            </transition>\n            <button\n                @click="newsStore.submit"\n                class="text-white bg-blue-700 hover:bg-blue-500 focus:outline-none font-medium rounded-lg text-sm px-5 py-2"\n                :disabled="newsStore.processing"\n                :class="{ \'opacity-25\': newsStore.processing }"\n            >\n              Save\n            </button>\n            <JetValidationErrors class="ml-4"/>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { defineAsyncComponent, onMounted, onUnmounted } from \'vue\'\nimport { usePageSetup } from \'@/Utilities/PageSetup\'\nimport { useAppSettingStore } from \'@/Stores/AppSettingStore\'\nimport { useNewsStore } from \'@/Stores/NewsStore\'\nimport JetValidationErrors from \'@/Jetstream/ValidationErrors\'\nimport Message from \'@/Components/Global/Modals/Messages\'\nimport \'vue-select/dist/vue-select.css\';\nimport NewsEditHeader from \'@/Components/Pages/News/NewsEditHeader.vue\'\nimport NewsRestoreCachedContent from \'@/Components/Pages/News/NewsRestoreCachedContent.vue\'\nimport ChangeNewsImage from \'@/Components/Pages/News/ChangeNewsImage.vue\'\nconst NewsCategoryCityContainer = defineAsyncComponent({\n  loader: () => import(\'@/Components/Pages/News/NewsCategoryCityContainer.vue\'),\n  loadingComponent: { template: \'<p>Loading...</p>\' },\n  errorComponent: { template: \'<p>Error loading component</p>\' },\n})\nconst NewsSelectPersonContainer = defineAsyncComponent({\n  loader: () => import(\'@/Components/Pages/News/NewsSelectPersonContainer.vue\'),\n  loadingComponent: { template: \'<p>Loading...</p>\' },\n  errorComponent: { template: \'<p>Error loading component</p>\' },\n})\n\nusePageSetup(\'newsEdit\')\n\nconst appSettingStore = useAppSettingStore()\nconst newsStore = useNewsStore()\n\nconst props = defineProps({\n  newsStory: Object,\n  cachedContent: Object,\n  can: Object,\n  errors: Object,\n})\n\nnewsStore.errors = props.errors; // This will contain the error messages\n\nonMounted(() => {\n  newsStore.initializeNewsStore(props.newsStory)\n  if (props.cachedContent) {\n    newsStore.cachedContent = props.cachedContent\n  }\n  newsStore.isLoading = false\n})\n\nonUnmounted(() => {\n  newsStore.reset();\n})\n<\/script>\n<style scoped>\n.fade-enter-active, .fade-leave-active {\n  transition: opacity 0.5s;\n}\n\n.fade-enter, .fade-leave-to {\n  opacity: 0;\n}\n</style>'],sourceRoot:""}]);const c=a},19204:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(70821),o=r(87879),i=r(58358),a=r(90771);const c={__name:"CancelButton",props:{url:String},setup:function(e){var t=(0,i.useAppSettingStore)(),r=(0,a.useUserStore)(),c=e;function s(){if(t.prevUrl)c.url?o.Nd.visit(c.url):o.Nd.visit(t.prevUrl);else if(c.url)o.Nd.visit(c.url);else{var e=r.isCreator?"/dashboard":"/";o.Nd.visit(e)}}return function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createElementVNode)("button",{onClick:(0,n.withModifiers)(s,["prevent"]),class:"ml-2 px-4 py-2 text-white bg-orange-600 hover:bg-orange-500 rounded-lg"},"Cancel ")])}}}},59369:(e,t,r)=>{r.d(t,{Z:()=>g});var n=r(70821),o=r(87879),i=r(58358);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(){c=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var i=t&&t.prototype instanceof w?t:w,a=Object.create(i.prototype),c=new V(n||[]);return o(a,"_invoke",{value:_(e,r,c)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var h="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var E={};f(E,s,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(D([])));k&&k!==r&&n.call(k,s)&&(E=k);var N=x.prototype=w.prototype=Object.create(E);function L(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,c,s){var l=d(e[o],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==a(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function _(t,r,n){var o=h;return function(i,a){if(o===m)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var l=d(t,r,n);if("normal"===l.type){if(o=n.done?v:y,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function V(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(a(t)+" is not iterable")}return b.prototype=x,o(N,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,u,"GeneratorFunction")),e.prototype=Object.create(N),e},t.awrap=function(e){return{__await:e}},L(C.prototype),f(C.prototype,l,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new C(p(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},L(N),f(N,u,"Generator"),f(N,s,(function(){return this})),f(N,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,V.prototype={constructor:V,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function s(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var l={class:"mx-4 my-4"},u={key:0,class:"alert alert-info mt-4"},f=(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"stroke-current shrink-0 w-6 h-6"},[(0,n.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),p={key:1,class:"alert alert-success mt-4 mx-3"},d=(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[(0,n.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),h={key:2,class:"alert alert-warning mt-4 mx-3"},y=(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[(0,n.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),m={key:3,class:"alert alert-error mt-4 mx-3"},v=(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[(0,n.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1);const g={__name:"Messages",props:{flash:Object},setup:function(e){(0,i.useAppSettingStore)().showFlashMessage=!0;var t=e,r=((0,n.computed)((function(){return{"text-green-700 bg-green-100 dark:bg-green-200 dark:text-green-800":t.flash.success,"text-blue-700 bg-blue-100 dark:bg-blue-200 dark:text-blue-800":t.flash.message,"text-orange-700 bg-orange-100 dark:bg-orange-200 dark:text-orange-800":t.flash.warning,"text-red-700 bg-red-100 dark:bg-red-200 dark:text-red-800":t.flash.error}})),function(){var e,t=(e=c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Nd.post(route("flash.clear"));case 2:o.Nd.reload();case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,c,"next",e)}function c(e){s(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}());return function(e,o){return(0,n.openBlock)(),(0,n.createElementBlock)("div",l,[(0,n.unref)(t).flash.message?((0,n.openBlock)(),(0,n.createElementBlock)("div",u,[f,(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(t).flash.message),1),(0,n.createElementVNode)("button",{class:"text-xs ml-12",onClick:r}," Close")])):(0,n.createCommentVNode)("",!0),(0,n.unref)(t).flash.success?((0,n.openBlock)(),(0,n.createElementBlock)("div",p,[d,(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(t).flash.success),1),(0,n.createElementVNode)("button",{class:"text-xs ml-12",onClick:r}," Close")])):(0,n.createCommentVNode)("",!0),(0,n.unref)(t).flash.warning?((0,n.openBlock)(),(0,n.createElementBlock)("div",h,[y,(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(t).flash.warning),1),(0,n.createElementVNode)("button",{class:"text-xs ml-12",onClick:r}," Close")])):(0,n.createCommentVNode)("",!0),(0,n.unref)(t).flash.error?((0,n.openBlock)(),(0,n.createElementBlock)("div",m,[v,(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(t).flash.error),1),(0,n.createElementVNode)("button",{class:"text-xs ml-12",onClick:r}," Close")])):(0,n.createCommentVNode)("",!0)])}}}},96786:(e,t,r)=>{r.d(t,{Z:()=>w});var n=r(70821),o=r(83004),i=r(61658),a=r.n(i),c=r(90521),s=r.n(c),l=r(18236),u=r.n(l),f=r(72965),p=r.n(f),d=(r(62869),r(61712),{class:""}),h={class:"max-full mx-auto mt-2 mb-6 bg-gray-200 p-6 text-black"},y={class:"text-xl font-semibold"},m={class:"pb-4"},v={class:"text-orange-400"},g={class:"text-orange-400"};const w={__name:"ImageUpload",props:{image:Object,name:String,metadataKey:String,metadataValue:String,modelType:String,modelId:String,maxSize:String,fileTypes:String},emits:["reloadImage","imageUploaded"],setup:function(e,t){var r=t.emit,i=((0,o.useNotificationStore)(),e),c=r,l=a()(s(),u(),p()),f=((0,n.ref)([{source:"cat.jpeg",options:{type:"local"}}]),(0,n.ref)("30MB")),w=(0,n.ref)(["image/png","image/jpeg"]),b=(0,n.ref)({process:{url:"/upload?modelType=".concat(i.modelType,"&modelId=").concat(i.modelId),method:"POST",withCredentials:!1,headers:{},onload:function(e){return e.key},onerror:function(e){return e.data}}});function x(){console.log("Filepond is ready!")}function E(e,t){if(e)return console.log("Filepond processed file"),console.log(e),void console.log(t);c("reloadImage")}return function(t,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",d,[(0,n.createElementVNode)("div",h,[(0,n.createElementVNode)("h2",y,(0,n.toDisplayString)(e.name),1),(0,n.createElementVNode)("ul",m,[(0,n.createElementVNode)("li",null,[(0,n.createTextVNode)("Max File Size: "),(0,n.createElementVNode)("span",v,(0,n.toDisplayString)(f.value),1)]),(0,n.createElementVNode)("li",null,[(0,n.createTextVNode)("File Types accepted: "),(0,n.createElementVNode)("span",g,(0,n.toDisplayString)(w.value),1)])]),(0,n.createVNode)((0,n.unref)(l),{name:"image",ref:"pond","label-idle":"Click to choose file, or drag here...",server:b.value,onInit:x,"accepted-file-types":w.value,onProcessfile:E,"max-file-size":f.value},null,8,["server","accepted-file-types","max-file-size"])])])}}}},30131:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(70821),o=r(87879),i={key:0},a=(0,n.createElementVNode)("div",{class:"font-medium text-red-600"}," Whoops! Something went wrong. ",-1),c={class:"mt-3 list-disc list-inside text-sm text-red-600"};const s={__name:"ValidationErrors",setup:function(e){var t=(0,n.computed)((function(){return(0,o.qt)().props.errors})),r=(0,n.computed)((function(){return Object.keys(t.value).length>0}));return function(e,o){return r.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",i,[a,(0,n.createElementVNode)("ul",c,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(t.value,(function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("li",{key:t},(0,n.toDisplayString)(e),1)})),128))])])):(0,n.createCommentVNode)("",!0)}}}},34138:(e,t,r)=>{r.r(t),r.d(t,{default:()=>H});var n=r(70821),o=r(24831),i=r(58358),a=r(55398),c=r(30131),s=r(59369),l=(r(24932),r(19204)),u={class:"flex flex-row justify-between mt-6"},f=(0,n.createElementVNode)("h2",{class:"text-xl font-semibold leading-tight"}," Edit News Post ",-1),p={class:"flex justify-end space-x-2"},d={class:""},h=["disabled"];const y={__name:"NewsEditHeader",props:{can:Object},setup:function(e){var t=(0,i.useAppSettingStore)(),r=(0,a.useNewsStore)();return function(o,i){return(0,n.openBlock)(),(0,n.createElementBlock)("div",u,[f,(0,n.createElementVNode)("div",p,[(0,n.createElementVNode)("div",null,[e.can.viewNewsroom?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,onClick:i[0]||(i[0]=function(e){return(0,n.unref)(t).btnRedirect("/newsroom")}),class:"px-4 py-2 text-white bg-yellow-600 hover:bg-yellow-500 rounded-lg disabled:bg-gray-400"},"Newsroom ")):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",d,[(0,n.createElementVNode)("button",{onClick:i[1]||(i[1]=(0,n.withModifiers)((function(){var e;return(0,n.unref)(r).submit&&(e=(0,n.unref)(r)).submit.apply(e,arguments)}),["prevent"])),class:(0,n.normalizeClass)(["text-white bg-blue-700 hover:bg-blue-500 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5",{"opacity-25":(0,n.unref)(r).processing}]),disabled:(0,n.unref)(r).processing}," Save ",10,h)]),(0,n.createElementVNode)("div",null,[(0,n.createVNode)(l.Z)])])])}}};var m=r(83004);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(){g=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof w?t:w,a=Object.create(i.prototype),c=new V(n||[]);return o(a,"_invoke",{value:_(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function w(){}function b(){}function x(){}var E={};l(E,a,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(D([])));k&&k!==r&&n.call(k,a)&&(E=k);var N=x.prototype=w.prototype=Object.create(E);function L(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,a,c){var s=f(e[o],e,i);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==v(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function _(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:d,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function V(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(v(t)+" is not iterable")}return b.prototype=x,o(N,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=l(x,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l(e,s,"GeneratorFunction")),e.prototype=Object.create(N),e},t.awrap=function(e){return{__await:e}},L(C.prototype),l(C.prototype,c,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new C(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},L(N),l(N,s,"Generator"),l(N,a,(function(){return this})),l(N,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,V.prototype={constructor:V,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function w(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){w(i,n,o,a,c,"next",e)}function c(e){w(i,n,o,a,c,"throw",e)}a(void 0)}))}}var x={key:0};const E={__name:"NewsRestoreCachedContent",setup:function(e){var t=(0,n.defineAsyncComponent)({loader:function(){return Promise.all([r.e(8898),r.e(1041)]).then(r.bind(r,51041))},loadingComponent:{template:"<p>Loading...</p>"},errorComponent:{template:"<p>Error loading component</p>"}}),o=(0,a.useNewsStore)(),i=(0,m.useNotificationStore)();return(0,n.watch)((function(){return i.confirmation}),(function(e){null!==e&&(e&&o.initializeNewsStore(o.cachedContent),i.clearConfirmNotification(),o.showEditor=!0)})),(0,n.onMounted)(b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.cachedContent?i.setConfirmNotification("Confirmation Needed","You have unsaved changes from your previous session. Do you want to load them?"):o.showEditor=!0;case 1:case"end":return e.stop()}}),e)})))),function(e,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.unref)(o).showEditor?((0,n.openBlock)(),(0,n.createElementBlock)("div",x,[(0,n.createVNode)((0,n.unref)(t))])):(0,n.createCommentVNode)("",!0)])}}};var S=r(96786),k=r(25543);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function L(){L=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),c=new V(n||[]);return o(a,"_invoke",{value:_(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function g(){}function w(){}var b={};l(b,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(D([])));E&&E!==r&&n.call(E,a)&&(b=E);var S=w.prototype=v.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,a,c){var s=f(e[o],e,i);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==N(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function _(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:d,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function V(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(N(t)+" is not iterable")}return g.prototype=w,o(S,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=l(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(C.prototype),l(C.prototype,c,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new C(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(S),l(S,s,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,V.prototype={constructor:V,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function C(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var _={class:"w-full flex justify-between gap-2"};const j={__name:"ChangeNewsImage",setup:function(e){var t=(0,a.useNewsStore)(),r=(0,m.useNotificationStore)(),o=function(e){console.log(e),t.image=e},i=function(){var e,n=(e=L().mark((function e(){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.post("/api/remove-image",{modelId:t.id,modelType:"newsStory",imageId:t.image.id});case 3:t.image=null,r.setToastNotification("Image removed.","info"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error removing image:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){C(i,n,o,a,c,"next",e)}function c(e){C(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();return function(e,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createElementVNode)("div",_,[(0,n.createVNode)(k.Z,{image:(0,n.unref)(t).image,alt:"image",class:(0,n.normalizeClass)("skeleton max-w-20 max-h-20 object-contain")},null,8,["image"]),(0,n.unref)(t).image?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,onClick:i,class:"btn btn-danger mt-2"},"Remove Image")):(0,n.createCommentVNode)("",!0)]),((0,n.openBlock)(),(0,n.createBlock)(S.Z,{image:(0,n.unref)(t).image,modelType:"newsStory",modelId:"".concat((0,n.unref)(t).id),name:"Upload News Image",maxSize:"30MB",fileTypes:"image/jpg, image/jpeg, image/png",onImageUploaded:o,key:(0,n.unref)(t).image},null,8,["image","modelId"]))])}}};var T=function(e){return(0,n.pushScopeId)("data-v-6493ea3a"),e=e(),(0,n.popScopeId)(),e},P={class:"place-self-center flex flex-col gap-y-3"},V={key:0,class:"bg-white text-black dark:bg-gray-800 dark:text-gray-50 p-5 mb-10"},D=[T((function(){return(0,n.createElementVNode)("span",{class:"loading loading-spinner text-info"},null,-1)})),T((function(){return(0,n.createElementVNode)("span",{class:"ml-4"},"Loading... please wait.",-1)}))],O={key:1,id:"topDiv",class:"bg-white text-black dark:bg-gray-800 dark:text-gray-50 p-5 mb-10"},I={class:"p-6 border-b border-gray-200"},B={class:"flex flex-wrap justify-between gap-3"},F={class:"py-4 px-6 mb-6 bg-white shadow rounded-lg"},A={class:"flex justify-end items-center"},G={key:0,class:"save-message text-xs mr-2 text-green-500"},M=["disabled"];const z={__name:"Edit",props:{newsStory:Object,cachedContent:Object,can:Object,errors:Object},setup:function(e){var t=(0,n.defineAsyncComponent)({loader:function(){return r.e(7697).then(r.bind(r,37697))},loadingComponent:{template:"<p>Loading...</p>"},errorComponent:{template:"<p>Error loading component</p>"}}),l=(0,n.defineAsyncComponent)({loader:function(){return r.e(9735).then(r.bind(r,9735))},loadingComponent:{template:"<p>Loading...</p>"},errorComponent:{template:"<p>Error loading component</p>"}});(0,o.U)("newsEdit");var u=(0,i.useAppSettingStore)(),f=(0,a.useNewsStore)(),p=e;return f.errors=p.errors,(0,n.onMounted)((function(){f.initializeNewsStore(p.newsStory),p.cachedContent&&(f.cachedContent=p.cachedContent),f.isLoading=!1})),(0,n.onUnmounted)((function(){f.reset()})),function(r,o){var i=(0,n.resolveComponent)("Head");return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[(0,n.createVNode)(i,{title:"Edit News Post"}),(0,n.createElementVNode)("div",P,[(0,n.unref)(f).isLoading?((0,n.openBlock)(),(0,n.createElementBlock)("div",V,D)):((0,n.openBlock)(),(0,n.createElementBlock)("div",O,[(0,n.unref)(u).showFlashMessage?((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(s.Z),{key:0,flash:r.$page.props.flash},null,8,["flash"])):(0,n.createCommentVNode)("",!0),(0,n.createVNode)((0,n.unref)(c.Z),{class:"ml-4"}),(0,n.createVNode)(y,{can:e.can},null,8,["can"]),(0,n.createElementVNode)("div",I,[(0,n.createElementVNode)("div",B,[(0,n.createVNode)((0,n.unref)(l),{can:e.can,class:"flex-grow"},null,8,["can"]),(0,n.createVNode)(j)]),(0,n.createVNode)((0,n.unref)(t)),(0,n.createElementVNode)("div",F,[(0,n.createVNode)(E),(0,n.createElementVNode)("div",A,[(0,n.createVNode)(n.Transition,{name:"fade"},{default:(0,n.withCtx)((function(){return[(0,n.unref)(f).showSaveMessage?((0,n.openBlock)(),(0,n.createElementBlock)("div",G," Content cached ")):(0,n.createCommentVNode)("",!0)]})),_:1}),(0,n.createElementVNode)("button",{onClick:o[0]||(o[0]=function(){var e;return(0,n.unref)(f).submit&&(e=(0,n.unref)(f)).submit.apply(e,arguments)}),class:(0,n.normalizeClass)(["text-white bg-blue-700 hover:bg-blue-500 focus:outline-none font-medium rounded-lg text-sm px-5 py-2",{"opacity-25":(0,n.unref)(f).processing}]),disabled:(0,n.unref)(f).processing}," Save ",10,M),(0,n.createVNode)((0,n.unref)(c.Z),{class:"ml-4"})])])])]))])],64)}}};var U=r(93379),Z=r.n(U),R=r(14607),Y={insert:"head",singleton:!1};Z()(R.Z,Y);R.Z.locals;const H=(0,r(83744).Z)(z,[["__scopeId","data-v-6493ea3a"]])}}]);
//# sourceMappingURL=4138.js.map