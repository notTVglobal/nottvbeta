/*! For license information please see 7491.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7491],{22965:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(94015),o=n.n(r),i=n(23645),a=n.n(i)()(o());a.push([e.id,".tiptap[data-v-48cf0b44]{>*+*[data-v-48cf0b44]{margin-top:.75em}}.character-count[data-v-48cf0b44]{color:#868e96;margin-left:1rem;margin-top:1rem}.tiptap p.is-editor-empty[data-v-48cf0b44]:first-child:before{color:#adb5bd;content:attr(data-placeholder);float:left;height:0;pointer-events:none}.fade-enter-active[data-v-48cf0b44],.fade-leave-active[data-v-48cf0b44]{transition:opacity .5s}.fade-enter[data-v-48cf0b44],.fade-leave-to[data-v-48cf0b44]{opacity:0}.save-message[data-v-48cf0b44]{font-size:1.5rem}","",{version:3,sources:["webpack://./resources/js/Components/Global/TextEditor/TipTapNewsStoryEditor.vue"],names:[],mappings:"AAoIA,yBACE,sBACE,gBACF,CACF,CAEA,kCAGE,aAAc,CADd,gBAAiB,CADjB,eAGF,CAGA,8DAGE,aAAc,CAFd,8BAA+B,CAC/B,UAAW,CAGX,QAAS,CADT,mBAEF,CAEA,wEACE,sBACF,CAEA,6DACE,SACF,CAEA,+BACE,gBACF",sourcesContent:["<template>\n  <TipTapButtons :editor=\"editor\"/>\n  <div class=\"relative\">\n    <div\n        class=\"tiptap hide-scrollbar h-auto overflow-y-auto min-h-[13rem] max-h-[96rem] mb-2 pb-2 bg-gray-50 border border-1 border-gray-300 focus:outline-none text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500\">\n      <editor-content :editor=\"editor\" class=\"news-story\"/>\n      <div class=\"character-count\" v-if=\"editor\">\n        {{ editor.storage.characterCount.characters() }} characters\n        <br>\n        {{ editor.storage.characterCount.words() }} words\n      </div>\n    </div>\n  </div>\n\n</template>\n\n<script setup>\nimport { onBeforeUnmount, onMounted, ref } from 'vue'\nimport { useNewsStore } from '@/Stores/NewsStore'\nimport { useNotificationStore } from '@/Stores/NotificationStore'\nimport { Editor, EditorContent } from '@tiptap/vue-3'\nimport StarterKit from '@tiptap/starter-kit'\nimport TipTapButtons from '@/Components/Global/TextEditor/TipTapNewsStoryButtons'\nimport { TextStyle } from '@tiptap/extension-text-style'\nimport { Color } from '@tiptap/extension-color'\nimport Typography from '@tiptap/extension-typography'\nimport CharacterCount from '@tiptap/extension-character-count'\nimport Placeholder from '@tiptap/extension-placeholder'\nimport { FontFamily } from '@tiptap/extension-font-family'\nimport { TextAlign } from '@tiptap/extension-text-align'\nimport { Underline } from '@tiptap/extension-underline'\nimport { Subscript } from '@tiptap/extension-subscript'\nimport { Superscript } from '@tiptap/extension-superscript'\nimport Link from '@tiptap/extension-link'\nimport { throttle } from 'lodash'\n\nconst newsStore = useNewsStore()\nconst notificationStore = useNotificationStore()\n\nconst limit = 5000\nconst editor = ref(null)\nconst hasShownSaveMessage = ref(false)\nconst isUnmounting = ref(false)\n\nconst saveContent = throttle(async () => {\n  if (isUnmounting.value) return // Skip saving if the component is unmounting\n\n  if (!newsStore.id) {\n    if (!hasShownSaveMessage.value) {\n      console.log('Please save the story and go to editing mode to enable automatic saving.')\n      notificationStore.setGeneralServiceNotification('Save Required', 'Please save the story and go to editing mode to enable automatic saving.')\n      hasShownSaveMessage.value = true\n    }\n    return\n  }\n  try {\n    await axios.post('/newsStory/cache', {\n      id: newsStore.id,\n      slug: newsStore.slug,\n      status: newsStore.status,\n      title: newsStore.title,\n      content: newsStore.content,\n      newsPerson: newsStore.newsPerson,\n      category: newsStore.category,\n      subCategory: newsStore.subCategory,\n      city: newsStore.city,\n      province: newsStore.province,\n      federalElectoralDistrict: newsStore.federalElectoralDistrict,\n      subnationalElectoralDistrict: newsStore.subnationalElectoralDistrict\n    })\n    newsStore.showSaveMessage = true\n    setTimeout(() => {\n      newsStore.showSaveMessage = false\n    }, 2000)  // Show the save message for 2 seconds\n  } catch (error) {\n    console.error('Error caching content:', error)\n  }\n}, 5000) // Throttle delay set to 5 seconds\n\nconst editorInstance = new Editor({\n  content: newsStore.content,\n  extensions: [\n    StarterKit,\n    TextStyle,\n    FontFamily,\n    Color,\n    Typography,\n    Underline,\n    Subscript,\n    Superscript,\n    TextAlign.configure({\n      types: ['heading', 'paragraph'],\n    }),\n    Link.configure({\n      openOnClick: true,\n    }),\n    Placeholder.configure({\n      placeholder: 'Write something â€¦',\n    }),\n    CharacterCount.configure({\n      limit: null,\n    })\n  ],\n  onUpdate: ({ editor }) => {\n    newsStore.content = editor.getHTML()\n    saveContent()\n  },\n  autofocus: true,\n  editorProps: {\n    attributes: {\n      class: 'h-auto min-h-[12rem] max-h-[96rem] overflow-y-auto block w-full p-2.5 focus:outline-none',\n    },\n  },\n})\n\neditor.value = editorInstance\n\nonMounted(() => {\n  editor.value.commands.setContent(newsStore.content)\n\n})\n\n// Ensure editor is destroyed properly on component unmount\nonBeforeUnmount(() => {\n  isUnmounting.value = true\n  if (editor.value) {\n    editor.value.destroy()\n  }\n})\n<\/script>\n\n<style scoped>\n.tiptap {\n  > * + * {\n    margin-top: 0.75em;\n  }\n}\n\n.character-count {\n  margin-top: 1rem;\n  margin-left: 1rem;\n  color: #868e96;\n}\n\n/* Placeholder (at the top) */\n.tiptap p.is-editor-empty:first-child::before {\n  content: attr(data-placeholder);\n  float: left;\n  color: #adb5bd;\n  pointer-events: none;\n  height: 0;\n}\n\n.fade-enter-active, .fade-leave-active {\n  transition: opacity 0.5s;\n}\n\n.fade-enter, .fade-leave-to {\n  opacity: 0;\n}\n\n.save-message {\n  font-size: 1.5rem;\n}\n\n\n/* Placeholder (on every new line) */\n/*.tiptap p.is-empty::before {\n  content: attr(data-placeholder);\n  float: left;\n  color: #adb5bd;\n  pointer-events: none;\n  height: 0;\n}*/\n</style>\n"],sourceRoot:""}]);const l=a},17491:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var r=n(70821),o=n(55398),i=n(83004),a=n(95404),l=n(58313),c=["disabled"],s=["disabled"],u=["disabled"];const d={__name:"TipTapNewsStoryButtons",props:{editor:Object},setup:function(e){var t=e,n=null,o=function(e){n===e?(t.editor.chain().focus().unsetColor().run(),n=null):(t.editor.chain().focus().setColor(e).run(),n=e)},i=function(){var e=t.editor.getAttributes("link").href,n=window.prompt("URL",e);""===n&&t.editor.chain().focus().extendMarkRange("link").unsetLink().run(),t.editor.chain().focus().extendMarkRange("link").setLink({href:n}).run()};return function(t,n){return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[0]||(n[0]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().toggleBold().run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-bold",{"bg-gray-600 text-white":e.editor.isActive("bold")}])}," B ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[1]||(n[1]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().toggleItalic().run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("italic")}])}," i ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[2]||(n[2]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().toggleHeading({level:1}).run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("heading",{level:1})}])}," h1 ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[3]||(n[3]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().toggleHeading({level:2}).run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("heading",{level:2})}])}," h2 ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[4]||(n[4]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().toggleHeading({level:3}).run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("heading",{level:3})}])}," h3 ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[5]||(n[5]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().setTextAlign("left").run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive({textAlign:"left"})}])}," left ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[6]||(n[6]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().setTextAlign("center").run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive({textAlign:"center"})}])}," center ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[7]||(n[7]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().setTextAlign("right").run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive({textAlign:"right"})}])}," right ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[8]||(n[8]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().setTextAlign("justify").run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive({textAlign:"justify"})}])}," justify ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[9]||(n[9]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().toggleBulletList().run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("bulletList")}])}," bullet list ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[10]||(n[10]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().toggleOrderedList().run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("orderedList")}])}," ordered list ",2),(0,r.createElementVNode)("button",{hidden:"",tabindex:"-1",onClick:(0,r.withModifiers)(i,["prevent"]),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("link")}])}," setLink ",2),(0,r.createElementVNode)("button",{hidden:"",tabindex:"-1",onClick:n[11]||(n[11]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().unsetLink().run()}),["prevent"])),class:"py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",disabled:!e.editor.isActive("link")}," unsetLink ",8,c),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[12]||(n[12]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().toggleCodeBlock().run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("codeBlock")}])}," code block ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[13]||(n[13]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().toggleBlockquote().run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("blockquote")}])}," blockquote ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[14]||(n[14]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().setHorizontalRule().run()}),["prevent"])),class:"py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic"}," horizontal rule "),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[15]||(n[15]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().toggleStrike().run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("strike")}])}," strike ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[16]||(n[16]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().toggleUnderline().run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("underline")}])}," underline ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[17]||(n[17]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().toggleSubscript().run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("subscript")}])}," subscript ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[18]||(n[18]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().toggleSuperscript().run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("superscript")}])}," superscript ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[19]||(n[19]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().undo().run()}),["prevent"])),class:"py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 disabled:hover:bg-gray-200 disabled:cursor-not-allowed disabled:text-black rounded-lg font-italic",disabled:!e.editor.can().chain().focus().undo().run()}," undo ",8,s),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[20]||(n[20]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().redo().run()}),["prevent"])),class:"py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 disabled:hover:bg-gray-200 disabled:cursor-not-allowed disabled:text-black rounded-lg font-italic",disabled:!e.editor.can().chain().focus().redo().run()}," redo ",8,u),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[21]||(n[21]=(0,r.withModifiers)((function(e){return o("#000000")}),["prevent"])),class:"py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic"}," black "),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[22]||(n[22]=(0,r.withModifiers)((function(e){return o("#F98181")}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("textStyle",{color:"#F98181"})}])}," red ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[23]||(n[23]=(0,r.withModifiers)((function(e){return o("#70CFF8")}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("textStyle",{color:"#70CFF8"})}])}," blue ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[24]||(n[24]=(0,r.withModifiers)((function(e){return o("#958DF1")}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("textStyle",{color:"#958DF1"})}])}," purple ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[25]||(n[25]=(0,r.withModifiers)((function(e){return o("#FBBC88")}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("textStyle",{color:"#FBBC88"})}])}," orange ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[26]||(n[26]=(0,r.withModifiers)((function(e){return o("#FAF594")}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("textStyle",{color:"#FAF594"})}])}," yellow ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[27]||(n[27]=(0,r.withModifiers)((function(e){return o("#94FADB")}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("textStyle",{color:"#94FADB"})}])}," teal ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[28]||(n[28]=(0,r.withModifiers)((function(e){return o("#B9F18D")}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("textStyle",{color:"#B9F18D"})}])}," green ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[29]||(n[29]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().setFontFamily("Inter").run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("textStyle",{fontFamily:"Inter"})}])}," Inter ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[30]||(n[30]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().setFontFamily("Comic Sans MS, Comic Sans").run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("textStyle",{fontFamily:"Comic Sans MS, Comic Sans"})}])}," Comic Sans ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[31]||(n[31]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().setFontFamily("serif").run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("textStyle",{fontFamily:"serif"})}])}," serif ",2),(0,r.createElementVNode)("button",{tabindex:"-1",onClick:n[32]||(n[32]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().setFontFamily("monospace").run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("textStyle",{fontFamily:"monospace"})}])}," monospace ",2),(0,r.createElementVNode)("button",{hidden:"",tabindex:"-1",onClick:n[33]||(n[33]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().setFontFamily("cursive").run()}),["prevent"])),class:(0,r.normalizeClass)(["py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic",{"bg-gray-600 text-white":e.editor.isActive("textStyle",{fontFamily:"cursive"})}])}," cursive ",2),(0,r.createElementVNode)("button",{hidden:"",tabindex:"-1",onClick:n[34]||(n[34]=(0,r.withModifiers)((function(t){return e.editor.chain().focus().unsetFontFamily().run()}),["prevent"])),class:"py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-600 rounded-lg font-italic"}," unsetFontFamily ")])}}};var g=n(23621),h=n(90353),f=n(90214),p=n(88776),b=n(93237),m=n(7070),v=n(96279),y=n(48510),x=n(18151),w=n(41705),k=n(99404),C=n(96486);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function S(){S=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),l=new L(r||[]);return o(a,"_invoke",{value:F(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var g="suspendedStart",h="suspendedYield",f="executing",p="completed",b={};function m(){}function v(){}function y(){}var x={};s(x,a,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(T([])));k&&k!==n&&r.call(k,a)&&(x=k);var C=y.prototype=m.prototype=Object.create(x);function A(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function n(o,i,a,l){var c=d(e[o],e,i);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==E(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function F(t,n,r){var o=g;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var c=M(l,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===g)throw o=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var s=d(t,n,r);if("normal"===s.type){if(o=r.done?p:h,s.arg===b)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=p,r.method="throw",r.arg=s.arg)}}}function M(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function V(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(V,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(E(t)+" is not iterable")}return v.prototype=y,o(C,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:v,configurable:!0}),v.displayName=s(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},A(N.prototype),s(N.prototype,l,(function(){return this})),t.AsyncIterator=N,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new N(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},A(C),s(C,c,"Generator"),s(C,a,(function(){return this})),s(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(B),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;B(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function A(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){A(i,r,o,a,l,"next",e)}function l(e){A(i,r,o,a,l,"throw",e)}a(void 0)}))}}var F={class:"relative"},M={class:"tiptap hide-scrollbar h-auto overflow-y-auto min-h-[13rem] max-h-[96rem] mb-2 pb-2 bg-gray-50 border border-1 border-gray-300 focus:outline-none text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500"},V={key:0,class:"character-count"},B=function(e){return(0,r.pushScopeId)("data-v-48cf0b44"),e=e(),(0,r.popScopeId)(),e}((function(){return(0,r.createElementVNode)("br",null,null,-1)}));const L={__name:"TipTapNewsStoryEditor",setup:function(e){var t=(0,o.useNewsStore)(),n=(0,i.useNotificationStore)(),c=(0,r.ref)(null),s=(0,r.ref)(!1),u=(0,r.ref)(!1),E=(0,C.throttle)(N(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.value){e.next=2;break}return e.abrupt("return");case 2:if(t.id){e.next=5;break}return s.value||(console.log("Please save the story and go to editing mode to enable automatic saving."),n.setGeneralServiceNotification("Save Required","Please save the story and go to editing mode to enable automatic saving."),s.value=!0),e.abrupt("return");case 5:return e.prev=5,e.next=8,axios.post("/newsStory/cache",{id:t.id,slug:t.slug,status:t.status,title:t.title,content:t.content,newsPerson:t.newsPerson,category:t.category,subCategory:t.subCategory,city:t.city,province:t.province,federalElectoralDistrict:t.federalElectoralDistrict,subnationalElectoralDistrict:t.subnationalElectoralDistrict});case 8:t.showSaveMessage=!0,setTimeout((function(){t.showSaveMessage=!1}),2e3),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("Error caching content:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,12]])}))),5e3),A=new a.ML({content:t.content,extensions:[l.Z,g.p,m.b,h.I,f.ZP,y.v,x.a,w.$,v.P.configure({types:["heading","paragraph"]}),k.ZP.configure({openOnClick:!0}),b.Z.configure({placeholder:"Write something â€¦"}),p.Z.configure({limit:null})],onUpdate:function(e){var n=e.editor;t.content=n.getHTML(),E()},autofocus:!0,editorProps:{attributes:{class:"h-auto min-h-[12rem] max-h-[96rem] overflow-y-auto block w-full p-2.5 focus:outline-none"}}});return c.value=A,(0,r.onMounted)((function(){c.value.commands.setContent(t.content)})),(0,r.onBeforeUnmount)((function(){u.value=!0,c.value&&c.value.destroy()})),function(e,t){return(0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.createVNode)((0,r.unref)(d),{editor:c.value},null,8,["editor"]),(0,r.createElementVNode)("div",F,[(0,r.createElementVNode)("div",M,[(0,r.createVNode)((0,r.unref)(a.kg),{editor:c.value,class:"news-story"},null,8,["editor"]),c.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",V,[(0,r.createTextVNode)((0,r.toDisplayString)(c.value.storage.characterCount.characters())+" characters ",1),B,(0,r.createTextVNode)(" "+(0,r.toDisplayString)(c.value.storage.characterCount.words())+" words ",1)])):(0,r.createCommentVNode)("",!0)])])],64)}}};var T=n(93379),z=n.n(T),P=n(22965),D={insert:"head",singleton:!1};z()(P.Z,D);P.Z.locals;const _=(0,n(83744).Z)(L,[["__scopeId","data-v-48cf0b44"]]);var j={class:"mb-6"},O=(0,r.createElementVNode)("label",{for:"Title",class:"block mb-2 text-sm font-bold text-gray-900"},"Title",-1),G={key:0,class:"text-sm text-red-600"},I={class:"mb-6"},U=(0,r.createElementVNode)("label",{for:"Content",class:"block mb-2 text-sm font-bold text-gray-900"},"Content",-1),Z={key:0,class:"text-sm text-red-600"};const R={__name:"NewsWriterComponent",setup:function(e){var t=(0,o.useNewsStore)();return function(e,n){return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createElementVNode)("div",j,[O,(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=function(e){return(0,r.unref)(t).title=e}),name:"title",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:""},null,512),[[r.vModelText,(0,r.unref)(t).title]]),(0,r.unref)(t).errors.title?((0,r.openBlock)(),(0,r.createElementBlock)("div",G,(0,r.toDisplayString)((0,r.unref)(t).errors.title),1)):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("div",I,[U,(0,r.createVNode)((0,r.unref)(_)),(0,r.unref)(t).errors.body?((0,r.openBlock)(),(0,r.createElementBlock)("div",Z,(0,r.toDisplayString)((0,r.unref)(t).errors.body),1)):(0,r.createCommentVNode)("",!0)])])}}}}}]);
//# sourceMappingURL=7491.js.map