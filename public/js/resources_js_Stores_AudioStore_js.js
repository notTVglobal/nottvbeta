"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk"] = self["webpackChunk"] || []).push([["resources_js_Stores_AudioStore_js"],{

/***/ "./resources/js/Stores/AudioStore.js":
/*!*******************************************!*\
  !*** ./resources/js/Stores/AudioStore.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAudioStore: () => (/* binding */ useAudioStore)\n/* harmony export */ });\n/* harmony import */ var pinia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pinia */ \"./node_modules/pinia/dist/pinia.mjs\");\n/* harmony import */ var video_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! video.js */ \"./node_modules/video.js/dist/video.es.js\");\n\n\nvar initialState = function initialState() {\n  return {\n    showVolumeIndicator: true,\n    audioSetupCompleted: false,\n    audioAnimationFrameId: null,\n    audioLevel: 0,\n    // Initial audio level\n    volume: 100 // Initial volume level\n  };\n};\nvar useAudioStore = (0,pinia__WEBPACK_IMPORTED_MODULE_1__.defineStore)('audioStore', {\n  state: initialState,\n  actions: {\n    reset: function reset() {\n      // Reset the store to its original state (clear all data)\n      Object.assign(this, initialState());\n    },\n    ////////////////////////////////// AUDIO DYNAMICS SETUP\n    ///////////////////////////////////////////////////////\n    // tec21: 2024-02-02 this is good... keep this here. It is loaded when the videoPlayer is Ready\n    // currently we are only using the VideoPlayerMain... so check VideoPlayerMain to see the starting\n    // of this process. And note, audioContext is available globally as we set it up in our app.js.\n    // Since a MediaElementSourceNode can only be created once per media element, and we're managing\n    // dynamic video source changes, ensure that this node is not being recreated unnecessarily.\n    // This could disrupt the audio processing chain.\n    // When initializing or changing the video source, call a central function from VideoPlayerStore\n    // to set up or reconfigure the audio context and its nodes: this.resumeAudioContextIfNeeded()\n    // Assuming this setup is done once when the player is initially ready\n    // initialAudioSetup() {\n    //     if (!this.audioSetupCompleted) {\n    //         if (!window.audioContext) {\n    //             window.audioContext = new (window.AudioContext || window.webkitAudioContext)()\n    //         }\n    //\n    //         const videoJs = videojs('main-player')\n    //         // const videoElement = document.querySelector('video#main-player'); // Adjust selector as needed\n    //         if (!window.sourceNode) {\n    //             window.sourceNode = window.audioContext.createMediaElementSource(videoJs)\n    //             // Connect to destination or further processing nodes here\n    //             window.sourceNode.connect(window.audioContext.destination)\n    //         }\n    //         // Additional audio processing setup...\n    //     }\n    //     // Mark setup as completed to prevent re-initialization\n    //     this.audioSetupCompleted = true;\n    // },\n    ensureAudioContextAndNodesReady: function ensureAudioContextAndNodesReady(videoJs) {\n      var _this = this;\n      // Initialize Video.js player\n\n      var videoElement = videoJs.tech().el();\n      console.log('Ensuring AudioContext and nodes are ready for video element', videoElement);\n      this.audioLevel = 0;\n\n      // Resume AudioContext if suspended\n      if (window.audioContext.state === 'suspended') {\n        window.audioContext.resume().then(function () {\n          console.log('AudioContext resumed successfully');\n          _this.configureAudioProcessingChain(videoElement);\n        })[\"catch\"](function (error) {\n          console.error('Error resuming AudioContext:', error);\n        });\n      }\n      // Check if MediaElementSourceNode needs reconnection or initialization\n      if (!videoElement.__sourceConnected) {\n        console.log('MediaElementSourceNode not connected or needs reconnection. Reconnecting...');\n        this.configureAudioProcessingChain(videoElement);\n        videoElement.__sourceConnected = true; // Mark as connected\n        console.log('MediaElementSourceNode reconnected successfully.');\n      } else {\n        console.log('MediaElementSourceNode already connected.');\n      }\n    },\n    configureAudioProcessingChain: function configureAudioProcessingChain(videoElement) {\n      console.log('Setting up audio nodes for:', videoElement);\n      // Check and create MediaElementSourceNode, GainNode, etc., as discussed previously\n      // Ensure connections between nodes are correctly set up\n      // This includes checking if nodes already exist to avoid re-initialization\n\n      // Ensure the AudioContext is globally initialized\n      if (!window.audioContext) {\n        window.audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      }\n\n      // Create or ensure MediaElementSourceNode is configured for the video element\n      // if (!videoElement.__mediaElementSourceConnected) {\n      //     videoElement.__mediaElementSource = window.audioContext.createMediaElementSource(videoElement);\n      //     videoElement.__mediaElementSourceConnected = true; // Mark as connected\n      // }\n\n      // Create or reuse the MediaElementSourceNode for the video element\n      if (!videoElement.__sourceNode) {\n        console.log('Creating or reconnecting MediaElementSourceNode...');\n        videoElement.__sourceNode = window.audioContext.createMediaElementSource(videoElement);\n        videoElement.__sourceNodeNeedsReconnect = false; // Reset flag after reconnection\n        console.log('MediaElementSourceNode created or reconnected.');\n      }\n\n      // Setup or ensure gain node is configured\n      if (!window.gainNode) {\n        console.log('Connecting MediaElementSourceNode to gainNode...');\n        window.gainNode = window.audioContext.createGain();\n        console.log('gainNode connected.');\n        // Additional gain node configuration here, e.g., setting initial gain value\n        window.gainNode.gain.setValueAtTime(1, window.audioContext.currentTime);\n        console.log('gainNode value set.');\n      }\n\n      // Setup or ensure DynamicsCompressorNode is configured with broadcast settings\n      if (!window.compressorNode) {\n        console.log('Connecting gainNode to compressorNode...');\n        window.compressorNode = window.audioContext.createDynamicsCompressor();\n        console.log('compressorNode connected.');\n        // Apply broadcast-optimized settings\n        window.compressorNode.threshold.setValueAtTime(-50, window.audioContext.currentTime);\n        window.compressorNode.knee.setValueAtTime(40, window.audioContext.currentTime);\n        window.compressorNode.ratio.setValueAtTime(12, window.audioContext.currentTime);\n        window.compressorNode.attack.setValueAtTime(0.003, window.audioContext.currentTime);\n        window.compressorNode.release.setValueAtTime(0.25, window.audioContext.currentTime);\n        console.log('compressor settings applied.');\n      }\n\n      // Setup or ensure AnalyserNode is configured\n      if (!window.analyserNode) {\n        window.analyserNode = window.audioContext.createAnalyser();\n        console.log('Analyser node configured.');\n        window.analyserNode.fftSize = 256; // Example size, adjust based on needs\n        // Further configuration for the analyserNode can be added here\n        // Start the audio level monitoring process\n        // this.updateAudioLevel(window.analyserNode);\n        // this.startAudioLevelMonitoring(window.analyserNode)\n        // Start the audio level monitoring process\n      } else {\n        console.log('Audio nodes already set up and connected.');\n      }\n\n      // Connect the audio nodes in the correct order\n      console.log('Connecting sourceNode to gainNode.');\n      videoElement.__sourceNode.connect(window.gainNode); // Source to Gain\n      console.log('Connecting gainNode to compressorNode.');\n      window.gainNode.connect(window.compressorNode); // Gain to Compressor\n      console.log('Connecting compressorNode to analyserNode.');\n      window.compressorNode.connect(window.analyserNode); // Analyze post-compression\n      console.log('Connecting analyserNode to AudioContext destination.');\n      window.analyserNode.connect(window.audioContext.destination); // Output the analyzed audio\n      console.log('Audio output connected to destination.');\n      this.startAudioLevelMonitoring(window.analyserNode); // Use the global analyserNode\n\n      // Optionally adjust gain based on analysis or other criteria\n      // This could be dynamic based on your application's needs\n      console.log('Adjust gain based on analysis.');\n      this.adjustGainBasedOnAnalysis(window.gainNode);\n    },\n    adjustGainBasedOnAnalysis: function adjustGainBasedOnAnalysis(gainNode) {\n      // Example function to dynamically adjust gain - adjust as necessary\n      // This can be called here directly or in response to specific application events\n      gainNode.gain.setValueAtTime(1.5, window.audioContext.currentTime); // Example adjustment\n      console.log('Gain adjusted.');\n    },\n    setAudioLevel: function setAudioLevel(level) {\n      this.audioLevel = level;\n    },\n    // resumeAudioContextIfNeeded() {\n    //     // Assuming `audioContext` is accessible globally or injected into the store\n    //     if (window.audioContext && window.audioContext.state === 'suspended') {\n    //         window.audioContext.resume().then(() => {\n    //             console.log('AudioContext resumed successfully');\n    //             // Any additional actions after resuming can go here\n    //         }).catch(error => {\n    //             console.error('Error resuming AudioContext:', error);\n    //         });\n    //     }\n    // },\n    // setupAudioAnalyser(videoElement) {\n    //     if (!window.audioContext) {\n    //         console.error(\"AudioContext not initialized.\");\n    //         return;\n    //     }\n    //\n    //     // Check if the sourceNode has already been created to avoid re-creation\n    //     if (!videoElement.__sourceNode) {\n    //         videoElement.__sourceNode = window.audioContext.createMediaElementSource(videoElement);\n    //     }\n    //\n    //     // Create and configure AnalyserNode\n    //     if (!videoElement.__analyserNode) {\n    //         videoElement.__analyserNode = window.audioContext.createAnalyser();\n    //         videoElement.__analyserNode.fftSize = 256; // Example size, adjust based on needs\n    //     }\n    //\n    //     // Connect the nodes\n    //     videoElement.__sourceNode.connect(videoElement.__analyserNode);\n    //     videoElement.__analyserNode.connect(window.audioContext.destination);\n    //\n    //     // Start the audio level monitoring process\n    //     this.updateAudioLevel(videoElement.__analyserNode);\n    // },\n    startAudioLevelMonitoring: function startAudioLevelMonitoring(analyserNode) {\n      var _this2 = this;\n      console.log('Audio level monitoring started.');\n      var bufferLength = analyserNode.frequencyBinCount;\n      var dataArray = new Uint8Array(bufferLength);\n      var updateAudioLevel = function updateAudioLevel() {\n        analyserNode.getByteFrequencyData(dataArray);\n        var sum = 0;\n        for (var i = 0; i < bufferLength; i++) {\n          sum += dataArray[i];\n        }\n        var average = sum / bufferLength;\n\n        // Update the audio level for display (scale as needed)\n        _this2.audioLevel = average * 100 / 128; // Adjust as necessary\n\n        _this2.audioAnimationFrameId = requestAnimationFrame(updateAudioLevel);\n      };\n      updateAudioLevel();\n    },\n    reconnectAudioContextIfNeeded: function reconnectAudioContextIfNeeded(videoJs) {\n      // This function shouldn't be needed as the MediaElementSourceNode can only be\n      // created once per media element.\n\n      // Assuming the video element and audio context setup are similar to previous steps\n      var videoElement = videoJs.tech().el();\n      // Check if the media element source needs to be reconnected\n      if (!videoElement.__mediaElementSourceConnected) {\n        var sourceNode = window.audioContext.createMediaElementSource(videoElement);\n        // Reconnect source node to your audio nodes or directly to the destination\n        sourceNode.connect(window.audioContext.destination);\n        videoElement.__mediaElementSourceConnected = true; // Flag to avoid duplicate connections\n      }\n    },\n    setupDynamicGainControl: function setupDynamicGainControl(player) {\n      // Ensure the global audioContext is used and not re-initialized\n      var audioContext = window.audioContext;\n\n      // Access the actual HTML video element from the Video.js player\n      var videoElement = player.tech().el();\n\n      // Create the media element source only once to avoid creating multiple connections for the same source\n      if (!player.__mediaElementSource) {\n        // Example function to adjust gain - adjust as necessary\n        var adjustGainBasedOnAnalysis = function adjustGainBasedOnAnalysis() {\n          gainNode.gain.setValueAtTime(1.5, audioContext.currentTime); // Example adjustment\n        };\n        var source = audioContext.createMediaElementSource(videoElement);\n        player.__mediaElementSource = source; // Store it to reuse\n\n        // Optionally, store gainNode for later use, e.g., in window or another global state\n        var gainNode = audioContext.createGain();\n        // Configure gain node and compressor as before\n        gainNode.gain.setValueAtTime(1, audioContext.currentTime); // Example: start with unity gain\n\n        var compressor = audioContext.createDynamicsCompressor();\n        // Compressor settings\n        // Connect the audio nodes\n        source.connect(gainNode);\n        gainNode.connect(compressor);\n        compressor.connect(audioContext.destination);\n        adjustGainBasedOnAnalysis();\n        console.log('Dynamic gain control setup complete');\n      }\n    },\n    // startAudioLevelMonitoring() {\n    //     const updateAudioLevel = () => {\n    //         // Your existing logic...\n    //         this.audioAnimationFrameId = requestAnimationFrame(updateAudioLevel);\n    //     };\n    //\n    //     updateAudioLevel();\n    // },\n    stopAudioLevelMonitoring: function stopAudioLevelMonitoring() {\n      if (this.audioAnimationFrameId !== null) {\n        cancelAnimationFrame(this.audioAnimationFrameId);\n        this.audioAnimationFrameId = null; // Reset the ID after stopping\n      }\n    },\n    // tec21: this isn't setup yet. We can apply different gain and dynamics\n    // settings to different channels... and creators can also choose settings\n    // for their content that override the defaults... ** FUTURE FEATURE **\n    // Example function to adjust gain dynamically\n    adjustAudioForNewVideo: function adjustAudioForNewVideo(gainValue) {\n      // Assuming gainNode is stored or accessible globally similar to audioContext\n      var gainNode = window.gainNode; // Ensure this is set up in your initial audio setup\n      gainNode.gain.setValueAtTime(gainValue, window.audioContext.currentTime);\n    },\n    /////////////////////////////// ADDITIONAL AUDIO FUNCTIONS\n    //////////////////////////////////////////////////////////\n    ///////// FADE IN AUDIO FROM MUTED\n    //////////////////////////////////\n    fadeInAudioFromMuted: function fadeInAudioFromMuted() {\n      var videoJs = (0,video_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('main-player');\n\n      // Ensure the video is not muted to allow volume changes to take effect\n      videoJs.muted(false);\n      this.muted = false; // Update your application's state accordingly\n\n      // Initialize volume at 0 for the fade-in effect\n      var currentVolume = 0;\n      videoJs.volume(currentVolume);\n      var maxVolume = 1; // Define the maximum volume as 100%\n      var fadeStep = 0.05; // Define the increment step for the fade-in effect\n      var fadeInterval = 100; // Define the time interval for each step in milliseconds\n\n      var fadeAudioIn = setInterval(function () {\n        if (currentVolume < maxVolume) {\n          currentVolume += fadeStep; // Increment the volume\n          currentVolume = Math.min(currentVolume, maxVolume); // Ensure it does not exceed maxVolume\n          videoJs.volume(currentVolume); // Apply the incremented volume\n        } else {\n          clearInterval(fadeAudioIn); // Stop the interval once the max volume is reached\n        }\n      }, fadeInterval);\n    } /////////////////////////////// END AUDIO FUNCTIONS AND SETUP\n    /////////////////////////////////////////////////////////////\n  },\n  getters: {}\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1VBQzNCRixhQUFhLEdBQUdNLElBQUksQ0FBQ0MsR0FBRyxDQUFDUCxhQUFhLEVBQUVDLFNBQVMsQ0FBQyxDQUFDLENBQUM7VUFDcERsRSxPQUFPLENBQUNSLE1BQU0sQ0FBQ3lFLGFBQWEsQ0FBQyxDQUFDLENBQUM7UUFDbkMsQ0FBQyxNQUFNO1VBQ0hRLGFBQWEsQ0FBQ0osV0FBVyxDQUFDLENBQUMsQ0FBQztRQUNoQztNQUNKLENBQUMsRUFBRUQsWUFBWSxDQUFDO0lBQ3BCLENBQUMsQ0FFVDtJQUNBO0VBaUJJLENBQUM7RUFFRE0sT0FBTyxFQUFFLENBRVQ7QUFFSixDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvU3RvcmVzL0F1ZGlvU3RvcmUuanM/MTU3OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZpbmVTdG9yZSB9IGZyb20gXCJwaW5pYVwiO1xyXG5pbXBvcnQgdmlkZW9qcyBmcm9tICd2aWRlby5qcydcclxuXHJcbmNvbnN0IGluaXRpYWxTdGF0ZSA9ICgpID0+ICh7XHJcbiAgICBzaG93Vm9sdW1lSW5kaWNhdG9yOiB0cnVlLFxyXG4gICAgYXVkaW9TZXR1cENvbXBsZXRlZDogZmFsc2UsXHJcbiAgICBhdWRpb0FuaW1hdGlvbkZyYW1lSWQ6IG51bGwsXHJcbiAgICBhdWRpb0xldmVsOiAwLCAvLyBJbml0aWFsIGF1ZGlvIGxldmVsXHJcbiAgICB2b2x1bWU6IDEwMCwgLy8gSW5pdGlhbCB2b2x1bWUgbGV2ZWxcclxufSlcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VBdWRpb1N0b3JlID0gZGVmaW5lU3RvcmUoJ2F1ZGlvU3RvcmUnLCB7XHJcbiAgICBzdGF0ZTogaW5pdGlhbFN0YXRlLFxyXG4gICAgYWN0aW9uczoge1xyXG4gICAgICAgIHJlc2V0KCkge1xyXG4gICAgICAgICAgICAvLyBSZXNldCB0aGUgc3RvcmUgdG8gaXRzIG9yaWdpbmFsIHN0YXRlIChjbGVhciBhbGwgZGF0YSlcclxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBpbml0aWFsU3RhdGUoKSk7XHJcbiAgICAgICAgfSxcclxuXHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEFVRElPIERZTkFNSUNTIFNFVFVQXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiAgICAgICAgLy8gdGVjMjE6IDIwMjQtMDItMDIgdGhpcyBpcyBnb29kLi4uIGtlZXAgdGhpcyBoZXJlLiBJdCBpcyBsb2FkZWQgd2hlbiB0aGUgdmlkZW9QbGF5ZXIgaXMgUmVhZHlcclxuICAgICAgICAvLyBjdXJyZW50bHkgd2UgYXJlIG9ubHkgdXNpbmcgdGhlIFZpZGVvUGxheWVyTWFpbi4uLiBzbyBjaGVjayBWaWRlb1BsYXllck1haW4gdG8gc2VlIHRoZSBzdGFydGluZ1xyXG4gICAgICAgIC8vIG9mIHRoaXMgcHJvY2Vzcy4gQW5kIG5vdGUsIGF1ZGlvQ29udGV4dCBpcyBhdmFpbGFibGUgZ2xvYmFsbHkgYXMgd2Ugc2V0IGl0IHVwIGluIG91ciBhcHAuanMuXHJcblxyXG4gICAgICAgIC8vIFNpbmNlIGEgTWVkaWFFbGVtZW50U291cmNlTm9kZSBjYW4gb25seSBiZSBjcmVhdGVkIG9uY2UgcGVyIG1lZGlhIGVsZW1lbnQsIGFuZCB3ZSdyZSBtYW5hZ2luZ1xyXG4gICAgICAgIC8vIGR5bmFtaWMgdmlkZW8gc291cmNlIGNoYW5nZXMsIGVuc3VyZSB0aGF0IHRoaXMgbm9kZSBpcyBub3QgYmVpbmcgcmVjcmVhdGVkIHVubmVjZXNzYXJpbHkuXHJcbiAgICAgICAgLy8gVGhpcyBjb3VsZCBkaXNydXB0IHRoZSBhdWRpbyBwcm9jZXNzaW5nIGNoYWluLlxyXG5cclxuICAgICAgICAvLyBXaGVuIGluaXRpYWxpemluZyBvciBjaGFuZ2luZyB0aGUgdmlkZW8gc291cmNlLCBjYWxsIGEgY2VudHJhbCBmdW5jdGlvbiBmcm9tIFZpZGVvUGxheWVyU3RvcmVcclxuICAgICAgICAvLyB0byBzZXQgdXAgb3IgcmVjb25maWd1cmUgdGhlIGF1ZGlvIGNvbnRleHQgYW5kIGl0cyBub2RlczogdGhpcy5yZXN1bWVBdWRpb0NvbnRleHRJZk5lZWRlZCgpXHJcblxyXG4gICAgICAgIC8vIEFzc3VtaW5nIHRoaXMgc2V0dXAgaXMgZG9uZSBvbmNlIHdoZW4gdGhlIHBsYXllciBpcyBpbml0aWFsbHkgcmVhZHlcclxuICAgICAgICAvLyBpbml0aWFsQXVkaW9TZXR1cCgpIHtcclxuICAgICAgICAvLyAgICAgaWYgKCF0aGlzLmF1ZGlvU2V0dXBDb21wbGV0ZWQpIHtcclxuICAgICAgICAvLyAgICAgICAgIGlmICghd2luZG93LmF1ZGlvQ29udGV4dCkge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHdpbmRvdy5hdWRpb0NvbnRleHQgPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkoKVxyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgICAgICBjb25zdCB2aWRlb0pzID0gdmlkZW9qcygnbWFpbi1wbGF5ZXInKVxyXG4gICAgICAgIC8vICAgICAgICAgLy8gY29uc3QgdmlkZW9FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndmlkZW8jbWFpbi1wbGF5ZXInKTsgLy8gQWRqdXN0IHNlbGVjdG9yIGFzIG5lZWRlZFxyXG4gICAgICAgIC8vICAgICAgICAgaWYgKCF3aW5kb3cuc291cmNlTm9kZSkge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHdpbmRvdy5zb3VyY2VOb2RlID0gd2luZG93LmF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYUVsZW1lbnRTb3VyY2UodmlkZW9KcylcclxuICAgICAgICAvLyAgICAgICAgICAgICAvLyBDb25uZWN0IHRvIGRlc3RpbmF0aW9uIG9yIGZ1cnRoZXIgcHJvY2Vzc2luZyBub2RlcyBoZXJlXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgd2luZG93LnNvdXJjZU5vZGUuY29ubmVjdCh3aW5kb3cuYXVkaW9Db250ZXh0LmRlc3RpbmF0aW9uKVxyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgLy8gQWRkaXRpb25hbCBhdWRpbyBwcm9jZXNzaW5nIHNldHVwLi4uXHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgLy8gTWFyayBzZXR1cCBhcyBjb21wbGV0ZWQgdG8gcHJldmVudCByZS1pbml0aWFsaXphdGlvblxyXG4gICAgICAgIC8vICAgICB0aGlzLmF1ZGlvU2V0dXBDb21wbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgIC8vIH0sXHJcblxyXG4gICAgICAgIGVuc3VyZUF1ZGlvQ29udGV4dEFuZE5vZGVzUmVhZHkodmlkZW9Kcykge1xyXG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIFZpZGVvLmpzIHBsYXllclxyXG5cclxuICAgICAgICAgICAgY29uc3QgdmlkZW9FbGVtZW50ID0gdmlkZW9Kcy50ZWNoKCkuZWwoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vuc3VyaW5nIEF1ZGlvQ29udGV4dCBhbmQgbm9kZXMgYXJlIHJlYWR5IGZvciB2aWRlbyBlbGVtZW50JywgdmlkZW9FbGVtZW50KTtcclxuICAgICAgICAgICAgdGhpcy5hdWRpb0xldmVsID0gMDtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlc3VtZSBBdWRpb0NvbnRleHQgaWYgc3VzcGVuZGVkXHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cuYXVkaW9Db250ZXh0LnN0YXRlID09PSAnc3VzcGVuZGVkJykge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmF1ZGlvQ29udGV4dC5yZXN1bWUoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQXVkaW9Db250ZXh0IHJlc3VtZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWd1cmVBdWRpb1Byb2Nlc3NpbmdDaGFpbih2aWRlb0VsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlc3VtaW5nIEF1ZGlvQ29udGV4dDonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBNZWRpYUVsZW1lbnRTb3VyY2VOb2RlIG5lZWRzIHJlY29ubmVjdGlvbiBvciBpbml0aWFsaXphdGlvblxyXG4gICAgICAgICAgICBpZiAoIXZpZGVvRWxlbWVudC5fX3NvdXJjZUNvbm5lY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ01lZGlhRWxlbWVudFNvdXJjZU5vZGUgbm90IGNvbm5lY3RlZCBvciBuZWVkcyByZWNvbm5lY3Rpb24uIFJlY29ubmVjdGluZy4uLicpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWd1cmVBdWRpb1Byb2Nlc3NpbmdDaGFpbih2aWRlb0VsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdmlkZW9FbGVtZW50Ll9fc291cmNlQ29ubmVjdGVkID0gdHJ1ZTsgLy8gTWFyayBhcyBjb25uZWN0ZWRcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdNZWRpYUVsZW1lbnRTb3VyY2VOb2RlIHJlY29ubmVjdGVkIHN1Y2Nlc3NmdWxseS4nKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdNZWRpYUVsZW1lbnRTb3VyY2VOb2RlIGFscmVhZHkgY29ubmVjdGVkLicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBjb25maWd1cmVBdWRpb1Byb2Nlc3NpbmdDaGFpbih2aWRlb0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NldHRpbmcgdXAgYXVkaW8gbm9kZXMgZm9yOicsIHZpZGVvRWxlbWVudCk7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGFuZCBjcmVhdGUgTWVkaWFFbGVtZW50U291cmNlTm9kZSwgR2Fpbk5vZGUsIGV0Yy4sIGFzIGRpc2N1c3NlZCBwcmV2aW91c2x5XHJcbiAgICAgICAgICAgIC8vIEVuc3VyZSBjb25uZWN0aW9ucyBiZXR3ZWVuIG5vZGVzIGFyZSBjb3JyZWN0bHkgc2V0IHVwXHJcbiAgICAgICAgICAgIC8vIFRoaXMgaW5jbHVkZXMgY2hlY2tpbmcgaWYgbm9kZXMgYWxyZWFkeSBleGlzdCB0byBhdm9pZCByZS1pbml0aWFsaXphdGlvblxyXG5cclxuICAgICAgICAgICAgLy8gRW5zdXJlIHRoZSBBdWRpb0NvbnRleHQgaXMgZ2xvYmFsbHkgaW5pdGlhbGl6ZWRcclxuICAgICAgICAgICAgaWYgKCF3aW5kb3cuYXVkaW9Db250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYXVkaW9Db250ZXh0ID0gbmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQpKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgb3IgZW5zdXJlIE1lZGlhRWxlbWVudFNvdXJjZU5vZGUgaXMgY29uZmlndXJlZCBmb3IgdGhlIHZpZGVvIGVsZW1lbnRcclxuICAgICAgICAgICAgLy8gaWYgKCF2aWRlb0VsZW1lbnQuX19tZWRpYUVsZW1lbnRTb3VyY2VDb25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgLy8gICAgIHZpZGVvRWxlbWVudC5fX21lZGlhRWxlbWVudFNvdXJjZSA9IHdpbmRvdy5hdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFFbGVtZW50U291cmNlKHZpZGVvRWxlbWVudCk7XHJcbiAgICAgICAgICAgIC8vICAgICB2aWRlb0VsZW1lbnQuX19tZWRpYUVsZW1lbnRTb3VyY2VDb25uZWN0ZWQgPSB0cnVlOyAvLyBNYXJrIGFzIGNvbm5lY3RlZFxyXG4gICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgb3IgcmV1c2UgdGhlIE1lZGlhRWxlbWVudFNvdXJjZU5vZGUgZm9yIHRoZSB2aWRlbyBlbGVtZW50XHJcbiAgICAgICAgICAgIGlmICghdmlkZW9FbGVtZW50Ll9fc291cmNlTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIG9yIHJlY29ubmVjdGluZyBNZWRpYUVsZW1lbnRTb3VyY2VOb2RlLi4uJyk7XHJcbiAgICAgICAgICAgICAgICB2aWRlb0VsZW1lbnQuX19zb3VyY2VOb2RlID0gd2luZG93LmF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYUVsZW1lbnRTb3VyY2UodmlkZW9FbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHZpZGVvRWxlbWVudC5fX3NvdXJjZU5vZGVOZWVkc1JlY29ubmVjdCA9IGZhbHNlOyAvLyBSZXNldCBmbGFnIGFmdGVyIHJlY29ubmVjdGlvblxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ01lZGlhRWxlbWVudFNvdXJjZU5vZGUgY3JlYXRlZCBvciByZWNvbm5lY3RlZC4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gU2V0dXAgb3IgZW5zdXJlIGdhaW4gbm9kZSBpcyBjb25maWd1cmVkXHJcbiAgICAgICAgICAgIGlmICghd2luZG93LmdhaW5Ob2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ29ubmVjdGluZyBNZWRpYUVsZW1lbnRTb3VyY2VOb2RlIHRvIGdhaW5Ob2RlLi4uJyk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuZ2Fpbk5vZGUgPSB3aW5kb3cuYXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnYWluTm9kZSBjb25uZWN0ZWQuJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBBZGRpdGlvbmFsIGdhaW4gbm9kZSBjb25maWd1cmF0aW9uIGhlcmUsIGUuZy4sIHNldHRpbmcgaW5pdGlhbCBnYWluIHZhbHVlXHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuZ2Fpbk5vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSgxLCB3aW5kb3cuYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnYWluTm9kZSB2YWx1ZSBzZXQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFNldHVwIG9yIGVuc3VyZSBEeW5hbWljc0NvbXByZXNzb3JOb2RlIGlzIGNvbmZpZ3VyZWQgd2l0aCBicm9hZGNhc3Qgc2V0dGluZ3NcclxuICAgICAgICAgICAgaWYgKCF3aW5kb3cuY29tcHJlc3Nvck5vZGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb25uZWN0aW5nIGdhaW5Ob2RlIHRvIGNvbXByZXNzb3JOb2RlLi4uJyk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuY29tcHJlc3Nvck5vZGUgPSB3aW5kb3cuYXVkaW9Db250ZXh0LmNyZWF0ZUR5bmFtaWNzQ29tcHJlc3NvcigpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NvbXByZXNzb3JOb2RlIGNvbm5lY3RlZC4nKTtcclxuICAgICAgICAgICAgICAgIC8vIEFwcGx5IGJyb2FkY2FzdC1vcHRpbWl6ZWQgc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5jb21wcmVzc29yTm9kZS50aHJlc2hvbGQuc2V0VmFsdWVBdFRpbWUoLTUwLCB3aW5kb3cuYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5jb21wcmVzc29yTm9kZS5rbmVlLnNldFZhbHVlQXRUaW1lKDQwLCB3aW5kb3cuYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5jb21wcmVzc29yTm9kZS5yYXRpby5zZXRWYWx1ZUF0VGltZSgxMiwgd2luZG93LmF1ZGlvQ29udGV4dC5jdXJyZW50VGltZSk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuY29tcHJlc3Nvck5vZGUuYXR0YWNrLnNldFZhbHVlQXRUaW1lKDAuMDAzLCB3aW5kb3cuYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5jb21wcmVzc29yTm9kZS5yZWxlYXNlLnNldFZhbHVlQXRUaW1lKDAuMjUsIHdpbmRvdy5hdWRpb0NvbnRleHQuY3VycmVudFRpbWUpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NvbXByZXNzb3Igc2V0dGluZ3MgYXBwbGllZC4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gU2V0dXAgb3IgZW5zdXJlIEFuYWx5c2VyTm9kZSBpcyBjb25maWd1cmVkXHJcbiAgICAgICAgICAgIGlmICghd2luZG93LmFuYWx5c2VyTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmFuYWx5c2VyTm9kZSA9IHdpbmRvdy5hdWRpb0NvbnRleHQuY3JlYXRlQW5hbHlzZXIoKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBbmFseXNlciBub2RlIGNvbmZpZ3VyZWQuJyk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYW5hbHlzZXJOb2RlLmZmdFNpemUgPSAyNTY7IC8vIEV4YW1wbGUgc2l6ZSwgYWRqdXN0IGJhc2VkIG9uIG5lZWRzXHJcbiAgICAgICAgICAgICAgICAvLyBGdXJ0aGVyIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBhbmFseXNlck5vZGUgY2FuIGJlIGFkZGVkIGhlcmVcclxuICAgICAgICAgICAgICAgIC8vIFN0YXJ0IHRoZSBhdWRpbyBsZXZlbCBtb25pdG9yaW5nIHByb2Nlc3NcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMudXBkYXRlQXVkaW9MZXZlbCh3aW5kb3cuYW5hbHlzZXJOb2RlKTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuc3RhcnRBdWRpb0xldmVsTW9uaXRvcmluZyh3aW5kb3cuYW5hbHlzZXJOb2RlKVxyXG4gICAgICAgICAgICAgICAgLy8gU3RhcnQgdGhlIGF1ZGlvIGxldmVsIG1vbml0b3JpbmcgcHJvY2Vzc1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBdWRpbyBub2RlcyBhbHJlYWR5IHNldCB1cCBhbmQgY29ubmVjdGVkLicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDb25uZWN0IHRoZSBhdWRpbyBub2RlcyBpbiB0aGUgY29ycmVjdCBvcmRlclxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ29ubmVjdGluZyBzb3VyY2VOb2RlIHRvIGdhaW5Ob2RlLicpO1xyXG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQuX19zb3VyY2VOb2RlLmNvbm5lY3Qod2luZG93LmdhaW5Ob2RlKTsgLy8gU291cmNlIHRvIEdhaW5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Nvbm5lY3RpbmcgZ2Fpbk5vZGUgdG8gY29tcHJlc3Nvck5vZGUuJyk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5nYWluTm9kZS5jb25uZWN0KHdpbmRvdy5jb21wcmVzc29yTm9kZSk7IC8vIEdhaW4gdG8gQ29tcHJlc3NvclxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ29ubmVjdGluZyBjb21wcmVzc29yTm9kZSB0byBhbmFseXNlck5vZGUuJyk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5jb21wcmVzc29yTm9kZS5jb25uZWN0KHdpbmRvdy5hbmFseXNlck5vZGUpOyAvLyBBbmFseXplIHBvc3QtY29tcHJlc3Npb25cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Nvbm5lY3RpbmcgYW5hbHlzZXJOb2RlIHRvIEF1ZGlvQ29udGV4dCBkZXN0aW5hdGlvbi4nKTtcclxuICAgICAgICAgICAgd2luZG93LmFuYWx5c2VyTm9kZS5jb25uZWN0KHdpbmRvdy5hdWRpb0NvbnRleHQuZGVzdGluYXRpb24pOyAvLyBPdXRwdXQgdGhlIGFuYWx5emVkIGF1ZGlvXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBdWRpbyBvdXRwdXQgY29ubmVjdGVkIHRvIGRlc3RpbmF0aW9uLicpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zdGFydEF1ZGlvTGV2ZWxNb25pdG9yaW5nKHdpbmRvdy5hbmFseXNlck5vZGUpOyAvLyBVc2UgdGhlIGdsb2JhbCBhbmFseXNlck5vZGVcclxuXHJcbiAgICAgICAgICAgIC8vIE9wdGlvbmFsbHkgYWRqdXN0IGdhaW4gYmFzZWQgb24gYW5hbHlzaXMgb3Igb3RoZXIgY3JpdGVyaWFcclxuICAgICAgICAgICAgLy8gVGhpcyBjb3VsZCBiZSBkeW5hbWljIGJhc2VkIG9uIHlvdXIgYXBwbGljYXRpb24ncyBuZWVkc1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQWRqdXN0IGdhaW4gYmFzZWQgb24gYW5hbHlzaXMuJyk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRqdXN0R2FpbkJhc2VkT25BbmFseXNpcyh3aW5kb3cuZ2Fpbk5vZGUpO1xyXG5cclxuXHJcblxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGFkanVzdEdhaW5CYXNlZE9uQW5hbHlzaXMoZ2Fpbk5vZGUpIHtcclxuICAgICAgICAgICAgLy8gRXhhbXBsZSBmdW5jdGlvbiB0byBkeW5hbWljYWxseSBhZGp1c3QgZ2FpbiAtIGFkanVzdCBhcyBuZWNlc3NhcnlcclxuICAgICAgICAgICAgLy8gVGhpcyBjYW4gYmUgY2FsbGVkIGhlcmUgZGlyZWN0bHkgb3IgaW4gcmVzcG9uc2UgdG8gc3BlY2lmaWMgYXBwbGljYXRpb24gZXZlbnRzXHJcbiAgICAgICAgICAgIGdhaW5Ob2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUoMS41LCB3aW5kb3cuYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lKTsgLy8gRXhhbXBsZSBhZGp1c3RtZW50XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHYWluIGFkanVzdGVkLicpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHNldEF1ZGlvTGV2ZWwobGV2ZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5hdWRpb0xldmVsID0gbGV2ZWw7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gcmVzdW1lQXVkaW9Db250ZXh0SWZOZWVkZWQoKSB7XHJcbiAgICAgICAgLy8gICAgIC8vIEFzc3VtaW5nIGBhdWRpb0NvbnRleHRgIGlzIGFjY2Vzc2libGUgZ2xvYmFsbHkgb3IgaW5qZWN0ZWQgaW50byB0aGUgc3RvcmVcclxuICAgICAgICAvLyAgICAgaWYgKHdpbmRvdy5hdWRpb0NvbnRleHQgJiYgd2luZG93LmF1ZGlvQ29udGV4dC5zdGF0ZSA9PT0gJ3N1c3BlbmRlZCcpIHtcclxuICAgICAgICAvLyAgICAgICAgIHdpbmRvdy5hdWRpb0NvbnRleHQucmVzdW1lKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgY29uc29sZS5sb2coJ0F1ZGlvQ29udGV4dCByZXN1bWVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIC8vIEFueSBhZGRpdGlvbmFsIGFjdGlvbnMgYWZ0ZXIgcmVzdW1pbmcgY2FuIGdvIGhlcmVcclxuICAgICAgICAvLyAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZXN1bWluZyBBdWRpb0NvbnRleHQ6JywgZXJyb3IpO1xyXG4gICAgICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9LFxyXG5cclxuICAgICAgICAvLyBzZXR1cEF1ZGlvQW5hbHlzZXIodmlkZW9FbGVtZW50KSB7XHJcbiAgICAgICAgLy8gICAgIGlmICghd2luZG93LmF1ZGlvQ29udGV4dCkge1xyXG4gICAgICAgIC8vICAgICAgICAgY29uc29sZS5lcnJvcihcIkF1ZGlvQ29udGV4dCBub3QgaW5pdGlhbGl6ZWQuXCIpO1xyXG4gICAgICAgIC8vICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgICAgLy8gQ2hlY2sgaWYgdGhlIHNvdXJjZU5vZGUgaGFzIGFscmVhZHkgYmVlbiBjcmVhdGVkIHRvIGF2b2lkIHJlLWNyZWF0aW9uXHJcbiAgICAgICAgLy8gICAgIGlmICghdmlkZW9FbGVtZW50Ll9fc291cmNlTm9kZSkge1xyXG4gICAgICAgIC8vICAgICAgICAgdmlkZW9FbGVtZW50Ll9fc291cmNlTm9kZSA9IHdpbmRvdy5hdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFFbGVtZW50U291cmNlKHZpZGVvRWxlbWVudCk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgICAvLyBDcmVhdGUgYW5kIGNvbmZpZ3VyZSBBbmFseXNlck5vZGVcclxuICAgICAgICAvLyAgICAgaWYgKCF2aWRlb0VsZW1lbnQuX19hbmFseXNlck5vZGUpIHtcclxuICAgICAgICAvLyAgICAgICAgIHZpZGVvRWxlbWVudC5fX2FuYWx5c2VyTm9kZSA9IHdpbmRvdy5hdWRpb0NvbnRleHQuY3JlYXRlQW5hbHlzZXIoKTtcclxuICAgICAgICAvLyAgICAgICAgIHZpZGVvRWxlbWVudC5fX2FuYWx5c2VyTm9kZS5mZnRTaXplID0gMjU2OyAvLyBFeGFtcGxlIHNpemUsIGFkanVzdCBiYXNlZCBvbiBuZWVkc1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgICAgLy8gQ29ubmVjdCB0aGUgbm9kZXNcclxuICAgICAgICAvLyAgICAgdmlkZW9FbGVtZW50Ll9fc291cmNlTm9kZS5jb25uZWN0KHZpZGVvRWxlbWVudC5fX2FuYWx5c2VyTm9kZSk7XHJcbiAgICAgICAgLy8gICAgIHZpZGVvRWxlbWVudC5fX2FuYWx5c2VyTm9kZS5jb25uZWN0KHdpbmRvdy5hdWRpb0NvbnRleHQuZGVzdGluYXRpb24pO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgIC8vIFN0YXJ0IHRoZSBhdWRpbyBsZXZlbCBtb25pdG9yaW5nIHByb2Nlc3NcclxuICAgICAgICAvLyAgICAgdGhpcy51cGRhdGVBdWRpb0xldmVsKHZpZGVvRWxlbWVudC5fX2FuYWx5c2VyTm9kZSk7XHJcbiAgICAgICAgLy8gfSxcclxuXHJcbiAgICAgICAgc3RhcnRBdWRpb0xldmVsTW9uaXRvcmluZyhhbmFseXNlck5vZGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0F1ZGlvIGxldmVsIG1vbml0b3Jpbmcgc3RhcnRlZC4nKTtcclxuICAgICAgICAgICAgY29uc3QgYnVmZmVyTGVuZ3RoID0gYW5hbHlzZXJOb2RlLmZyZXF1ZW5jeUJpbkNvdW50O1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhQXJyYXkgPSBuZXcgVWludDhBcnJheShidWZmZXJMZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlQXVkaW9MZXZlbCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGFuYWx5c2VyTm9kZS5nZXRCeXRlRnJlcXVlbmN5RGF0YShkYXRhQXJyYXkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBzdW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWZmZXJMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1bSArPSBkYXRhQXJyYXlbaV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsZXQgYXZlcmFnZSA9IHN1bSAvIGJ1ZmZlckxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGF1ZGlvIGxldmVsIGZvciBkaXNwbGF5IChzY2FsZSBhcyBuZWVkZWQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvTGV2ZWwgPSBhdmVyYWdlICogMTAwIC8gMTI4OyAvLyBBZGp1c3QgYXMgbmVjZXNzYXJ5XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb0FuaW1hdGlvbkZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlQXVkaW9MZXZlbCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB1cGRhdGVBdWRpb0xldmVsKCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgcmVjb25uZWN0QXVkaW9Db250ZXh0SWZOZWVkZWQodmlkZW9Kcykge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGZ1bmN0aW9uIHNob3VsZG4ndCBiZSBuZWVkZWQgYXMgdGhlIE1lZGlhRWxlbWVudFNvdXJjZU5vZGUgY2FuIG9ubHkgYmVcclxuICAgICAgICAgICAgLy8gY3JlYXRlZCBvbmNlIHBlciBtZWRpYSBlbGVtZW50LlxyXG5cclxuICAgICAgICAgICAgLy8gQXNzdW1pbmcgdGhlIHZpZGVvIGVsZW1lbnQgYW5kIGF1ZGlvIGNvbnRleHQgc2V0dXAgYXJlIHNpbWlsYXIgdG8gcHJldmlvdXMgc3RlcHNcclxuICAgICAgICAgICAgY29uc3QgdmlkZW9FbGVtZW50ID0gdmlkZW9Kcy50ZWNoKCkuZWwoKTtcclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIG1lZGlhIGVsZW1lbnQgc291cmNlIG5lZWRzIHRvIGJlIHJlY29ubmVjdGVkXHJcbiAgICAgICAgICAgIGlmICghdmlkZW9FbGVtZW50Ll9fbWVkaWFFbGVtZW50U291cmNlQ29ubmVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VOb2RlID0gd2luZG93LmF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYUVsZW1lbnRTb3VyY2UodmlkZW9FbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIC8vIFJlY29ubmVjdCBzb3VyY2Ugbm9kZSB0byB5b3VyIGF1ZGlvIG5vZGVzIG9yIGRpcmVjdGx5IHRvIHRoZSBkZXN0aW5hdGlvblxyXG4gICAgICAgICAgICAgICAgc291cmNlTm9kZS5jb25uZWN0KHdpbmRvdy5hdWRpb0NvbnRleHQuZGVzdGluYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgdmlkZW9FbGVtZW50Ll9fbWVkaWFFbGVtZW50U291cmNlQ29ubmVjdGVkID0gdHJ1ZTsgLy8gRmxhZyB0byBhdm9pZCBkdXBsaWNhdGUgY29ubmVjdGlvbnNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHNldHVwRHluYW1pY0dhaW5Db250cm9sKHBsYXllcikge1xyXG4gICAgICAgICAgICAvLyBFbnN1cmUgdGhlIGdsb2JhbCBhdWRpb0NvbnRleHQgaXMgdXNlZCBhbmQgbm90IHJlLWluaXRpYWxpemVkXHJcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvQ29udGV4dCA9IHdpbmRvdy5hdWRpb0NvbnRleHRcclxuXHJcbiAgICAgICAgICAgIC8vIEFjY2VzcyB0aGUgYWN0dWFsIEhUTUwgdmlkZW8gZWxlbWVudCBmcm9tIHRoZSBWaWRlby5qcyBwbGF5ZXJcclxuICAgICAgICAgICAgY29uc3QgdmlkZW9FbGVtZW50ID0gcGxheWVyLnRlY2goKS5lbCgpXHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIG1lZGlhIGVsZW1lbnQgc291cmNlIG9ubHkgb25jZSB0byBhdm9pZCBjcmVhdGluZyBtdWx0aXBsZSBjb25uZWN0aW9ucyBmb3IgdGhlIHNhbWUgc291cmNlXHJcbiAgICAgICAgICAgIGlmICghcGxheWVyLl9fbWVkaWFFbGVtZW50U291cmNlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBhdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFFbGVtZW50U291cmNlKHZpZGVvRWxlbWVudClcclxuICAgICAgICAgICAgICAgIHBsYXllci5fX21lZGlhRWxlbWVudFNvdXJjZSA9IHNvdXJjZSAvLyBTdG9yZSBpdCB0byByZXVzZVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIE9wdGlvbmFsbHksIHN0b3JlIGdhaW5Ob2RlIGZvciBsYXRlciB1c2UsIGUuZy4sIGluIHdpbmRvdyBvciBhbm90aGVyIGdsb2JhbCBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2Fpbk5vZGUgPSBhdWRpb0NvbnRleHQuY3JlYXRlR2FpbigpXHJcbiAgICAgICAgICAgICAgICAvLyBDb25maWd1cmUgZ2FpbiBub2RlIGFuZCBjb21wcmVzc29yIGFzIGJlZm9yZVxyXG4gICAgICAgICAgICAgICAgZ2Fpbk5vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSgxLCBhdWRpb0NvbnRleHQuY3VycmVudFRpbWUpIC8vIEV4YW1wbGU6IHN0YXJ0IHdpdGggdW5pdHkgZ2FpblxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXByZXNzb3IgPSBhdWRpb0NvbnRleHQuY3JlYXRlRHluYW1pY3NDb21wcmVzc29yKClcclxuICAgICAgICAgICAgICAgIC8vIENvbXByZXNzb3Igc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgIC8vIENvbm5lY3QgdGhlIGF1ZGlvIG5vZGVzXHJcbiAgICAgICAgICAgICAgICBzb3VyY2UuY29ubmVjdChnYWluTm9kZSlcclxuICAgICAgICAgICAgICAgIGdhaW5Ob2RlLmNvbm5lY3QoY29tcHJlc3NvcilcclxuICAgICAgICAgICAgICAgIGNvbXByZXNzb3IuY29ubmVjdChhdWRpb0NvbnRleHQuZGVzdGluYXRpb24pXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRXhhbXBsZSBmdW5jdGlvbiB0byBhZGp1c3QgZ2FpbiAtIGFkanVzdCBhcyBuZWNlc3NhcnlcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFkanVzdEdhaW5CYXNlZE9uQW5hbHlzaXMoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2Fpbk5vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSgxLjUsIGF1ZGlvQ29udGV4dC5jdXJyZW50VGltZSkgLy8gRXhhbXBsZSBhZGp1c3RtZW50XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYWRqdXN0R2FpbkJhc2VkT25BbmFseXNpcygpXHJcblxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0R5bmFtaWMgZ2FpbiBjb250cm9sIHNldHVwIGNvbXBsZXRlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuXHJcbiAgICAgICAgLy8gc3RhcnRBdWRpb0xldmVsTW9uaXRvcmluZygpIHtcclxuICAgICAgICAvLyAgICAgY29uc3QgdXBkYXRlQXVkaW9MZXZlbCA9ICgpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgIC8vIFlvdXIgZXhpc3RpbmcgbG9naWMuLi5cclxuICAgICAgICAvLyAgICAgICAgIHRoaXMuYXVkaW9BbmltYXRpb25GcmFtZUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZUF1ZGlvTGV2ZWwpO1xyXG4gICAgICAgIC8vICAgICB9O1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgIHVwZGF0ZUF1ZGlvTGV2ZWwoKTtcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIHN0b3BBdWRpb0xldmVsTW9uaXRvcmluZygpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW9BbmltYXRpb25GcmFtZUlkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmF1ZGlvQW5pbWF0aW9uRnJhbWVJZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvQW5pbWF0aW9uRnJhbWVJZCA9IG51bGw7IC8vIFJlc2V0IHRoZSBJRCBhZnRlciBzdG9wcGluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcblxyXG4gICAgICAgIC8vIHRlYzIxOiB0aGlzIGlzbid0IHNldHVwIHlldC4gV2UgY2FuIGFwcGx5IGRpZmZlcmVudCBnYWluIGFuZCBkeW5hbWljc1xyXG4gICAgICAgIC8vIHNldHRpbmdzIHRvIGRpZmZlcmVudCBjaGFubmVscy4uLiBhbmQgY3JlYXRvcnMgY2FuIGFsc28gY2hvb3NlIHNldHRpbmdzXHJcbiAgICAgICAgLy8gZm9yIHRoZWlyIGNvbnRlbnQgdGhhdCBvdmVycmlkZSB0aGUgZGVmYXVsdHMuLi4gKiogRlVUVVJFIEZFQVRVUkUgKipcclxuICAgICAgICAvLyBFeGFtcGxlIGZ1bmN0aW9uIHRvIGFkanVzdCBnYWluIGR5bmFtaWNhbGx5XHJcbiAgICAgICAgYWRqdXN0QXVkaW9Gb3JOZXdWaWRlbyhnYWluVmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gQXNzdW1pbmcgZ2Fpbk5vZGUgaXMgc3RvcmVkIG9yIGFjY2Vzc2libGUgZ2xvYmFsbHkgc2ltaWxhciB0byBhdWRpb0NvbnRleHRcclxuICAgICAgICAgICAgY29uc3QgZ2Fpbk5vZGUgPSB3aW5kb3cuZ2Fpbk5vZGUgLy8gRW5zdXJlIHRoaXMgaXMgc2V0IHVwIGluIHlvdXIgaW5pdGlhbCBhdWRpbyBzZXR1cFxyXG4gICAgICAgICAgICBnYWluTm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKGdhaW5WYWx1ZSwgd2luZG93LmF1ZGlvQ29udGV4dC5jdXJyZW50VGltZSlcclxuICAgICAgICB9LFxyXG5cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gQURESVRJT05BTCBBVURJTyBGVU5DVElPTlNcclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8gRkFERSBJTiBBVURJTyBGUk9NIE1VVEVEXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICAgICAgICBmYWRlSW5BdWRpb0Zyb21NdXRlZCgpe1xyXG4gICAgICAgICAgICBjb25zdCB2aWRlb0pzID0gdmlkZW9qcygnbWFpbi1wbGF5ZXInKVxyXG5cclxuICAgICAgICAgICAgLy8gRW5zdXJlIHRoZSB2aWRlbyBpcyBub3QgbXV0ZWQgdG8gYWxsb3cgdm9sdW1lIGNoYW5nZXMgdG8gdGFrZSBlZmZlY3RcclxuICAgICAgICAgICAgdmlkZW9Kcy5tdXRlZChmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMubXV0ZWQgPSBmYWxzZTsgLy8gVXBkYXRlIHlvdXIgYXBwbGljYXRpb24ncyBzdGF0ZSBhY2NvcmRpbmdseVxyXG5cclxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSB2b2x1bWUgYXQgMCBmb3IgdGhlIGZhZGUtaW4gZWZmZWN0XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50Vm9sdW1lID0gMDtcclxuICAgICAgICAgICAgdmlkZW9Kcy52b2x1bWUoY3VycmVudFZvbHVtZSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtYXhWb2x1bWUgPSAxOyAvLyBEZWZpbmUgdGhlIG1heGltdW0gdm9sdW1lIGFzIDEwMCVcclxuICAgICAgICAgICAgY29uc3QgZmFkZVN0ZXAgPSAwLjA1OyAvLyBEZWZpbmUgdGhlIGluY3JlbWVudCBzdGVwIGZvciB0aGUgZmFkZS1pbiBlZmZlY3RcclxuICAgICAgICAgICAgY29uc3QgZmFkZUludGVydmFsID0gMTAwOyAvLyBEZWZpbmUgdGhlIHRpbWUgaW50ZXJ2YWwgZm9yIGVhY2ggc3RlcCBpbiBtaWxsaXNlY29uZHNcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGZhZGVBdWRpb0luID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRWb2x1bWUgPCBtYXhWb2x1bWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Vm9sdW1lICs9IGZhZGVTdGVwOyAvLyBJbmNyZW1lbnQgdGhlIHZvbHVtZVxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWb2x1bWUgPSBNYXRoLm1pbihjdXJyZW50Vm9sdW1lLCBtYXhWb2x1bWUpOyAvLyBFbnN1cmUgaXQgZG9lcyBub3QgZXhjZWVkIG1heFZvbHVtZVxyXG4gICAgICAgICAgICAgICAgICAgIHZpZGVvSnMudm9sdW1lKGN1cnJlbnRWb2x1bWUpOyAvLyBBcHBseSB0aGUgaW5jcmVtZW50ZWQgdm9sdW1lXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoZmFkZUF1ZGlvSW4pOyAvLyBTdG9wIHRoZSBpbnRlcnZhbCBvbmNlIHRoZSBtYXggdm9sdW1lIGlzIHJlYWNoZWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgZmFkZUludGVydmFsKTtcclxuICAgICAgICB9LFxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBFTkQgQVVESU8gRlVOQ1RJT05TIEFORCBTRVRVUFxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBnZXR0ZXJzOiB7XHJcblxyXG4gICAgfVxyXG5cclxufSlcclxuIl0sIm5hbWVzIjpbImRlZmluZVN0b3JlIiwidmlkZW9qcyIsImluaXRpYWxTdGF0ZSIsInNob3dWb2x1bWVJbmRpY2F0b3IiLCJhdWRpb1NldHVwQ29tcGxldGVkIiwiYXVkaW9BbmltYXRpb25GcmFtZUlkIiwiYXVkaW9MZXZlbCIsInZvbHVtZSIsInVzZUF1ZGlvU3RvcmUiLCJzdGF0ZSIsImFjdGlvbnMiLCJyZXNldCIsIk9iamVjdCIsImFzc2lnbiIsImVuc3VyZUF1ZGlvQ29udGV4dEFuZE5vZGVzUmVhZHkiLCJ2aWRlb0pzIiwiX3RoaXMiLCJ2aWRlb0VsZW1lbnQiLCJ0ZWNoIiwiZWwiLCJjb25zb2xlIiwibG9nIiwid2luZG93IiwiYXVkaW9Db250ZXh0IiwicmVzdW1lIiwidGhlbiIsImNvbmZpZ3VyZUF1ZGlvUHJvY2Vzc2luZ0NoYWluIiwiZXJyb3IiLCJfX3NvdXJjZUNvbm5lY3RlZCIsIkF1ZGlvQ29udGV4dCIsIndlYmtpdEF1ZGlvQ29udGV4dCIsIl9fc291cmNlTm9kZSIsImNyZWF0ZU1lZGlhRWxlbWVudFNvdXJjZSIsIl9fc291cmNlTm9kZU5lZWRzUmVjb25uZWN0IiwiZ2Fpbk5vZGUiLCJjcmVhdGVHYWluIiwiZ2FpbiIsInNldFZhbHVlQXRUaW1lIiwiY3VycmVudFRpbWUiLCJjb21wcmVzc29yTm9kZSIsImNyZWF0ZUR5bmFtaWNzQ29tcHJlc3NvciIsInRocmVzaG9sZCIsImtuZWUiLCJyYXRpbyIsImF0dGFjayIsInJlbGVhc2UiLCJhbmFseXNlck5vZGUiLCJjcmVhdGVBbmFseXNlciIsImZmdFNpemUiLCJjb25uZWN0IiwiZGVzdGluYXRpb24iLCJzdGFydEF1ZGlvTGV2ZWxNb25pdG9yaW5nIiwiYWRqdXN0R2FpbkJhc2VkT25BbmFseXNpcyIsInNldEF1ZGlvTGV2ZWwiLCJsZXZlbCIsIl90aGlzMiIsImJ1ZmZlckxlbmd0aCIsImZyZXF1ZW5jeUJpbkNvdW50IiwiZGF0YUFycmF5IiwiVWludDhBcnJheSIsInVwZGF0ZUF1ZGlvTGV2ZWwiLCJnZXRCeXRlRnJlcXVlbmN5RGF0YSIsInN1bSIsImkiLCJhdmVyYWdlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicmVjb25uZWN0QXVkaW9Db250ZXh0SWZOZWVkZWQiLCJfX21lZGlhRWxlbWVudFNvdXJjZUNvbm5lY3RlZCIsInNvdXJjZU5vZGUiLCJzZXR1cER5bmFtaWNHYWluQ29udHJvbCIsInBsYXllciIsIl9fbWVkaWFFbGVtZW50U291cmNlIiwic291cmNlIiwiY29tcHJlc3NvciIsInN0b3BBdWRpb0xldmVsTW9uaXRvcmluZyIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwiYWRqdXN0QXVkaW9Gb3JOZXdWaWRlbyIsImdhaW5WYWx1ZSIsImZhZGVJbkF1ZGlvRnJvbU11dGVkIiwibXV0ZWQiLCJjdXJyZW50Vm9sdW1lIiwibWF4Vm9sdW1lIiwiZmFkZVN0ZXAiLCJmYWRlSW50ZXJ2YWwiLCJmYWRlQXVkaW9JbiIsInNldEludGVydmFsIiwiTWF0aCIsIm1pbiIsImNsZWFySW50ZXJ2YWwiLCJnZXR0ZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./resources/js/Stores/AudioStore.js\n");

/***/ })

}]);