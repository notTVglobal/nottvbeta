/*! For license information please see 4714.js.LICENSE.txt */
"use strict";(self.webpackChunknottvbeta=self.webpackChunknottvbeta||[]).push([[4714,473],{28664:(e,t,r)=>{r.d(t,{q:()=>f});var n=r(29726),o=r(74353),a=r.n(o),i=r(80473),l=r(7447),c=r(20715);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(){u=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:_(e,r,l)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var p="suspendedStart",h="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function x(){}var E={};d(E,i,(function(){return this}));var k=Object.getPrototypeOf,N=k&&k(k(O([])));N&&N!==r&&n.call(N,i)&&(E=N);var S=x.prototype=b.prototype=Object.create(E);function V(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,a,i,l){var c=m(e[o],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==s(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function _(t,r,n){var o=p;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=m(t,r,n);if("normal"===s.type){if(o=n.done?v:h,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=m(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function B(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function O(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(s(t)+" is not iterable")}return w.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},V(C.prototype),d(C.prototype,l,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new C(f(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},V(S),d(S,c,"Generator"),d(S,i,(function(){return this})),d(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function d(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function f(){var e=(0,i.useChannelPlaylistStore)(),t=(0,l.useNotificationStore)(),r=(0,c.useUserStore)(),o=(0,n.ref)(r.isSmallScreen),s=(0,n.ref)(0),f=(0,n.ref)(""),m=function(){var t,r=(t=u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("next_playlist"!==e.repeat_mode||0!==e.playlists.length){t.next=3;break}return t.next=3,e.fetchPlaylists();case 3:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){d(a,n,o,i,l,"next",e)}function l(e){d(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return{store:e,notificationStore:t,userStore:r,isSmallScreen:o,selectedGapDuration:s,startDateTime:f,fetchSchedules:function(){e.fetchSchedules()},getListItemClass:function(e,t){return t?o.value?"flex flex-col p-2 border-b border-gray-200 space-y-2 bg-gray-100":"p-4 space-y-2 bg-gray-100":o.value?"flex flex-col p-2 border-b border-gray-200 space-y-2":"p-4 space-y-2 ".concat(e?"bg-red-100":"")},clearStartDateTime:function(){e.startTime=""},setStartDateTimeNow:function(){e.startTime=a()().format("YYYY-MM-DDTHH:mm")},clearEndDateTime:function(){e.endTime=""},setEndDateTimeNow:function(){e.endTime=a()().format("YYYY-MM-DDTHH:mm")},removeItem:function(t){e.removeItem(t)},addItem:function(t){e.addItem(t)},clearRemovedItems:function(){e.clearRemovedItems()},resolveConflicts:function(){e.resolveConflicts()},openAddContentModal:function(t){s.value=t.duration_minutes,e.showModal=!0,f.value=t.start_dateTime,console.log("Opening modal with startDateTime:",f.value)},closeModal:function(){e.showModal=!1},fetchPlaylistsIfNeeded:m,validateTimes:function(){return a()(e.startTime).isSameOrAfter(a()(e.endTime))?(t.setGeneralServiceNotification("Invalid Date Time","End time must be after start time."),!1):e.conflictCount>0?(t.setGeneralServiceNotification("Conflicts Present","Please resolve conflicts before proceeding."),!1):e.gapCount>0?(t.setGeneralServiceNotification("Gaps Present","Please fill gaps before proceeding."),!1):0!==e.scheduleItems.length||(t.setGeneralServiceNotification("No Schedule Items","Please add schedule items before proceeding."),!1)}}}},80473:(e,t,r)=>{r.r(t),r.d(t,{useChannelPlaylistStore:()=>B});var n=r(38839),o=r(74353),a=r.n(o),i=r(88569),l=r.n(i),c=r(83826),s=r.n(c),u=r(8906),d=r.n(u),f=r(98867),m=r.n(f),p=r(7447),h=r(20715),y=r(3735),v=r(92995);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return E(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(){V=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:_(e,r,l)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",m="suspendedYield",p="executing",h="completed",y={};function v(){}function b(){}function w(){}var x={};s(x,i,(function(){return this}));var E=Object.getPrototypeOf,k=E&&E(E(O([])));k&&k!==r&&n.call(k,i)&&(x=k);var N=w.prototype=v.prototype=Object.create(x);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,a,i,l){var c=d(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==g(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function _(t,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(t,r,n);if("normal"===s.type){if(o=n.done?h:m,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function B(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function O(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(g(t)+" is not iterable")}return b.prototype=w,o(N,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=s(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,s(e,c,"GeneratorFunction")),e.prototype=Object.create(N),e},t.awrap=function(e){return{__await:e}},S(C.prototype),s(C.prototype,l,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new C(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(N),s(N,c,"Generator"),s(N,i,(function(){return this})),s(N,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function C(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){C(a,n,o,i,l,"next",e)}function l(e){C(a,n,o,i,l,"throw",e)}i(void 0)}))}}a().extend(s()),a().extend(l()),a().extend(d()),a().extend(m());var T=function(){return{playlists:[],selectedPlaylist:null,scheduleItems:[],gaps:[],startTime:a()().format("YYYY-MM-DDTHH:mm"),endTime:a()().add(24,"hour").format("YYYY-MM-DDTHH:mm"),contentItems:[],contentFetched:!1,currentPage:1,totalPages:1,searchQuery:"",showModal:!1,loading:!1,loadingSchedules:!1,processing:!1,error:null,id:null,name:"",description:"",url:"",type:"regular",priority:1,repeat_mode:"repeat_all",next_playlist_id:null}},B=(0,n.nY)("channelPlaylistStore",{state:T,actions:{reset:function(){Object.assign(this,T())},openAddContentModal:function(){this.showModal=!0},closeAddContentModal:function(){this.showModal=!1},fetchPlaylists:function(){var e=this;return _(V().mark((function t(){var r,n,o,a;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,axios.get("/admin/channel-playlist/get-playlists");case 4:r=t.sent,e.playlists=r.data.playlists,n=r.data,o=n.message,a=n.status,(0,p.useNotificationStore)().setToastNotification(o,a),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(1),e.error=t.t0.response?t.t0.response.data.message:t.t0.message,(0,p.useNotificationStore)().setToastNotification(e.error,"error");case 16:return t.prev=16,e.loading=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[1,11,16,19]])})))()},createPlaylist:function(e){var t=this;return _(V().mark((function r(){var n;return V().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.validateScheduleItems()){r.next=2;break}return r.abrupt("return",!1);case 2:return t.loading=!0,r.prev=3,r.next=6,axios.post("/channelPlaylists",N(N({},e),{},{scheduleItems:t.getValidScheduleItems()}));case 6:return n=r.sent,t.playlists.push(n.data.playlist),t.showNotification(n.data),t.reset(),r.abrupt("return",!0);case 13:return r.prev=13,r.t0=r.catch(3),t.handleError(r.t0),r.abrupt("return",!1);case 17:return r.prev=17,t.loading=!1,r.finish(17);case 20:case"end":return r.stop()}}),r,null,[[3,13,17,20]])})))()},updatePlaylist:function(e){var t=this;return _(V().mark((function r(){var n,o,a,i;return V().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=(0,y.useAdminStore)(),e.scheduleItems=t.scheduleItems,t.validateScheduleItems(e.scheduleItems)){r.next=5;break}return console.error("Invalid schedule items"),r.abrupt("return",!1);case 5:return t.loading=!0,r.prev=6,r.next=9,axios.put("/channelPlaylists/".concat(e.id),e);case 9:return o=r.sent,-1!==(a=t.playlists.findIndex((function(t){return t.id===e.id})))&&(t.playlists[a]=o.data.playlist),-1!==(i=n.items.findIndex((function(t){return t.id===e.id})))&&(n.items[i]=N(N({},o.data.playlist),{},{playlist_items:t.scheduleItems})),t.showNotification(o.data),document.getElementById("updateChannelPlaylistModal").close(),t.clearError(),r.abrupt("return",!0);case 20:return r.prev=20,r.t0=r.catch(6),t.handleError(r.t0),r.abrupt("return",!1);case 24:return r.prev=24,t.loading=!1,r.finish(24);case 27:case"end":return r.stop()}}),r,null,[[6,20,24,27]])})))()},validateScheduleItems:function(){var e=(0,p.useNotificationStore)();if(this.scheduleItems.some((function(e){return e.conflict})))return e.setGeneralServiceNotification("Conflict Detected","There are conflicts in the schedule items. Please resolve them before proceeding."),!1;for(var t=this.scheduleItems.filter((function(e){return!e.removed&&"gap"!==e.type})).sort((function(e,t){return a()(e.start_dateTime).isBefore(a()(t.start_dateTime))?-1:1})),r=0;r<t.length-1;r++)if(a()(t[r].end_dateTime).isBefore(a()(t[r+1].start_dateTime)))return e.setGeneralServiceNotification("Gap Detected","There are gaps in the schedule items. Please ensure there are no gaps before proceeding."),!1;return!0},getValidScheduleItems:function(){return this.scheduleItems.filter((function(e){return!e.removed&&"gap"!==e.type})).sort((function(e,t){return a()(e.start_dateTime).isBefore(a()(t.start_dateTime))?-1:1}))},showNotification:function(e){var t=e.message,r=e.status;(0,p.useNotificationStore)().setToastNotification(t,r)},handleError:function(e){var t=(0,p.useNotificationStore)(),r=e.response?e.response.data.message:e.message,n=e.response&&e.response.data.details?e.response.data.details:"";if("string"==typeof n)try{n=JSON.parse(n)}catch(e){n={details:n}}for(var o="<ul>",a=0,i=Object.entries(n);a<i.length;a++){var l=w(i[a],2),c=l[0],s=l[1],u=Array.isArray(s)?s.join(", "):s;o+="<li><strong>".concat(c,":</strong> ").concat(u,"</li>")}o+="</ul>",t.setGeneralServiceNotification("Validation Error","".concat(r,"\n").concat(o)),this.error=r},setPlaylistData:function(e){console.log("playlist:",e);var t=(0,h.useUserStore)(),r=a().utc(e.start_dateTime).tz(t.timezone).format("YYYY-MM-DDTHH:mm"),n=a().utc(e.end_dateTime).tz(t.timezone).format("YYYY-MM-DDTHH:mm");this.id=e.id,this.name=e.name,this.description=e.description,this.url=e.url,this.type=e.type,this.priority=e.priority,this.repeat_mode=e.repeat_mode,this.next_playlist_id=e.next_playlist_id,this.startTime=r,this.endTime=n,console.log("playlist.playlist_items:",e.playlist_items),this.scheduleItems=e.playlist_items.filter((function(e){return console.log("Filtering item:",e),null!=e})).map((function(e){var t={id:e.id,content_id:e.content_id,content_type:e.content_type,order:e.order,media_type:e.media_type,source_path:e.source_path,source_type:e.source_type,is_live:e.is_live,is_scheduled:e.is_scheduled,current_viewers_count:e.current_viewers_count,max_viewers_count:e.max_viewers_count,additional_sources:e.additional_sources,custom_playback_options:e.custom_playback_options,metadata:e.metadata,has_played:e.has_played,start_dateTime:e.start_dateTime,end_dateTime:e.end_dateTime,duration_minutes:e.duration_minutes,type:e.type,content:e.content};return console.log("Mapped item:",t),t})),console.log("this.scheduleItems:",this.scheduleItems)},fetchSchedules:function(){var e=this;return _(V().mark((function t(){var r,n,o,a,i,l;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loadingSchedules=!0,e.clearError(),r=(0,p.useNotificationStore)(),e.startTime&&e.endTime){t.next=7;break}return r.setGeneralServiceNotification("Start and End Times Required","Please check the schedule start and end times."),e.loadingSchedules=!1,t.abrupt("return");case 7:return t.prev=7,t.next=10,axios.get("/api/schedules",{params:{startTime:e.startTimeUTC,endTime:e.endTimeUTC}});case 10:return o=t.sent,(n=e.scheduleItems).push.apply(n,b(o.data.items.map((function(e){return N(N({},e),{},{removed:!1,is_scheduled:!0})})))),a=o.data,i=a.message,l=a.status,r.setToastNotification(i,l),e.updateConflicts(),e.loadingSchedules=!1,t.abrupt("return",o.data);case 19:throw t.prev=19,t.t0=t.catch(7),e.error=t.t0.response?t.t0.response.data.message:t.t0.message,r.setToastNotification(e.error,"error"),e.loadingSchedules=!1,t.t0;case 25:case"end":return t.stop()}}),t,null,[[7,19]])})))()},removeItem:function(e){var t=this.scheduleItems.find((function(t){return t.id===e}));t&&(t.removed=!0,this.scheduleItems=b(this.scheduleItems),this.updateConflicts()),this.clearError()},addItem:function(e){var t=this.scheduleItems.find((function(t){return t.id===e}));t&&(t.removed=!1,this.scheduleItems=b(this.scheduleItems),this.updateConflicts()),this.clearError()},removeAllItems:function(){this.scheduleItems=[],this.clearError()},clearRemovedItems:function(){this.scheduleItems=this.scheduleItems.filter((function(e){return!e.removed})),this.clearError(),this.recalculateIndexes()},recalculateIndexes:function(){this.scheduleItems=this.scheduleItems.map((function(e,t){return N(N({},e),{},{index:t})}))},updateConflicts:function(){var e=this.scheduleItems.filter((function(e){return!e.removed}));e.sort((function(e,t){return a()(e.start_dateTime).isBefore(a()(t.start_dateTime))?-1:1}));for(var t=0;t<e.length;t++){e[t].conflict=!1}for(var r=0;r<e.length;r++)for(var n=e[r],o=r+1;o<e.length;o++){var i=e[o];a()(n.start_dateTime).isBefore(a()(i.end_dateTime))&&a()(n.end_dateTime).isAfter(a()(i.start_dateTime))&&(n.conflict=!0,i.conflict=!0)}},selectPlaylist:function(e){this.selectedPlaylist=e},removePlaylist:function(e){v.QB.delete(route("channelPlaylists.destroy",{channelPlaylist:e}))},clearError:function(){this.error=null},resolveConflicts:function(){var e,t=this;this.processing=!0;do{e=!1;for(var r,n=this.scheduleItems.filter((function(e){return!e.removed})),o=function(){var r=n[i];if(!r.conflict)return 0;for(var o,l=function(){var o=n[c];if(o.removed)return 0;var i=a()(r.start_dateTime),l=a()(o.end_dateTime),s=a()(o.start_dateTime);return i.isSame(s)||i.isBefore(l)&&!i.isSame(l)?r.priority>o.priority?(t.scheduleItems=t.scheduleItems.map((function(e){return e.id===r.id?N(N({},e),{},{removed:!0}):e})),e=!0,1):r.priority<o.priority?(t.scheduleItems=t.scheduleItems.map((function(e){return e.id===o.id?N(N({},e),{},{removed:!0}):e})),e=!0,1):a()(r.created_at).isAfter(a()(o.created_at))?(t.scheduleItems=t.scheduleItems.map((function(e){return e.id===r.id?N(N({},e),{},{removed:!0}):e})),e=!0,1):(t.scheduleItems=t.scheduleItems.map((function(e){return e.id===o.id?N(N({},e),{},{removed:!0}):e})),e=!0,1):void 0},c=0;c<i&&(0===(o=l())||1!==o);c++);return e?1:void 0},i=1;i<n.length&&(0===(r=o())||1!==r);i++);}while(e);this.updateConflicts(),this.processing=!1},insertGaps:function(){this.clearError();var e=this.scheduleItems.filter((function(e){return!e.removed})).map((function(e){return N(N({},e),{},{start:a()(e.start_dateTime),end:a()(e.end_dateTime)})}));this.gaps=[],0===e.length?this.gaps.push({type:"gap",start_dateTime:a().utc(this.startTimeUTC).toISOString(),end_dateTime:a().utc(this.endTimeUTC).toISOString(),duration_minutes:a()(this.endTimeUTC).diff(a()(this.startTimeUTC),"minute"),id:"gap-".concat(a().utc(this.startTimeUTC).toISOString(),"-").concat(a().utc(this.endTimeUTC).toISOString()),start:a().utc(this.startTimeUTC),end:a().utc(this.endTimeUTC)}):(this.checkForGapBeforeFirstItem(e),this.checkForGapsBetweenItems(e),this.checkForGapAfterLastItem(e)),this.scheduleItems=[].concat(b(e),b(this.gaps)).sort((function(e,t){return e.start.isBefore(t.start)?-1:1}))},checkForGapBeforeFirstItem:function(e){if(e.length>0&&a().utc(this.startTimeUTC).isBefore(e[0].start)){var t=a().utc(this.startTimeUTC),r=e[0].start,n=r.diff(t,"minute");this.gaps.push({type:"gap",start_dateTime:t.toISOString(),end_dateTime:r.toISOString(),duration_minutes:n,id:"gap-".concat(t.toISOString(),"-").concat(r.toISOString()),start:t,end:r})}},checkForGapsBetweenItems:function(e){for(var t=0;t<e.length-1;t++){var r=e[t],n=e[t+1],o=r.end,a=n.start;if(o.isBefore(a)){var i=a.diff(o,"minute");this.gaps.push({type:"gap",start_dateTime:o.toISOString(),end_dateTime:a.toISOString(),duration_minutes:i,id:"gap-".concat(o.toISOString(),"-").concat(a.toISOString()),start:o,end:a})}}},checkForGapAfterLastItem:function(e){if(e.length>0){var t=e[e.length-1].end,r=a().utc(this.endTimeUTC);if(t.isBefore(r)){var n=t,o=r,i=o.diff(n,"minute");this.gaps.push({type:"gap",start_dateTime:n.toISOString(),end_dateTime:o.toISOString(),duration_minutes:i,id:"gap-".concat(n.toISOString(),"-").concat(o.toISOString()),start:n,end:o})}}},fetchContent:function(e,t,r){var n=arguments,o=this;return _(V().mark((function i(){var l,c,s,u,d,f,m,h;return V().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return l=n.length>3&&void 0!==n[3]?n[3]:1,c=n.length>4&&void 0!==n[4]?n[4]:"",o.loading=!0,o.clearError(),s=(0,p.useNotificationStore)(),u=a()(r).tz(a().tz.guess()).utc().format("YYYY-MM-DDTHH:mm:ss[Z]"),i.prev=6,i.next=9,axios.get("/admin/channel-playlist/get-content",{params:{type:e,maxDurationMinutes:t,start_dateTime:u,page:l,search:c}});case 9:d=i.sent,console.log("Response data:",d.data),o.contentItems=d.data.items,o.currentPage=d.data.current_page,o.totalPages=d.data.total_pages,o.contentFetched=!0,f=d.data,m=f.message,h=f.status,s.setToastNotification(m,h),i.next=24;break;case 19:i.prev=19,i.t0=i.catch(6),o.error=i.t0.response?i.t0.response.data.message:i.t0.message,console.error("Error fetching content:",o.error),s.setToastNotification(o.error,"error");case 24:return i.prev=24,o.loading=!1,i.finish(24);case 27:case"end":return i.stop()}}),i,null,[[6,19,24,27]])})))()},addContentToSchedule:function(e){this.clearError(),this.scheduleItems.push(e),this.scheduleItems=b(this.scheduleItems),this.removeGap(e.start_dateTime),this.insertGaps()},removeGap:function(e){this.scheduleItems=this.scheduleItems.filter((function(t){return!("gap"===t.type&&t.start_dateTime===e)}))},resetContent:function(){this.contentItems=[],this.contentFetched=!1,this.error=null,this.currentPage=1,this.totalPages=1,this.searchQuery=""},setSearchQuery:function(e){this.searchQuery=e},setPage:function(e){this.currentPage=e}},getters:{startTimeUTC:function(e){return a()(e.startTime).utc().format("YYYY-MM-DDTHH:mm:ss[Z]")},endTimeUTC:function(e){return a()(e.endTime).utc().format("YYYY-MM-DDTHH:mm:ss[Z]")},scheduleItemsWithUserTimezone:function(e){var t=(0,h.useUserStore)(),r=e.scheduleItems.map((function(e){return N(N({},e),{},{start_dateTime:a()(e.start_dateTime).tz(t.timezone).format("YYYY-MM-DDTHH:mm:ssZ"),end_dateTime:a()(e.end_dateTime).tz(t.timezone).format("YYYY-MM-DDTHH:mm:ssZ")})}));return r.sort((function(e,t){return a()(e.start_dateTime).isBefore(a()(t.start_dateTime))?-1:1})),r},hasRemovedItems:function(e){return e.scheduleItems.some((function(e){return e.removed}))},conflictCount:function(e){return e.scheduleItems.filter((function(e){return e.conflict&&!e.removed})).length},gapCount:function(e){var t=e.scheduleItems.filter((function(e){return!e.removed&&"gap"!==e.type})).map((function(e){return{start:a()(e.start_dateTime),end:a()(e.end_dateTime),conflict:e.conflict}})),r=0;if(0===t.length)return 1;a().utc(e.startTimeUTC).isBefore(t[0].start)&&r++;for(var n=0;n<t.length-1;n++){var o=t[n],i=t[n+1];o.conflict||i.conflict||!o.end.isBefore(i.start)||r++}return a().utc(e.endTimeUTC).isAfter(t[t.length-1].end)&&r++,r}}})},2435:(e,t,r)=>{r.d(t,{c:()=>c});var n=r(29726),o=r(20715),a=r(20973),i=r(58088),l=r(92995);function c(e){var t=(0,o.useUserStore)(),r=(0,a.useAppSettingStore)(),c=(0,i.useVideoPlayerStore)();r.currentPage=e,r.showFlashMessage=!0,r.pageIsHidden=!1,t.isMobile||window.innerWidth<1024||r.fullPage?r.ott=0:(0===r.ott&&(r.ott=4),r.showOttButtons=!0),c.makeVideoTopRight(),r.pageReload&&(r.pageReload=!1,r.pageWasReloaded=!0,window.location.reload()),l.QB.on("navigate",(function(e){t.isMobile||window.innerWidth<1024||r.fullPage?r.ott=0:0===r.ott&&(r.ott=4),""!==window.location.search&&!r.shouldScrollToTop||requestAnimationFrame((function(){var e=document.getElementById("topDiv");e?e.scrollIntoView({behavior:"auto"}):window.scrollTo(0,0)})),r.shouldScrollToTop=!1})),r.setPrevUrl(),r.showOttButtons=!0,r.noLayout=!1,(0,n.watch)((function(){return r.isSmallScreen}),(function(e){r.ott=e?0:4}),{immediate:!0})}},55504:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(54991),o=r.n(n),a=r(76314),i=r.n(a)()(o());i.push([e.id,"#tooltip[data-v-d34cc41c]{background:#333;border-radius:4px;color:#fff;font-size:13px;font-weight:700;padding:4px 8px}[data-v-d34cc41c] .popper{background:#333;border-radius:20px;color:#fff;font-weight:700;padding:2px;text-transform:uppercase}[data-v-d34cc41c] .popper #arrow:before{background:#333}[data-v-d34cc41c] .popper:hover,[data-v-d34cc41c] .popper:hover>#arrow:before{background:#333}","",{version:3,sources:["webpack://./resources/js/Components/Pages/Admin/Channels/AdminChannelPopperContent.vue"],names:[],mappings:"AASA,0BACE,eAAgB,CAKhB,iBAAkB,CAJlB,UAAY,CAGZ,cAAe,CAFf,eAAiB,CACjB,eAGF,CAEA,0BACE,eAAmB,CAEnB,kBAAmB,CACnB,UAAW,CACX,eAAiB,CAHjB,WAAY,CAIZ,wBACF,CAEA,wCACE,eACF,CAEA,8EAEE,eACF",sourcesContent:['<template>\n  <Popper hover openDelay="50" closeDelay="50" offset-skid="0" offset-distance="0" placement="bottom">\n    <template #content>\n      <slot name="content"></slot> \x3c!-- Dynamic content --\x3e\n    </template>\n    <slot name="activator"></slot>\n  </Popper>\n</template>\n<style scoped>\n#tooltip {\n  background: #333;\n  color: white;\n  font-weight: bold;\n  padding: 4px 8px;\n  font-size: 13px;\n  border-radius: 4px;\n}\n\n:deep(.popper) {\n  background: #333333;\n  padding: 2px;\n  border-radius: 20px;\n  color: #fff;\n  font-weight: bold;\n  text-transform: uppercase;\n}\n\n:deep(.popper #arrow::before) {\n  background: #333333;\n}\n\n:deep(.popper:hover),\n:deep(.popper:hover > #arrow::before) {\n  background: #333333;\n}\n</style>'],sourceRoot:""}]);const l=i},20845:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(54991),o=r.n(n),a=r(76314),i=r.n(a)()(o());i.push([e.id,".source-selector[data-v-c559967c]{//margin-top:.5rem}.is-priority[data-v-c559967c]{color:#000;font-weight:300}","",{version:3,sources:["webpack://./resources/js/Components/Pages/Admin/Channels/SourceSelector.vue"],names:[],mappings:"AA8EA,kCAEE,kBACF,CAMA,8BAEE,UAAY,CACZ,eACF",sourcesContent:['<template>\n  \x3c!--  <div class="source-selector" :class="{\'is-priority\': source?.isPriority, \'is-playing\': source?.isPlaying, \'is-fallback\': source?.isFallback, \'has-error\': source?.hasError}">--\x3e\n  <div\n      :class="[\'source-selector\', {\'is-priority\': source?.playback_priority_type, \'is-playing\': source?.isPlaying, \'is-fallback\': source?.isFallback, \'has-error\': source?.hasError}]">\n    <div>\n      \x3c!-- Display the source status here (playing, fallback, error) --\x3e\n      <div v-if="source?.playback_priority_type === sourceType" class="btn btn-xs mt-1 text-white bg-green-500 hover:bg-green-500">Priority</div>\n      <span>\n\n      </span>\n      \x3c!-- Icon or button to set this source as priority --\x3e\n      \x3c!--      <button class="btn btn-xs" v-if="!source?.playback_priority_type" @click="setPriority">Set as Priority</button>--\x3e\n    </div>\n  </div>\n\n  \x3c!--  <div v-if="source?.playback_priority_type === \'mistStream\'">--\x3e\n  \x3c!--    <button class="btn btn-xs hover:bg-green-500 bg-green-500">Priority</button>--\x3e\n  \x3c!--  </div>--\x3e\n\n  <button v-if="source?.playback_priority_type !== sourceType" class="btn btn-xs mt-1"\n          @click="setPriority">Set as Priority\n  </button>\n\n\n  <dialog :id="`confirmPriorityChangeModal`" class="modal">\n    <div class="modal-box">\n      <h3 class="font-bold text-lg">Confirm Selection for {{ adminStore.sourceSelector?.source?.name }}</h3>\n      <p class="py-4">\n        Are you sure you want to change priority to <span class="font-bold">{{ adminStore.sourceSelector?.sourceType }}</span>?\n      </p>\n      <div class="modal-action">\n        <button class="btn" @click="confirmPriorityChange">Confirm</button>\n        <button class="btn" onclick="document.getElementById(\'confirmPriorityChangeModal\').close()">Cancel</button>\n      </div>\n    </div>\n  </dialog>\n\n\n</template>\n\n<script setup>\nimport { useAdminStore } from \'@/Stores/AdminStore\'\nimport { ref } from \'vue\'\n\nconst adminStore = useAdminStore()\n\nlet props = defineProps([\n  \'source\',\n  \'sourceType\',\n])\n\n// const setPriority = (sourceType) => {\n//   emit(\'change\', { sourceType, priority: true });\n//   // Implement function to make API call to update the backend\n// };\n\n\nconst setPriority = () => {\nadminStore.sourceSelector.source = props.source\nadminStore.sourceSelector.sourceType = props.sourceType\n  document.getElementById(\'confirmPriorityChangeModal\').showModal() // Open the modal for confirmation\n}\n\nconst confirmPriorityChange = async () => {\n  await adminStore.setPlaybackPriorityType(adminStore.sourceSelector.source, adminStore.sourceSelector.sourceType)\n  document.getElementById(\'confirmPriorityChangeModal\').close() // Close the modal\n\n}\n\n// const setPriority = async () => {\n//   // Directly call the store action to update the priority.\n//   await adminStore.setPlaybackPriorityType(props.source, props.sourceType);\n//   // No need to emit an event to the parent component.\n// };\n\n<\/script>\n\n<style scoped>\n.source-selector {\n  /* Base styles */\n  //margin-top: 0.5rem;\n}\n\n.is-playing {\n  /* Styles for playing status */\n}\n\n.is-priority {\n  /* Styles for isPriority status */\n  color: black;\n  font-weight: 300;\n}\n\n.is-fallback {\n  /* Styles for fallback status */\n}\n\n.has-error {\n  /* Styles for error status */\n}\n\n</style>\n'],sourceRoot:""}]);const l=i},90948:(e,t,r)=>{r.r(t),r.d(t,{default:()=>O});var n=r(29726),o=r(92995),a=r(44411),i=r(3735);r(80877),r(44540);function l(){l=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:_(e,r,l)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",h="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function x(){}var E={};u(E,i,(function(){return this}));var k=Object.getPrototypeOf,N=k&&k(k(O([])));N&&N!==r&&n.call(N,i)&&(E=N);var S=x.prototype=b.prototype=Object.create(E);function V(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,a,i,l){var c=m(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==f(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function _(t,r,n){var o=p;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=m(t,r,n);if("normal"===s.type){if(o=n.done?v:h,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=m(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function B(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function O(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(f(t)+" is not iterable")}return w.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=u(x,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,u(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},V(C.prototype),u(C.prototype,c,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new C(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},V(S),u(S,s,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function c(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,l,"next",e)}function l(e){c(a,n,o,i,l,"throw",e)}i(void 0)}))}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var m=["id"],p={class:"modal-box w-11/12 max-w-5xl"},h={class:"font-bold text-lg"},y={class:"flex flex-col space-y-2 px-12 mt-6"},v=(0,n.createElementVNode)("label",{class:"block mb-2 uppercase font-bold text-xs dark:text-gray-200",for:"name"},"Stream Name",-1),g=["textContent"],b=(0,n.createElementVNode)("label",{class:"block mt-4 mb-2 uppercase font-bold text-xs dark:text-gray-200",for:"name"},"Source",-1),w=["textContent"],x=(0,n.createElementVNode)("label",{class:"block mt-4 mb-2 uppercase font-bold text-xs dark:text-gray-200",for:"name"},"MIME Type",-1),E=["textContent"],k=(0,n.createElementVNode)("label",{class:"block mt-4 mb-2 uppercase font-bold text-xs dark:text-gray-200",for:"comment"},"Comment",-1),N=["textContent"],S=(0,n.createElementVNode)("label",{class:"block mt-4 mb-2 uppercase font-bold text-xs dark:text-gray-200",for:"metadata"},"Optional Parameters",-1),V=["onUpdate:modelValue"],C=["onUpdate:modelValue"],_=["onClick"],T={class:"flex flex-row justify-center pt-6"},B=["disabled"],L={class:"modal-action"},P=(0,n.createElementVNode)("form",{method:"dialog"},null,-1);const O={__name:"AddOrUpdateMistStreamModal",props:{mistStream:Object,id:String},setup:function(e){var t=(0,a.useChannelStore)(),r=((0,i.useAdminStore)(),e),c=((0,n.ref)(!1),(0,n.ref)([{key:"",value:""}]),(0,n.ref)("")),d=function(){O.metadata.push({key:"",value:""})},O=(0,n.reactive)((0,o.mN)({id:"",name:"",source:"push://",mime_type:"application/vnd.apple.mpegurl",comment:"",metadata:[]}));O.reset(),(0,n.watch)((function(){return t.mistStream}),(function(e){e?(O.id=e.id||"",O.name=e.name||"",c.value=e.name||"",O.source=e.source||"push://",O.mime_type=e.mime_type||"application/vnd.apple.mpegurl",O.comment=e.comment||"",e.metadata&&"object"===f(e.metadata)?O.metadata=Object.entries(e.metadata).map((function(e){var t=u(e,2);return{key:t[0],value:t[1]}})):O.metadata=[{key:"",value:""}]):O.reset()}),{deep:!0,immediate:!0});var I=function(){var e=s(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post(route("mistStream.addOrUpdate",{originalName:c.value}));case 2:A();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function A(){document.getElementById(r.id).close(),t.clearMistStream(),O.reset(),O.clearErrors()}return function(t,r){return(0,n.openBlock)(),(0,n.createElementBlock)("dialog",{id:e.id,class:"modal"},[(0,n.createElementVNode)("div",p,[(0,n.createElementVNode)("h3",h,[(0,n.renderSlot)(t.$slots,"form-title",{},(function(){return[(0,n.createTextVNode)("Default Form Title")]}))]),(0,n.createElementVNode)("div",null,[(0,n.renderSlot)(t.$slots,"form-description",{},(function(){return[(0,n.createTextVNode)("Default Form Description")]}))]),(0,n.createElementVNode)("div",null,[(0,n.createElementVNode)("div",y,[(0,n.createElementVNode)("form",{onSubmit:r[4]||(r[4]=(0,n.withModifiers)((function(){return(0,n.unref)(I)&&(0,n.unref)(I).apply(void 0,arguments)}),["prevent"]))},[v,(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":r[0]||(r[0]=function(e){return(0,n.unref)(O).name=e}),class:"bg-gray-50 border border-gray-400 text-gray-900 text-sm p-2 w-full rounded-lg focus:ring-blue-500 focus:border-blue-500 block",type:"text",name:"name",id:"name",placeholder:"Stream Name..."},null,512),[[n.vModelText,(0,n.unref)(O).name]]),(0,n.unref)(O).errors.name?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,textContent:(0,n.toDisplayString)((0,n.unref)(O).errors.name),class:"text-xs text-red-600 mt-1"},null,8,g)):(0,n.createCommentVNode)("",!0),b,(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":r[1]||(r[1]=function(e){return(0,n.unref)(O).source=e}),class:"bg-gray-50 border border-gray-400 text-gray-900 text-sm p-2 w-full rounded-lg focus:ring-blue-500 focus:border-blue-500 block",type:"text",name:"source",id:"source",placeholder:"Source..."},null,512),[[n.vModelText,(0,n.unref)(O).source]]),(0,n.unref)(O).errors.source?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:1,textContent:(0,n.toDisplayString)((0,n.unref)(O).errors.source),class:"text-xs text-red-600 mt-1"},null,8,w)):(0,n.createCommentVNode)("",!0),x,(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":r[2]||(r[2]=function(e){return(0,n.unref)(O).mime_type=e}),class:"bg-gray-50 border border-gray-400 text-gray-900 text-sm p-2 w-full rounded-lg focus:ring-blue-500 focus:border-blue-500 block",type:"text",name:"mime_type",id:"mime_type",placeholder:"MIME Type..."},null,512),[[n.vModelText,(0,n.unref)(O).mime_type]]),(0,n.unref)(O).errors.mime_type?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:2,textContent:(0,n.toDisplayString)((0,n.unref)(O).errors.mime_type),class:"text-xs text-red-600 mt-1"},null,8,E)):(0,n.createCommentVNode)("",!0),k,(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":r[3]||(r[3]=function(e){return(0,n.unref)(O).comment=e}),class:"bg-gray-50 border border-gray-400 text-gray-900 text-sm p-2 w-full rounded-lg focus:ring-blue-500 focus:border-blue-500 block",type:"text",name:"comment",id:"comment",placeholder:"Comment..."},null,512),[[n.vModelText,(0,n.unref)(O).comment]]),(0,n.unref)(O).errors.comment?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:3,textContent:(0,n.toDisplayString)((0,n.unref)(O).errors.comment),class:"text-xs text-red-600 mt-1"},null,8,N)):(0,n.createCommentVNode)("",!0),S,((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(O).metadata,(function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("div",{key:t,class:"flex items-center"},[(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":function(t){return e.key=t},class:"bg-gray-50 border border-gray-400 text-gray-900 text-sm p-2 mt-2 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Key"},null,8,V),[[n.vModelText,e.key]]),(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":function(t){return e.value=t},class:"bg-gray-50 border border-gray-400 text-gray-900 text-sm p-2 ml-2 mt-2 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Value"},null,8,C),[[n.vModelText,e.value]]),(0,n.createElementVNode)("button",{onClick:(0,n.withModifiers)((function(e){return function(e){O.metadata.splice(e,1)}(t)}),["prevent"]),class:"btn btn-sm ml-2 mt-2"},"Remove",8,_)])})),128)),(0,n.createElementVNode)("button",{onClick:(0,n.withModifiers)(d,["prevent"]),class:"btn btn-sm mt-2"},"Add Metadata"),(0,n.createElementVNode)("div",T,[(0,n.createElementVNode)("button",{type:"submit",class:"btn btn-wide bg-green-500 hover:bg-green-400 text-white",disabled:(0,n.unref)(O).processing},[(0,n.renderSlot)(t.$slots,"button-label",{},(function(){return[(0,n.createTextVNode)("Default Form Title")]}))],8,B)])],32)])]),(0,n.createElementVNode)("div",L,[(0,n.createElementVNode)("button",{class:"btn",onClick:(0,n.withModifiers)(A,["prevent"])},"Cancel"),P])])],8,m)}}}},47212:(e,t,r)=>{r.d(t,{A:()=>g});var n=r(29726),o=r(92995),a=r(20973);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(){l=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:_(e,r,l)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var p="suspendedStart",h="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function x(){}var E={};d(E,c,(function(){return this}));var k=Object.getPrototypeOf,N=k&&k(k(O([])));N&&N!==r&&n.call(N,c)&&(E=N);var S=x.prototype=b.prototype=Object.create(E);function V(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,a,l,c){var s=m(e[o],e,a);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==i(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,l,c)}),(function(e){r("throw",e,l,c)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return r("throw",e,l,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function _(t,r,n){var o=p;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=m(t,r,n);if("normal"===s.type){if(o=n.done?v:h,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=m(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function B(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function O(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(i(t)+" is not iterable")}return w.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},V(C.prototype),d(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new C(f(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},V(S),d(S,u,"Generator"),d(S,c,(function(){return this})),d(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function c(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var s={class:"mx-4 my-4"},u={key:0,class:"alert alert-info mt-4"},d=(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"stroke-current shrink-0 w-6 h-6"},[(0,n.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),f={key:1,class:"alert alert-success mt-4 mx-3"},m=(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[(0,n.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),p={key:2,class:"alert alert-warning mt-4 mx-3"},h=(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[(0,n.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),y={key:3,class:"alert alert-error mt-4 mx-3"},v=(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[(0,n.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1);const g={__name:"Messages",props:{flash:Object},setup:function(e){(0,a.useAppSettingStore)().showFlashMessage=!0;var t=e,r=((0,n.computed)((function(){return{"text-green-700 bg-green-100 dark:bg-green-200 dark:text-green-800":t.flash.success,"text-blue-700 bg-blue-100 dark:bg-blue-200 dark:text-blue-800":t.flash.message,"text-orange-700 bg-orange-100 dark:bg-orange-200 dark:text-orange-800":t.flash.warning,"text-red-700 bg-red-100 dark:bg-red-200 dark:text-red-800":t.flash.error}})),function(){var e,t=(e=l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.QB.post(route("flash.clear"));case 2:o.QB.reload();case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,l,"next",e)}function l(e){c(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}());return function(e,o){return(0,n.openBlock)(),(0,n.createElementBlock)("div",s,[(0,n.unref)(t).flash.message?((0,n.openBlock)(),(0,n.createElementBlock)("div",u,[d,(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(t).flash.message),1),(0,n.createElementVNode)("button",{class:"text-xs ml-12",onClick:r}," Close")])):(0,n.createCommentVNode)("",!0),(0,n.unref)(t).flash.success?((0,n.openBlock)(),(0,n.createElementBlock)("div",f,[m,(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(t).flash.success),1),(0,n.createElementVNode)("button",{class:"text-xs ml-12",onClick:r}," Close")])):(0,n.createCommentVNode)("",!0),(0,n.unref)(t).flash.warning?((0,n.openBlock)(),(0,n.createElementBlock)("div",p,[h,(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(t).flash.warning),1),(0,n.createElementVNode)("button",{class:"text-xs ml-12",onClick:r}," Close")])):(0,n.createCommentVNode)("",!0),(0,n.unref)(t).flash.error?((0,n.openBlock)(),(0,n.createElementBlock)("div",y,[v,(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(t).flash.error),1),(0,n.createElementVNode)("button",{class:"text-xs ml-12",onClick:r}," Close")])):(0,n.createCommentVNode)("",!0)])}}}},90757:(e,t,r)=>{r.d(t,{A:()=>h});var n=r(29726);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={class:"flex justify-between my-3"},s={class:"mb-4 relative"},u={class:"text-3xl font-semibold inline-block"},d={key:0,class:"text-white font-semibold badge badge-success absolute -top-2 -right-10 flex items-center justify-center min-w-[2rem] h-[2rem] rounded-full"},f={key:1,class:"font-semibold badge badge-warning absolute -top-2 -right-20 flex items-center justify-center min-w-[2rem] h-[2rem] rounded-full"},m={class:"flex flex-wrap-reverse justify-end gap-2"},p=(0,n.createElementVNode)("button",{class:"px-4 py-2 text-white bg-blue-600 hover:bg-blue-500 rounded-lg"},"Admin Settings ",-1);const h={__name:"AdminHeader",props:{displayBadges:Boolean,badgePrimaryNumber:Number,badgeSecondaryNumber:Number},setup:function(e){var t=e;(0,n.reactive)(i(i({},{displayBadges:!1}),t));return function(t,r){var o,a,i,l,h=(0,n.resolveComponent)("Link");return(0,n.openBlock)(),(0,n.createElementBlock)("header",null,[(0,n.createElementVNode)("div",c,[(0,n.createElementVNode)("div",s,[(0,n.createElementVNode)("h1",u,[(0,n.renderSlot)(t.$slots,"default")]),e.displayBadges?((0,n.openBlock)(),(0,n.createElementBlock)("span",d,(0,n.toDisplayString)((null!==(o=e.badgePrimaryNumber)&&void 0!==o?o:0)>99?"99+":null!==(a=e.badgePrimaryNumber)&&void 0!==a?a:0),1)):(0,n.createCommentVNode)("",!0),e.displayBadges?((0,n.openBlock)(),(0,n.createElementBlock)("span",f,(0,n.toDisplayString)((null!==(i=e.badgeSecondaryNumber)&&void 0!==i?i:0)>99?"99+":null!==(l=e.badgeSecondaryNumber)&&void 0!==l?l:0),1)):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",null,[(0,n.createElementVNode)("div",m,[(0,n.createVNode)(h,{href:"/admin/settings"},{default:(0,n.withCtx)((function(){return[p]})),_:1})])])])])}}}},59307:(e,t,r)=>{r.d(t,{A:()=>L});var n=r(29726),o=r(80473),a=r(37150),i={class:"modal-box"},l=(0,n.createElementVNode)("h3",{class:"font-bold text-lg mb-2"},"Add Content to Fill Gap",-1),c={class:"form-control mb-2"},s=(0,n.createElementVNode)("label",{class:"label"},[(0,n.createElementVNode)("span",{class:"label-text"},"Select Content Type")],-1),u=[(0,n.createStaticVNode)('<option value="ShowEpisode">Show Episode</option><option value="Movie">Movie</option><option value="NewsStory">News Story</option><option value="OtherContent">Other Content</option><option value="MistStream">Mist Stream</option>',5)],d={class:"form-control mb-4"},f={class:"label"},m={class:"label-text"},p=["disabled"],h={key:0,class:"loading loading-spinner"},y={key:1},v={key:0,class:"text-red-500 mt-2"},g={key:1,class:"mt-6"},b={class:"flex justify-between items-center mb-4"},w={class:"font-semibold text-lg mb-4 text-gray-800"},x={key:0,class:"space-y-4"},E={class:"flex items-center gap-4"},k={class:"text-gray-800 font-medium"},N={key:0,class:"text-gray-600"},S=["onClick"],V={key:1},C=[(0,n.createElementVNode)("p",{class:"text-gray-600"},"No content available.",-1)],_={class:"flex justify-between mt-6"},T=["disabled"],B=["disabled"];const L={__name:"AddContentModal",props:{showModal:Boolean,gapDuration:Number,startDateTime:String},emits:["addContentToGap"],setup:function(e,t){t.emit;var r=e,L=(0,n.ref)("ShowEpisode"),P=(0,o.useChannelPlaylistStore)(),O=(0,n.computed)((function(){return P.contentItems})),I=(0,n.computed)((function(){return P.contentFetched})),A=(0,n.computed)((function(){return P.error})),M=(0,n.computed)((function(){return P.loading})),j=(0,n.computed)((function(){return P.currentPage})),D=(0,n.computed)((function(){return P.totalPages})),G=(0,n.computed)((function(){return P.searchQuery})),F=(0,n.computed)((function(){switch(L.value){case"ShowEpisode":return"Show Episodes";case"Movie":return"Movies";case"NewsStory":return"News Stories";case"OtherContent":return"Other Content";case"MistStream":return"Streams";default:return"Content"}})),Y=function(){P.fetchContent(L.value,r.gapDuration,r.startDateTime,j.value,G.value)},U=function(e){P.setSearchQuery(e.target.value),Y()},z=function(){P.closeAddContentModal(),R()},R=function(){P.resetContent()},H=function(){j.value>1&&(P.setPage(j.value-1),Y())},$=function(){j.value<D.value&&(P.setPage(j.value+1),Y())};return function(t,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["modal",{"modal-open":e.showModal}])},[(0,n.createElementVNode)("div",i,[I.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",g,[(0,n.createElementVNode)("div",b,[(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":r[1]||(r[1]=function(e){return G.value=e}),onInput:U,type:"text",class:"input input-bordered w-3/4",placeholder:"Search content..."},null,544),[[n.vModelText,G.value]]),(0,n.createElementVNode)("button",{onClick:(0,n.withModifiers)(R,["prevent"]),class:"btn btn-secondary"},"Back")]),(0,n.createElementVNode)("h4",w,"Available "+(0,n.toDisplayString)(F.value),1),O.value.length?((0,n.openBlock)(),(0,n.createElementBlock)("ul",x,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(O.value,(function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("li",{key:t,class:"flex items-center justify-between p-4 border rounded-lg bg-gray-50"},[(0,n.createElementVNode)("div",E,[(0,n.createVNode)(a.A,{image:e.content.image,alt:e.content.name,class:(0,n.normalizeClass)("w-16 h-16 object-cover rounded")},null,8,["image","alt"]),(0,n.createElementVNode)("div",null,[(0,n.createElementVNode)("div",k,(0,n.toDisplayString)(e.content.name),1),e.duration_minutes?((0,n.openBlock)(),(0,n.createElementBlock)("div",N,(0,n.toDisplayString)(e.content.duration/60)+" minutes",1)):(0,n.createCommentVNode)("",!0)])]),(0,n.createElementVNode)("button",{onClick:(0,n.withModifiers)((function(t){return r=e,P.addContentToSchedule(r),void z();var r}),["prevent"]),class:"btn btn-sm btn-success"},"Add",8,S)])})),128))])):((0,n.openBlock)(),(0,n.createElementBlock)("div",V,C)),(0,n.createElementVNode)("div",_,[(0,n.createElementVNode)("button",{onClick:(0,n.withModifiers)(H,["prevent"]),disabled:j.value<=1,class:"btn btn-outline"},"Previous",8,T),(0,n.createElementVNode)("button",{onClick:(0,n.withModifiers)($,["prevent"]),disabled:j.value>=D.value,class:"btn btn-outline"},"Next",8,B)])])):((0,n.openBlock)(),(0,n.createElementBlock)("form",{key:0,onSubmit:(0,n.withModifiers)(Y,["prevent"])},[l,(0,n.createElementVNode)("div",c,[s,(0,n.withDirectives)((0,n.createElementVNode)("select",{"onUpdate:modelValue":r[0]||(r[0]=function(e){return L.value=e}),class:"select select-bordered"},u,512),[[n.vModelSelect,L.value]])]),(0,n.createElementVNode)("div",d,[(0,n.createElementVNode)("label",f,[(0,n.createElementVNode)("span",m,"Gap Duration: "+(0,n.toDisplayString)(e.gapDuration)+" minutes",1)])]),(0,n.createElementVNode)("button",{type:"submit",class:"btn btn-primary",disabled:M.value},[(0,n.unref)(P).loading?((0,n.openBlock)(),(0,n.createElementBlock)("span",h)):((0,n.openBlock)(),(0,n.createElementBlock)("span",y,"Retrieve Content"))],8,p),(0,n.createElementVNode)("button",{type:"button",onClick:(0,n.withModifiers)(z,["prevent"]),class:"btn btn-secondary ml-2"},"Cancel"),A.value?((0,n.openBlock)(),(0,n.createElementBlock)("p",v,(0,n.toDisplayString)(A.value),1)):(0,n.createCommentVNode)("",!0)],32))])],2)}}}},76101:(e,t,r)=>{r.d(t,{A:()=>w});var n=r(29726),o=r(28664),a=(0,n.createElementVNode)("label",{for:"name",class:"block font-medium text-gray-700"},"Name:",-1),i=(0,n.createElementVNode)("label",{for:"description",class:"block font-medium text-gray-700"},"Description:",-1),l=(0,n.createElementVNode)("label",{for:"url",class:"block font-medium text-gray-700"},"URL:",-1),c=(0,n.createElementVNode)("label",{for:"type",class:"block font-medium text-gray-700"},"Type:",-1),s=[(0,n.createElementVNode)("option",{value:"regular"},"Regular",-1),(0,n.createElementVNode)("option",{value:"event"},"Event",-1),(0,n.createElementVNode)("option",{value:"special"},"Special",-1)],u=(0,n.createElementVNode)("label",{for:"start_dateTime",class:"block font-medium text-gray-700"},[(0,n.createTextVNode)(" Start DateTime: "),(0,n.createElementVNode)("span",{class:"text-sm text-gray-500"},"(optional)")],-1),d={class:"flex"},f=(0,n.createElementVNode)("label",{for:"end_dateTime",class:"block font-medium text-gray-700"},[(0,n.createTextVNode)(" End DateTime: "),(0,n.createElementVNode)("span",{class:"text-sm text-gray-500"},"(optional)")],-1),m={class:"flex"},p=(0,n.createElementVNode)("label",{for:"priority",class:"block font-medium text-gray-700"},"Priority:",-1),h=(0,n.createElementVNode)("label",{for:"repeat_mode",class:"block font-medium text-gray-700"},[(0,n.createTextVNode)("Repeat Mode: "),(0,n.createElementVNode)("span",{class:"text-sm text-gray-500"},"(What happens when the playlist reaches the end?)")],-1),y=[(0,n.createStaticVNode)('<option value="repeat_all">Repeat All</option><option value="repeat_last">Repeat Last One Only</option><option value="shuffle">Shuffle</option><option value="stop">Stop</option><option value="next_playlist">Play A Different Playlist</option>',5)],v={key:0},g=(0,n.createElementVNode)("label",{for:"next_playlist",class:"block font-medium text-gray-700"},"Select Playlist:",-1),b=["value"];const w={__name:"PlaylistForm",setup:function(e){var t=(0,o.q)(),r=t.store,w=t.clearStartDateTime,x=t.setStartDateTimeNow,E=t.clearEndDateTime,k=t.setEndDateTimeNow,N=t.fetchPlaylistsIfNeeded;return(0,n.watch)((function(){return r.repeat_mode}),(function(e){console.log("next_playlist selected"),"next_playlist"===e&&N()}),{immediate:!0}),function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createElementVNode)("div",null,[a,(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return(0,n.unref)(r).name=e}),id:"name",class:"input input-bordered w-full mt-1",required:""},null,512),[[n.vModelText,(0,n.unref)(r).name]])]),(0,n.createElementVNode)("div",null,[i,(0,n.withDirectives)((0,n.createElementVNode)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return(0,n.unref)(r).description=e}),id:"description",class:"input input-bordered w-full mt-1"},null,512),[[n.vModelText,(0,n.unref)(r).description]])]),(0,n.createElementVNode)("div",null,[l,(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=function(e){return(0,n.unref)(r).url=e}),id:"url",class:"input input-bordered w-full mt-1"},null,512),[[n.vModelText,(0,n.unref)(r).url]])]),(0,n.createElementVNode)("div",null,[c,(0,n.withDirectives)((0,n.createElementVNode)("select",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return(0,n.unref)(r).type=e}),id:"type",class:"input input-bordered w-full mt-1"},s,512),[[n.vModelSelect,(0,n.unref)(r).type]])]),(0,n.createElementVNode)("div",null,[u,(0,n.createElementVNode)("div",d,[(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"datetime-local","onUpdate:modelValue":t[4]||(t[4]=function(e){return(0,n.unref)(r).startTime=e}),id:"start_dateTime",class:"input input-bordered w-full mt-1"},null,512),[[n.vModelText,(0,n.unref)(r).startTime]]),(0,n.createElementVNode)("button",{type:"button",onClick:t[5]||(t[5]=(0,n.withModifiers)((function(){return(0,n.unref)(w)&&(0,n.unref)(w).apply(void 0,arguments)}),["prevent"])),class:"btn bg-gray-300 hover:bg-gray-400 text-black ml-2 mt-1"},"Clear "),(0,n.createElementVNode)("button",{type:"button",onClick:t[6]||(t[6]=(0,n.withModifiers)((function(){return(0,n.unref)(x)&&(0,n.unref)(x).apply(void 0,arguments)}),["prevent"])),class:"btn bg-gray-300 hover:bg-gray-400 text-black ml-2 mt-1"},"Now ")])]),(0,n.createElementVNode)("div",null,[f,(0,n.createElementVNode)("div",m,[(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"datetime-local","onUpdate:modelValue":t[7]||(t[7]=function(e){return(0,n.unref)(r).endTime=e}),id:"end_dateTime",class:"input input-bordered w-full mt-1"},null,512),[[n.vModelText,(0,n.unref)(r).endTime]]),(0,n.createElementVNode)("button",{type:"button",onClick:t[8]||(t[8]=(0,n.withModifiers)((function(){return(0,n.unref)(E)&&(0,n.unref)(E).apply(void 0,arguments)}),["prevent"])),class:"btn bg-gray-300 hover:bg-gray-400 text-black ml-2 mt-1"},"Clear "),(0,n.createElementVNode)("button",{type:"button",onClick:t[9]||(t[9]=(0,n.withModifiers)((function(){return(0,n.unref)(k)&&(0,n.unref)(k).apply(void 0,arguments)}),["prevent"])),class:"btn bg-gray-300 hover:bg-gray-400 text-black ml-2 mt-1"},"Now ")])]),(0,n.createElementVNode)("div",null,[p,(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=function(e){return(0,n.unref)(r).priority=e}),id:"priority",class:"input input-bordered w-full mt-1"},null,512),[[n.vModelText,(0,n.unref)(r).priority]])]),(0,n.createElementVNode)("div",null,[h,(0,n.withDirectives)((0,n.createElementVNode)("select",{"onUpdate:modelValue":t[11]||(t[11]=function(e){return(0,n.unref)(r).repeat_mode=e}),id:"repeat_mode",class:"input input-bordered w-full mt-1"},y,512),[[n.vModelSelect,(0,n.unref)(r).repeat_mode]])]),"next_playlist"===(0,n.unref)(r).repeat_mode?((0,n.openBlock)(),(0,n.createElementBlock)("div",v,[g,(0,n.withDirectives)((0,n.createElementVNode)("select",{"onUpdate:modelValue":t[12]||(t[12]=function(e){return(0,n.unref)(r).next_playlist_id=e}),id:"next_playlist",class:"input input-bordered w-full mt-1"},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(r).playlists,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("option",{key:e.id,value:e.id},(0,n.toDisplayString)(e.name),9,b)})),128))],512),[[n.vModelSelect,(0,n.unref)(r).next_playlist_id]])])):(0,n.createCommentVNode)("",!0)])}}}},50027:(e,t,r)=>{r.d(t,{A:()=>ne});var n=r(29726),o=r(28664),a=r(20715),i=r(37150),l=r(74353),c=r.n(l),s={class:"flex items-center space-x-2 mb-2"},u={class:"text-sm font-semibold"},d={class:"text-xs text-gray-500"},f={class:"flex items-center space-x-2 mb-2 w-full"},m={class:"text-sm"},p={class:"text-sm mb-2 w-full"},h=(0,n.createElementVNode)("span",{class:"text-xs uppercase font-semibold"},"Start time: ",-1),y=(0,n.createElementVNode)("span",{class:"text-xs uppercase font-semibold"},"End time: ",-1),v={class:"w-full mt-2 flex justify-between items-center"},g={key:0,class:"badge badge-outline text-black ml-2"};const b={__name:"CreatePlaylistItemCard",props:{item:Object,index:Number},emits:["removeItem"],setup:function(e,t){t.emit;var r=(0,a.useUserStore)(),o=function(e){return c()(e).format("MMM D, YYYY, hh:mm A")},l=function(e){switch(e.toLowerCase().split("\\").pop()){case"movie":return"text-red-500";case"show":return"text-blue-500";case"showepisode":return"text-green-500";case"movietrailer":return"text-orange-500";case"othercontent":return"text-purple-500";case"newsstory":return"text-yellow-500";default:return"text-gray-500"}};return function(t,a){var c,b,w,x,E,k;return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)((0,n.unref)(r).isSmallScreen?"":"flex flex-wrap items-start justify-start w-full")},[(0,n.createElementVNode)("div",s,[(0,n.createVNode)(i.A,{image:null===(c=e.item)||void 0===c||null===(c=c.content)||void 0===c?void 0:c.image,class:(0,n.normalizeClass)("w-10 h-10 object-contain")},null,8,["image"]),(0,n.createElementVNode)("div",null,[(0,n.createElementVNode)("div",u,"#"+(0,n.toDisplayString)(e.index+1)+" - "+(0,n.toDisplayString)(null===(b=e.item)||void 0===b||null===(b=b.content)||void 0===b?void 0:b.name),1),(0,n.createElementVNode)("div",d,(0,n.toDisplayString)(e.item.duration_minutes)+" minutes · Priority: "+(0,n.toDisplayString)(e.item.priority),1)])]),(0,n.createElementVNode)("div",f,[(0,n.createVNode)(i.A,{image:null===(w=e.item)||void 0===w||null===(w=w.content)||void 0===w||null===(w=w.team)||void 0===w?void 0:w.image,class:(0,n.normalizeClass)("w-5 h-5 object-contain")},null,8,["image"]),(0,n.createElementVNode)("div",m,(0,n.toDisplayString)(null===(x=e.item)||void 0===x||null===(x=x.content)||void 0===x||null===(x=x.team)||void 0===x?void 0:x.name),1)]),(0,n.createElementVNode)("div",p,[(0,n.createElementVNode)("div",null,[h,(0,n.createTextVNode)((0,n.toDisplayString)(o(e.item.start_dateTime)),1)]),(0,n.createElementVNode)("div",null,[y,(0,n.createTextVNode)((0,n.toDisplayString)(o(e.item.end_dateTime)),1)])]),(0,n.createElementVNode)("div",v,[(0,n.createElementVNode)("div",null,[(0,n.createElementVNode)("span",{class:(0,n.normalizeClass)(["badge badge-outline",l(e.item.type)])},(0,n.toDisplayString)((E=e.item.type,k=E.replace(/^App\\Models\\/,"").replace(/([a-z])([A-Z])/g,"$1 $2"),k.charAt(0).toUpperCase()+k.slice(1))),3),e.item.is_scheduled?((0,n.openBlock)(),(0,n.createElementBlock)("span",g,"Scheduled")):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",null,[(0,n.createElementVNode)("button",{onClick:a[0]||(a[0]=(0,n.withModifiers)((function(r){return t.$emit("removeItem",e.item.id)}),["prevent"])),class:"btn btn-xs btn-error"},"Remove")])])],2)}}};var w={class:"flex flex-col justify-center space-x-2"},x=(0,n.createElementVNode)("div",{class:"text-sm font-semibold"},"Gap",-1),E={class:"text-xs"},k=(0,n.createElementVNode)("span",{class:"text-xs uppercase font-semibold"},"Start time: ",-1),N={class:"text-xs"},S=(0,n.createElementVNode)("span",{class:"text-xs uppercase font-semibold"},"End time: ",-1),V={class:"text-xs text-gray-500"};const C={__name:"CreatePlaylistGapCard",props:{item:Object},emits:["openAddContentModal"],setup:function(e,t){var r=t.emit,o=e,a=r,i=function(){a("openAddContentModal",o.item)};return function(t,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",w,[x,(0,n.createElementVNode)("div",E,[k,(0,n.createTextVNode)((0,n.toDisplayString)(t.formatDateTime(e.item.start_dateTime)),1)]),(0,n.createElementVNode)("div",N,[S,(0,n.createTextVNode)((0,n.toDisplayString)(t.formatDateTime(e.item.end_dateTime)),1)]),(0,n.createElementVNode)("div",V,(0,n.toDisplayString)(e.item.duration_minutes)+" minutes",1),(0,n.createElementVNode)("button",{onClick:(0,n.withModifiers)(i,["prevent"]),class:"btn btn-sm btn-primary mt-2"},"Add Content")])}}};var _={class:"flex flex-col p-2 border-b border-gray-200 space-y-2 bg-gray-100"},T={class:"flex gap-2 opacity-50"},B={class:"flex flex-col"},L={class:"text-sm font-semibold"},P={class:"text-xs"},O=(0,n.createElementVNode)("span",{class:"text-xs uppercase font-semibold"},"Start time: ",-1),I={class:"text-xs text-gray-500"},A={class:"flex flex-wrap justify-between"},M={class:"badge badge-outline opacity-50"},j={key:0,class:"badge badge-outline text-black ml-2 opacity-50"};const D={__name:"CreatePlaylistRemovedCard",props:{item:Object,index:Number},emits:["addItem"],setup:function(e,t){t.emit;return function(t,r){var o;return(0,n.openBlock)(),(0,n.createElementBlock)("div",_,[(0,n.createElementVNode)("div",T,[(0,n.createVNode)(i.A,{image:null===(o=e.item)||void 0===o||null===(o=o.content)||void 0===o?void 0:o.image,class:(0,n.normalizeClass)("w-8 h-8 object-contain")},null,8,["image"]),(0,n.createElementVNode)("div",B,[(0,n.createElementVNode)("div",L,(0,n.toDisplayString)(e.item.content.name),1),(0,n.createElementVNode)("div",P,[O,(0,n.createTextVNode)((0,n.toDisplayString)(t.formatDateTime(e.item.start_dateTime)),1)]),(0,n.createElementVNode)("div",I,(0,n.toDisplayString)(e.item.duration_minutes)+" minutes",1)])]),(0,n.createElementVNode)("div",A,[(0,n.createElementVNode)("div",null,[(0,n.createElementVNode)("span",M,(0,n.toDisplayString)(e.item.type),1),e.item.is_scheduled?((0,n.openBlock)(),(0,n.createElementBlock)("span",j,"Scheduled")):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("button",{onClick:r[0]||(r[0]=(0,n.withModifiers)((function(r){return t.$emit("addItem",e.item.id)}),["prevent"])),class:"btn btn-xs btn-success"},"Add")])])}}};var G={class:"mt-6 pt-3 border-t"},F=(0,n.createElementVNode)("h3",{class:"text-lg font-bold mb-2"},"Schedule Items",-1),Y={class:"flex flex-wrap gap-2"},U={key:0,class:"mb-4"},z={key:1,class:"mb-4"},R={key:2,class:"mb-4"},H={key:3,class:"mb-4"},$={class:"sticky bottom-0 left-0 w-full p-4 bg-white border-t border-gray-200"},Q={key:0,class:"py-3 text-red-500"},Z={class:"flex justify-between"},q={type:"submit",class:"btn bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded"},W={key:0,class:"loading loading-spinner"},J={key:1},K={key:1,class:"mt-2"},X={class:"text-sm text-red-600 font-semibold"},ee={class:"text-sm text-orange-600 font-semibold ml-4"},te={key:0,class:"ml-6 text-sm text-gray-600 font-semibold"},re=(0,n.createElementVNode)("span",{class:"loading loading-dots text-info"},null,-1);const ne={__name:"ScheduleItems",props:{submitButtonText:{type:String,required:!0}},emits:["openAddContentModal"],setup:function(e,t){var r=t.emit,a=r,i=(0,o.q)(),l=i.store,c=i.isSmallScreen,s=i.getListItemClass,u=i.clearRemovedItems,d=i.resolveConflicts,f=i.removeItem,m=i.addItem,p=(i.openAddContentModal,i.fetchSchedules),h=function(e){a("openAddContentModal",e)};return function(t,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createElementVNode)("div",G,[F,(0,n.createElementVNode)("div",Y,[(0,n.unref)(l).hasRemovedItems?((0,n.openBlock)(),(0,n.createElementBlock)("div",U,[(0,n.createElementVNode)("button",{onClick:r[0]||(r[0]=(0,n.withModifiers)((function(){return(0,n.unref)(u)&&(0,n.unref)(u).apply(void 0,arguments)}),["prevent"])),class:"btn btn-sm btn-warning"},"Clear All Removed Items")])):(0,n.createCommentVNode)("",!0),(0,n.unref)(l).conflictCount>0?((0,n.openBlock)(),(0,n.createElementBlock)("div",z,[(0,n.createElementVNode)("button",{onClick:r[1]||(r[1]=(0,n.withModifiers)((function(){return(0,n.unref)(d)&&(0,n.unref)(d).apply(void 0,arguments)}),["prevent"])),class:"btn btn-sm btn-warning"},"Resolve Conflicts")])):(0,n.createCommentVNode)("",!0),0===(0,n.unref)(l).conflictCount&&(0,n.unref)(l).gapCount>0?((0,n.openBlock)(),(0,n.createElementBlock)("div",R,[(0,n.createElementVNode)("button",{onClick:r[2]||(r[2]=(0,n.withModifiers)((function(e){return(0,n.unref)(l).insertGaps()}),["prevent"])),class:"btn btn-sm btn-info"},"Insert Gaps")])):(0,n.createCommentVNode)("",!0),(0,n.unref)(l).scheduleItems.length>0?((0,n.openBlock)(),(0,n.createElementBlock)("div",H,[(0,n.createElementVNode)("button",{onClick:r[3]||(r[3]=(0,n.withModifiers)((function(e){return(0,n.unref)(l).removeAllItems()}),["prevent"])),class:"btn btn-outline btn-sm btn-error"},"Remove All Items")])):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("ul",{class:(0,n.normalizeClass)((0,n.unref)(c)?"space-y-4":"divide-y divide-gray-200 space-y-4")},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(l).scheduleItemsWithUserTimezone,(function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("li",{key:"".concat(e.id,"-").concat(t),class:(0,n.normalizeClass)((0,n.unref)(s)(e.conflict,e.removed))},[e.removed||"gap"===e.type?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)(b,{key:0,item:e,index:t,onRemoveItem:(0,n.unref)(f)},null,8,["item","index","onRemoveItem"])),"gap"===e.type?((0,n.openBlock)(),(0,n.createBlock)(C,{key:1,item:e,onOpenAddContentModal:h},null,8,["item"])):(0,n.createCommentVNode)("",!0),e.removed?((0,n.openBlock)(),(0,n.createBlock)(D,{key:2,item:e,index:t,onAddItem:(0,n.unref)(m)},null,8,["item","index","onAddItem"])):(0,n.createCommentVNode)("",!0)],2)})),128))],2)]),(0,n.createElementVNode)("div",$,[(0,n.unref)(l).error?((0,n.openBlock)(),(0,n.createElementBlock)("p",Q,(0,n.toDisplayString)((0,n.unref)(l).error),1)):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",Z,[(0,n.createElementVNode)("button",q,(0,n.toDisplayString)(e.submitButtonText),1),(0,n.createElementVNode)("button",{onClick:r[4]||(r[4]=(0,n.withModifiers)((function(){return(0,n.unref)(p)&&(0,n.unref)(p).apply(void 0,arguments)}),["prevent"])),class:"btn bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded"},[(0,n.unref)(l).loadingSchedules?((0,n.openBlock)(),(0,n.createElementBlock)("span",W)):((0,n.openBlock)(),(0,n.createElementBlock)("span",J,"Use Schedule"))])]),(0,n.unref)(l).conflictCount>0||(0,n.unref)(l).gapCount>0?((0,n.openBlock)(),(0,n.createElementBlock)("div",K,[(0,n.createElementVNode)("span",X,"Conflicts: "+(0,n.toDisplayString)((0,n.unref)(l).conflictCount),1),(0,n.createElementVNode)("span",ee,"Gaps: "+(0,n.toDisplayString)((0,n.unref)(l).gapCount),1),(0,n.unref)(l).processing?((0,n.openBlock)(),(0,n.createElementBlock)("span",te,[(0,n.createTextVNode)("Processing "),re,(0,n.createTextVNode)(" Please wait")])):(0,n.createCommentVNode)("",!0)])):(0,n.createCommentVNode)("",!0)])])}}}},71938:(e,t,r)=>{r.d(t,{A:()=>$e});var n=r(29726),o=r(3735),a=r(44411),i=r(20715),l=r(80473),c=(r(38221),r(61273)),s=r(92995),u=r(74353),d=r.n(u);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function m(){m=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:_(e,r,l)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",h="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function x(){}var E={};s(E,i,(function(){return this}));var k=Object.getPrototypeOf,N=k&&k(k(O([])));N&&N!==r&&n.call(N,i)&&(E=N);var S=x.prototype=b.prototype=Object.create(E);function V(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,a,i,l){var c=d(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==f(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function _(t,r,n){var o=p;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=d(t,r,n);if("normal"===s.type){if(o=n.done?v:h,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function B(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function O(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(f(t)+" is not iterable")}return w.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=s(x,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,s(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},V(C.prototype),s(C.prototype,l,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new C(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},V(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function p(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){p(a,n,o,i,l,"next",e)}function l(e){p(a,n,o,i,l,"throw",e)}i(void 0)}))}}var y={id:"dynamicModal",class:"modal"},v={class:"modal-box w-11/12 max-w-5xl"},g={class:"flex flex-row justify-between align-bottom"},b={class:"flex gap-2"},w={class:"font-bold text-lg"},x={key:0,class:"loading loading-spinner"},E={class:"flex justify-center mb-6"},k={class:"flex items-center mt-6 xl:mt-0"},N={class:"relative"},S=(0,n.createElementVNode)("div",{class:"absolute top-0 flex items-center h-full ml-2"},[(0,n.createElementVNode)("svg",{class:"fill-current text-gray-400 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[(0,n.createElementVNode)("path",{d:"M456.69 421.39 362.6 327.3a173.81 173.81 0 0 0 34.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 0 0 327.3 362.6l94.09 94.09a25 25 0 0 0 35.3-35.3ZM97.92 222.72a124.8 124.8 0 1 1 124.8 124.8 124.95 124.95 0 0 1-124.8-124.8Z"})])],-1),V={class:"overflow-x-auto"},C={class:"table table-xs"},_={key:0},T={key:1},B={key:0},L=[(0,n.createElementVNode)("span",null,"ID",-1)],P={key:0},O={key:1},I={key:0},A={key:1},M={key:0},j={key:1},D={key:0},G={key:1},F={key:0},Y={key:1},U={key:0},z={key:1},R=(0,n.createElementVNode)("th",null,null,-1),H=["onClick"],$={key:0},Q={key:1},Z={key:0,class:"text-green-500"},q={key:1,class:"text-red-700"},W={key:0},J=["onClick"],K={key:0},X={key:1},ee=["onClick"],te={key:0},re={key:1},ne=["onClick"],oe={key:0},ae={key:1},ie=["onClick"],le={key:0},ce={key:1},se=(0,n.createElementVNode)("br",null,null,-1),ue={key:2},de=["onClick"],fe={key:0},me={key:1},pe=["onClick"],he={key:0},ye={key:1},ve={class:"w-fit whitespace-nowrap overflow-hidden"},ge=["onClick"],be=["onClick"],we=["onClick"],xe=["onClick"],Ee={key:0,class:"flex flex-row justify-center mt-6 w-full"},ke={class:"join grid grid-cols-2"},Ne=["disabled"],Se=["disabled"],Ve={id:"confirmSelectionModal",class:"modal"},Ce={class:"modal-box"},_e=(0,n.createElementVNode)("h3",{class:"font-bold text-lg"},"Confirm Selection",-1),Te=(0,n.createElementVNode)("p",{class:"py-4"},[(0,n.createTextVNode)(" Are you sure you want to select "),(0,n.createElementVNode)("span",{id:"selectedItemName"}),(0,n.createTextVNode)("? ")],-1),Be={class:"modal-action"},Le=["disabled"],Pe=["disabled"],Oe={id:"confirmRemoveModal",class:"modal"},Ie={class:"modal-box"},Ae=(0,n.createElementVNode)("h3",{class:"font-bold text-lg"},"Confirm Remove",-1),Me=(0,n.createElementVNode)("p",{class:"py-4"},[(0,n.createTextVNode)(" Are you sure you want to remove "),(0,n.createElementVNode)("span",{id:"selectedForRemovalItemName"}),(0,n.createTextVNode)("? ")],-1),je={class:"modal-action"},De=["disabled"],Ge=["disabled"],Fe={id:"updateChannelPlaylistModal",class:"modal"},Ye={class:"modal-box p-0 flex flex-col h-full"},Ue=(0,n.createElementVNode)("div",{class:"modal-header sticky top-0 left-0 right-0 bg-white p-4 z-40 border-b border-gray-200"},[(0,n.createElementVNode)("form",{method:"dialog",class:"absolute right-2 top-2 z-50"},[(0,n.createElementVNode)("button",{class:"btn btn-sm btn-circle btn-ghost"},"✕")]),(0,n.createElementVNode)("h2",{class:"text-2xl font-bold"},"Edit Playlist")],-1),ze={class:"modal-body flex-1 overflow-y-auto"},Re={class:"modal-action"},He={method:"dialog"};const $e={__name:"DynamicModal",props:{type:String},setup:function(e){var t=(0,n.defineAsyncComponent)((function(){return Promise.resolve().then(r.bind(r,90948))})),u=(0,n.defineAsyncComponent)((function(){return r.e(7603).then(r.bind(r,97603))})),f=(0,o.useAdminStore)(),p=(0,a.useChannelStore)(),$e=(0,i.useUserStore)(),Qe=(0,l.useChannelPlaylistStore)(),Ze=e,qe=((0,n.computed)((function(){return f.filteredItems})),(0,n.computed)((function(){return f.activeItem})),(0,n.ref)(null)),We=(0,n.ref)(null),Je=function(e){We.value=e,document.getElementById("selectedItemName").textContent=e.name,document.getElementById("confirmSelectionModal").showModal()},Ke=function(){var e=h(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!We.value){e.next=4;break}return e.next=3,f.updateActiveItemId(We.value.id);case 3:document.getElementById("confirmSelectionModal").close();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=h(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:We.value&&(et(We.value.name),document.getElementById("confirmRemoveModal").close());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),et=function(e){s.QB.post(route("mistStream.remove"),{name:e}),document.getElementById("dynamicModal").close()},tt=function(){Qe.reset(),document.getElementById("updateChannelPlaylistModal").close()},rt=function(){f.fetchItems(Ze.type)},nt=function(e){switch(e){case"Active":return"text-green-500";case"Inactive":return"text-gray-700";case"Scheduled":return"text-purple-700";case"Standby":return"text-orange-700";default:return""}};return function(e,r){var o;return(0,n.openBlock)(),(0,n.createElementBlock)("dialog",y,[(0,n.createElementVNode)("div",v,[(0,n.createElementVNode)("div",g,[(0,n.createElementVNode)("div",b,[(0,n.createElementVNode)("h3",w,(0,n.toDisplayString)((0,n.unref)(f).modalHeader),1),(0,n.unref)(f).loading?((0,n.openBlock)(),(0,n.createElementBlock)("span",x)):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",null,[(0,n.createElementVNode)("h3",null,(0,n.toDisplayString)(null===(o=(0,n.unref)(f))||void 0===o||null===(o=o.selectedChannel)||void 0===o?void 0:o.name),1)])]),(0,n.createElementVNode)("div",E,[(0,n.createElementVNode)("div",k,[(0,n.createElementVNode)("div",N,[(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":r[0]||(r[0]=function(e){return(0,n.unref)(f).searchTerm=e}),onInput:r[1]||(r[1]=function(){return e.debouncedFetchItems&&e.debouncedFetchItems.apply(e,arguments)}),type:"search",class:"bg-gray-50 text-black text-sm rounded-full focus:outline-none focus:shadow w-64 pl-8 px-3 py-1",placeholder:"Search..."},null,544),[[n.vModelText,(0,n.unref)(f).searchTerm]]),S])])]),(0,n.createElementVNode)("div",null,[(0,n.createElementVNode)("div",V,[(0,n.createElementVNode)("table",C,[(0,n.createElementVNode)("thead",null,[(0,n.createElementVNode)("tr",null,[(0,n.createElementVNode)("th",null,["channelPlaylist"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",_,"Active")):(0,n.createCommentVNode)("",!0),"mistStream"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",T,"Active")):(0,n.createCommentVNode)("",!0)]),"channelPlaylist"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("th",B,L)):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("th",null,["channelPlaylist"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",P,"Name")):(0,n.createCommentVNode)("",!0),"mistStream"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",O,"Name")):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("th",null,["channelPlaylist"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",I,"Type")):(0,n.createCommentVNode)("",!0),"mistStream"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",A,"Source")):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("th",null,["channelPlaylist"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",M,"Priority")):(0,n.createCommentVNode)("",!0),"mistStream"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",j,"MIME Type")):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("th",null,["channelPlaylist"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",D,"Repeat Mode")):(0,n.createCommentVNode)("",!0),"mistStream"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",G,"Comment")):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("th",null,["channelPlaylist"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",F,"Start Time")):(0,n.createCommentVNode)("",!0),"mistStream"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",Y,"Created On")):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("th",null,["channelPlaylist"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",U,"End Time")):(0,n.createCommentVNode)("",!0),"mistStream"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",z)):(0,n.createCommentVNode)("",!0)]),R])]),(0,n.createElementVNode)("tbody",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(f).paginatedItems,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("tr",{key:e.id,class:(0,n.normalizeClass)(["hover:bg-blue-300 hover:cursor-pointer",{"bg-yellow-500":e.id===(0,n.unref)(f).activeItemId}])},[(0,n.createElementVNode)("td",{onClick:function(t){return Je(e)}},["channelPlaylist"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("div",$,[(0,n.createElementVNode)("span",{class:(0,n.normalizeClass)(nt(e.status))},(0,n.toDisplayString)(e.status),3)])):(0,n.createCommentVNode)("",!0),"mistStream"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",Q,[e.active?((0,n.openBlock)(),(0,n.createElementBlock)("span",Z,"Active")):((0,n.openBlock)(),(0,n.createElementBlock)("span",q,"Inactive"))])):(0,n.createCommentVNode)("",!0)],8,H),"channelPlaylist"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("td",W,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(e.id),1)])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("td",{onClick:function(t){return Je(e)}},["channelPlaylist"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",K,(0,n.toDisplayString)(e.name),1)):(0,n.createCommentVNode)("",!0),"mistStream"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",X,(0,n.toDisplayString)(e.name),1)):(0,n.createCommentVNode)("",!0)],8,J),(0,n.createElementVNode)("td",{onClick:function(t){return Je(e)}},["channelPlaylist"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",te,(0,n.toDisplayString)(e.type),1)):(0,n.createCommentVNode)("",!0),"mistStream"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",re,(0,n.toDisplayString)(e.source),1)):(0,n.createCommentVNode)("",!0)],8,ee),(0,n.createElementVNode)("td",{onClick:function(t){return Je(e)}},["channelPlaylist"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",oe,(0,n.toDisplayString)(e.priority),1)):(0,n.createCommentVNode)("",!0),"mistStream"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",ae,(0,n.toDisplayString)(e.mime_type),1)):(0,n.createCommentVNode)("",!0)],8,ne),(0,n.createElementVNode)("td",{onClick:function(t){return Je(e)}},["channelPlaylist"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",le,(0,n.toDisplayString)(e.repeat_mode),1)):(0,n.createCommentVNode)("",!0),"channelPlaylist"===(0,n.unref)(f).currentType&&"next_playlist"===e.repeat_mode?((0,n.openBlock)(),(0,n.createElementBlock)("span",ce,[se,(0,n.createTextVNode)((0,n.toDisplayString)(null==e?void 0:e.next_playlist_name),1)])):(0,n.createCommentVNode)("",!0),"mistStream"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",ue,(0,n.toDisplayString)(e.comment),1)):(0,n.createCommentVNode)("",!0)],8,ie),(0,n.createElementVNode)("td",{onClick:function(t){return Je(e)}},["channelPlaylist"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",fe,(0,n.toDisplayString)((0,n.unref)(d()).utc(e.start_dateTime).tz((0,n.unref)($e).timezone).format("MMM D, YYYY, hh:mm A")),1)):(0,n.createCommentVNode)("",!0),"mistStream"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",me,(0,n.toDisplayString)((0,n.unref)(d()).utc(e.created_at).tz((0,n.unref)($e).timezone).format("MMM D, YYYY, hh:mm A")),1)):(0,n.createCommentVNode)("",!0)],8,de),(0,n.createElementVNode)("td",{onClick:function(t){return Je(e)}},["channelPlaylist"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",he,(0,n.toDisplayString)((0,n.unref)(d()).utc(e.end_dateTime).tz((0,n.unref)($e).timezone).format("MMM D, YYYY, hh:mm A")),1)):(0,n.createCommentVNode)("",!0),"mistStream"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("span",ye)):(0,n.createCommentVNode)("",!0)],8,pe),(0,n.createElementVNode)("td",ve,["mistStream"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,onClick:(0,n.withModifiers)((function(t){return function(e){document.getElementById("updateMistStreamModal").showModal(),p.mistStream=e}(e)}),["prevent"]),class:"ml-2 px-2 py-1 text-white font-semibold bg-blue-500 hover:bg-blue-600 rounded-lg"},[(0,n.createVNode)((0,n.unref)(c.gc),{icon:"fa-pencil",class:"text-xs"})],8,ge)):(0,n.createCommentVNode)("",!0),"mistStream"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:1,onClick:function(t){return function(e){We.value=e,document.getElementById("selectedForRemovalItemName").textContent=e.name,document.getElementById("confirmRemoveModal").showModal()}(e)},class:"ml-1 px-2 py-1 text-white font-semibold bg-red-500 hover:bg-red-600 rounded-lg"},[(0,n.createVNode)((0,n.unref)(c.gc),{icon:"fa-trash-can",class:"text-xs"})],8,be)):(0,n.createCommentVNode)("",!0),"channelPlaylist"===(0,n.unref)(f).currentType?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:2,onClick:(0,n.withModifiers)((function(t){return function(e){console.log("Edit item opening: ",e),qe.value=e,Qe.setPlaylistData(e),document.getElementById("updateChannelPlaylistModal").showModal()}(e)}),["prevent"]),class:"ml-2 px-2 py-1 text-white font-semibold bg-blue-500 hover:bg-blue-600 rounded-lg"},[(0,n.createVNode)((0,n.unref)(c.gc),{icon:"fa-pencil",class:"text-xs"})],8,we)):(0,n.createCommentVNode)("",!0),"channelPlaylist"===(0,n.unref)(f).currentType&&"Inactive"===e.status?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:3,onClick:function(t){return function(e){Qe.removePlaylist(e.id),f.removeItem(e)}(e)},class:"ml-1 px-2 py-1 text-white font-semibold bg-red-500 hover:bg-red-600 rounded-lg"},[(0,n.createVNode)((0,n.unref)(c.gc),{icon:"fa-trash-can",class:"text-xs"})],8,xe)):(0,n.createCommentVNode)("",!0)])],2)})),128))])])]),(0,n.unref)(f).totalModalPages>1?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ee,[(0,n.createElementVNode)("div",ke,[(0,n.createElementVNode)("button",{class:"join-item btn btn-sm btn-outline",onClick:r[2]||(r[2]=function(){var e;return(0,n.unref)(f).prevPage&&(e=(0,n.unref)(f)).prevPage.apply(e,arguments)}),disabled:1===(0,n.unref)(f).currentPage}," Previous page ",8,Ne),(0,n.createElementVNode)("button",{class:"join-item btn btn-sm btn-outline",onClick:r[3]||(r[3]=function(){var e;return(0,n.unref)(f).nextPage&&(e=(0,n.unref)(f)).nextPage.apply(e,arguments)}),disabled:(0,n.unref)(f).currentPage===(0,n.unref)(f).totalModalPages}," Next ",8,Se)])])):(0,n.createCommentVNode)("",!0)]),(0,n.createVNode)((0,n.unref)(t),{id:"updateMistStreamModal","form-errors":e.$page.props.errors,onUpdateList:rt},{"form-title":(0,n.withCtx)((function(){return[(0,n.createTextVNode)(" Update Mist Stream ")]})),"form-description":(0,n.withCtx)((function(){return[(0,n.createTextVNode)(" Note: You cannot edit the stream name (right now), it will only create a new stream. This is a bug that needs to be fixed in the AddOrUpdateMistStreamJob ")]})),"button-label":(0,n.withCtx)((function(){return[(0,n.createTextVNode)(" Update ")]})),_:1},8,["form-errors"]),(0,n.createElementVNode)("dialog",Ve,[(0,n.createElementVNode)("div",Ce,[_e,Te,(0,n.createElementVNode)("div",Be,[(0,n.createElementVNode)("button",{class:"btn",onClick:Ke,disabled:(0,n.unref)(f).loading},"Confirm",8,Le),(0,n.createElementVNode)("button",{class:"btn",onClick:r[4]||(r[4]=function(){return e.closeConfirmSelectionModal&&e.closeConfirmSelectionModal.apply(e,arguments)}),disabled:(0,n.unref)(f).loading},"Cancel",8,Pe)])])]),(0,n.createElementVNode)("dialog",Oe,[(0,n.createElementVNode)("div",Ie,[Ae,Me,(0,n.createElementVNode)("div",je,[(0,n.createElementVNode)("button",{class:"btn",onClick:Xe,disabled:(0,n.unref)(f).loading},"Confirm",8,De),(0,n.createElementVNode)("button",{class:"btn",onClick:r[5]||(r[5]=function(){return e.closeConfirmRemoveModal&&e.closeConfirmRemoveModal.apply(e,arguments)}),disabled:(0,n.unref)(f).loading},"Cancel",8,Ge)])])]),(0,n.createElementVNode)("dialog",Fe,[(0,n.createElementVNode)("div",Ye,[Ue,(0,n.createElementVNode)("div",ze,[qe.value?((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(u),{key:0,playlist:qe.value,onUpdateList:rt},null,8,["playlist"])):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",{class:"modal-action sticky bottom-0 left-0 right-0 bg-white p-4 z-40 border-t border-gray-200"},[(0,n.createElementVNode)("button",{class:"btn",onClick:tt},"Close")])])]),(0,n.createElementVNode)("div",Re,[(0,n.createElementVNode)("form",He,[(0,n.createElementVNode)("button",{class:"btn",onClick:r[6]||(r[6]=function(){var e;return(0,n.unref)(f).clearSelectedChannelAndItems&&(e=(0,n.unref)(f)).clearSelectedChannelAndItems.apply(e,arguments)})},"Close")])])])])}}}},96427:(e,t,r)=>{r.d(t,{A:()=>E});var n=r(29726),o=r(3735);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(){i=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",s=l.asyncIterator||"@@asyncIterator",u=l.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:_(e,r,l)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var p="suspendedStart",h="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function x(){}var E={};d(E,c,(function(){return this}));var k=Object.getPrototypeOf,N=k&&k(k(O([])));N&&N!==r&&n.call(N,c)&&(E=N);var S=x.prototype=b.prototype=Object.create(E);function V(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,l,c){var s=m(e[o],e,i);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==a(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,l,c)}),(function(e){r("throw",e,l,c)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return r("throw",e,l,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function _(t,r,n){var o=p;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=m(t,r,n);if("normal"===s.type){if(o=n.done?v:h,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=m(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function B(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function O(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(a(t)+" is not iterable")}return w.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},V(C.prototype),d(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new C(f(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},V(S),d(S,u,"Generator"),d(S,c,(function(){return this})),d(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function l(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var c=function(e){return(0,n.pushScopeId)("data-v-c559967c"),e=e(),(0,n.popScopeId)(),e},s={key:0,class:"btn btn-xs mt-1 text-white bg-green-500 hover:bg-green-500"},u=c((function(){return(0,n.createElementVNode)("span",null,null,-1)})),d={id:"confirmPriorityChangeModal",class:"modal"},f={class:"modal-box"},m={class:"font-bold text-lg"},p={class:"py-4"},h={class:"font-bold"},y=c((function(){return(0,n.createElementVNode)("button",{class:"btn",onclick:"document.getElementById('confirmPriorityChangeModal').close()"},"Cancel",-1)}));const v={__name:"SourceSelector",props:["source","sourceType"],setup:function(e){var t=(0,o.useAdminStore)(),r=e,a=function(){t.sourceSelector.source=r.source,t.sourceSelector.sourceType=r.sourceType,document.getElementById("confirmPriorityChangeModal").showModal()},c=function(){var e,r=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setPlaybackPriorityType(t.sourceSelector.source,t.sourceSelector.sourceType);case 2:document.getElementById("confirmPriorityChangeModal").close();case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,c,"next",e)}function c(e){l(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return function(r,o){var i,l,v,g,b,w,x,E;return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["source-selector",{"is-priority":null===(i=e.source)||void 0===i?void 0:i.playback_priority_type,"is-playing":null===(l=e.source)||void 0===l?void 0:l.isPlaying,"is-fallback":null===(v=e.source)||void 0===v?void 0:v.isFallback,"has-error":null===(g=e.source)||void 0===g?void 0:g.hasError}])},[(0,n.createElementVNode)("div",null,[(null===(b=e.source)||void 0===b?void 0:b.playback_priority_type)===e.sourceType?((0,n.openBlock)(),(0,n.createElementBlock)("div",s,"Priority")):(0,n.createCommentVNode)("",!0),u])],2),(null===(w=e.source)||void 0===w?void 0:w.playback_priority_type)!==e.sourceType?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,class:"btn btn-xs mt-1",onClick:a},"Set as Priority ")):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("dialog",d,[(0,n.createElementVNode)("div",f,[(0,n.createElementVNode)("h3",m,"Confirm Selection for "+(0,n.toDisplayString)(null===(x=(0,n.unref)(t).sourceSelector)||void 0===x||null===(x=x.source)||void 0===x?void 0:x.name),1),(0,n.createElementVNode)("p",p,[(0,n.createTextVNode)(" Are you sure you want to change priority to "),(0,n.createElementVNode)("span",h,(0,n.toDisplayString)(null===(E=(0,n.unref)(t).sourceSelector)||void 0===E?void 0:E.sourceType),1),(0,n.createTextVNode)("? ")]),(0,n.createElementVNode)("div",{class:"modal-action"},[(0,n.createElementVNode)("button",{class:"btn",onClick:c},"Confirm"),y])])])],64)}}};var g=r(85072),b=r.n(g),w=r(20845),x={insert:"head",singleton:!1};b()(w.A,x);w.A.locals;const E=(0,r(66262).A)(v,[["__scopeId","data-v-c559967c"]])},80877:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(29726),o={class:"block font-medium text-sm text-gray-700"},a={key:0},i={key:1};const l={__name:"Label",props:{value:String},setup:function(e){return function(t,r){return(0,n.openBlock)(),(0,n.createElementBlock)("label",o,[e.value?((0,n.openBlock)(),(0,n.createElementBlock)("span",a,(0,n.toDisplayString)(e.value),1)):((0,n.openBlock)(),(0,n.createElementBlock)("span",i,[(0,n.renderSlot)(t.$slots,"default")]))])}}}},94714:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Xe});var n=r(29726),o=r(2435),a=r(20973),i=r(7447),l=r(3735),c=r(90757),s=r(47212),u=r(71938),d=r(80473),f=r(90948),m=r(28664),p=r(59307),h=r(76101),y=r(50027),v=r(74353),g=r.n(v);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function w(){w=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:_(e,r,l)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",m="suspendedYield",p="executing",h="completed",y={};function v(){}function g(){}function x(){}var E={};s(E,i,(function(){return this}));var k=Object.getPrototypeOf,N=k&&k(k(O([])));N&&N!==r&&n.call(N,i)&&(E=N);var S=x.prototype=v.prototype=Object.create(E);function V(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,a,i,l){var c=d(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==b(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function _(t,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(t,r,n);if("normal"===s.type){if(o=n.done?h:m,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function B(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function O(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(b(t)+" is not iterable")}return g.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:g,configurable:!0}),g.displayName=s(x,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,s(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},V(C.prototype),s(C.prototype,l,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new C(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},V(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function x(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var E={class:"px-4 pt-4 bg-white rounded-lg shadow-lg relative flex flex-col h-full"},k=(0,n.createElementVNode)("h2",{class:"text-2xl font-bold mb-4"},"Create New Playlist",-1),N={class:"flex-grow overflow-auto pr-2"};const S={__name:"CreatePlaylist",setup:function(e){var t=(0,m.q)(),r=t.store,o=(t.notificationStore,t.error),a=t.selectedGapDuration,i=(t.showModal,t.startDateTime),l=(t.fetchPlaylistsIfNeeded,t.validateTimes),c=t.openAddContentModal,s=(t.closeModal,function(){var e,t=(e=w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,r.createPlaylist({name:r.name,description:r.description,url:r.url,type:r.type,start_dateTime:r.startTimeUTC,end_dateTime:r.endTimeUTC,priority:r.priority,repeat_mode:r.repeat_mode,next_playlist_id:"next_playlist"===r.repeat_mode?r.next_playlist_id:null});case 4:r.error?o.value=r.error:(r.name="",r.description="",r.url="",r.type="regular",r.startTime=g()().format("YYYY-MM-DDTHH:mm"),r.endTime=g()().add(24,"hour").format("YYYY-MM-DDTHH:mm"),r.priority=1,r.repeat_mode="repeat_all",r.next_playlist_id=null,document.getElementById("addChannelPlaylistModal").close(),r.reset());case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){x(a,n,o,i,l,"next",e)}function l(e){x(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}()),u=function(e){c(e),console.log("openAddContentModal",e)};return function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("div",E,[k,(0,n.createElementVNode)("div",N,[(0,n.createElementVNode)("form",{onSubmit:(0,n.withModifiers)(s,["prevent"]),class:"space-y-4"},[(0,n.createVNode)(h.A),(0,n.createVNode)(y.A,{submitButtonText:"Create",onOpenAddContentModal:u})],32)]),(0,n.unref)(r).showModal?((0,n.openBlock)(),(0,n.createBlock)(p.A,{key:0,showModal:(0,n.unref)(r).showModal,gapDuration:(0,n.unref)(a),startDateTime:(0,n.unref)(i)},null,8,["showModal","gapDuration","startDateTime"])):(0,n.createCommentVNode)("",!0)])}}};function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function C(){C=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:_(e,r,l)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",m="suspendedYield",p="executing",h="completed",y={};function v(){}function g(){}function b(){}var w={};s(w,i,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(O([])));E&&E!==r&&n.call(E,i)&&(w=E);var k=b.prototype=v.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=d(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==V(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function _(t,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(t,r,n);if("normal"===s.type){if(o=n.done?h:m,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function B(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function O(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(V(t)+" is not iterable")}return g.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},N(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function _(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var T={class:"flex flex-row justify-between gap-x-4 mb-3"},B=(0,n.createElementVNode)("button",{class:"btn btn-sm bg-green-500 hover:bg-green-600 text-white px-4 py-2 mr-2 rounded disabled:bg-gray-400",disabled:""},"Add External Source ",-1),L=(0,n.createElementVNode)("button",{class:"btn btn-sm bg-green-500 hover:bg-green-600 text-white px-4 py-2 mr-2 rounded disabled:bg-gray-400",onclick:"addMistStreamModal.showModal()"}," Add Mist Stream ",-1),P={id:"adminAddChannel",class:"modal"},O={class:"modal-box"},I=(0,n.createElementVNode)("form",{method:"dialog"},[(0,n.createElementVNode)("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕")],-1),A=(0,n.createElementVNode)("h3",{class:"font-bold text-lg mb-2"},"Add Channel",-1),M={id:"addChannelPlaylistModal",class:"modal"},j={class:"modal-box p-0 flex flex-col h-full"},D={class:"flex-grow overflow-auto"};const G={__name:"AdminChannelHeaderButtons",setup:function(e){var t=(0,l.useAdminStore)(),r=(0,d.useChannelPlaylistStore)(),o=(0,n.ref)(""),a=function(){document.getElementById("adminAddChannel").showModal()},i=function(){r.reset(),document.getElementById("addChannelPlaylistModal").showModal()},c=function(){r.reset()},s=function(){var e,r=(e=C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.addChannel(o.value);case 2:document.getElementById("adminAddChannel").close(),o.value="";case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){_(a,n,o,i,l,"next",e)}function l(e){_(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return function(e,r){var l=(0,n.resolveComponent)("Link");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createElementVNode)("div",T,[(0,n.createElementVNode)("div",null,[(0,n.createVNode)(l,{href:"#"},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("button",{onClick:(0,n.withModifiers)(a,["prevent"]),class:"btn btn-sm bg-green-500 hover:bg-green-600 text-white px-4 py-2 mr-2 rounded disabled:bg-gray-400"},"Add Channel ")]})),_:1}),(0,n.createVNode)(l,{href:"#"},{default:(0,n.withCtx)((function(){return[B]})),_:1}),(0,n.createVNode)(l,{href:"#"},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("button",{onClick:(0,n.withModifiers)(i,["prevent"]),class:"btn btn-sm bg-green-500 hover:bg-green-600 text-white px-4 py-2 mr-2 rounded disabled:bg-gray-400"},"Add Channel Playlist ")]})),_:1}),L,(0,n.createVNode)((0,n.unref)(f.default),{id:"addMistStreamModal","form-errors":e.$page.props.errors},{"form-title":(0,n.withCtx)((function(){return[(0,n.createTextVNode)(" Add Mist Stream ")]})),"form-description":(0,n.withCtx)((function(){return[(0,n.createTextVNode)(" Add a new stream to the Mist Server ")]})),"button-label":(0,n.withCtx)((function(){return[(0,n.createTextVNode)(" Add ")]})),_:1},8,["form-errors"])]),(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":r[0]||(r[0]=function(e){return(0,n.unref)(t).searchTerm=e}),type:"search",placeholder:"Search...",class:"border px-2 rounded-lg"},null,512),[[n.vModelText,(0,n.unref)(t).searchTerm]])]),(0,n.createElementVNode)("dialog",P,[(0,n.createElementVNode)("div",O,[I,A,(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":r[1]||(r[1]=function(e){return o.value=e}),type:"text",placeholder:"Channel Name",class:"input input-bordered w-full max-w-xs"},null,512),[[n.vModelText,o.value]]),(0,n.createElementVNode)("button",{onClick:(0,n.withModifiers)(s,["prevent"]),class:"btn btn-primary ml-2"},"Add")])]),(0,n.createElementVNode)("dialog",M,[(0,n.createElementVNode)("div",j,[(0,n.createElementVNode)("form",{method:"dialog",class:"absolute right-2 top-2 z-50"},[(0,n.createElementVNode)("button",{onClick:c,class:"btn btn-sm btn-circle btn-ghost"},"✕")]),(0,n.createElementVNode)("div",D,[(0,n.createVNode)(S)])])])])}}};var F=r(96427);var Y=r(85072),U=r.n(Y),z=r(55504),R={insert:"head",singleton:!1};U()(z.A,R);z.A.locals;const H={},$=(0,r(66262).A)(H,[["render",function(e,t){var r=(0,n.resolveComponent)("Popper");return(0,n.openBlock)(),(0,n.createBlock)(r,{hover:"",openDelay:"50",closeDelay:"50","offset-skid":"0","offset-distance":"0",placement:"bottom"},{content:(0,n.withCtx)((function(){return[(0,n.renderSlot)(e.$slots,"content",{},void 0,!0)]})),default:(0,n.withCtx)((function(){return[(0,n.renderSlot)(e.$slots,"activator",{},void 0,!0)]})),_:3})}],["__scopeId","data-v-d34cc41c"]]);var Q={class:"text-xs p-2",id:"tooltip"};const Z={__name:"AdminChannelDataPopper",props:{data:Object,dataType:String,dataTypeDb:String},emits:["open-modal"],setup:function(e,t){var r=t.emit,o=e,a=r,i=(0,n.computed)((function(){var e;return(null===(e=o.data[o.dataTypeDb])||void 0===e?void 0:e.name)||"No ".concat(o.dataType," Name")})),l=(0,n.computed)((function(){return o.data[o.dataTypeDb]||{}})),c=(0,n.computed)((function(){return{"cursor-pointer":!0,"text-black":!0,"font-semibold":o.data.playback_priority_type===o.dataType}}));return function(e,t){return(0,n.openBlock)(),(0,n.createBlock)((0,n.unref)($),null,{activator:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("button",{onClick:t[0]||(t[0]=function(e){return a("open-modal")}),class:(0,n.normalizeClass)(c.value)},(0,n.toDisplayString)(i.value),3)]})),content:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",Q,[(0,n.createElementVNode)("div",null,"ID: "+(0,n.toDisplayString)(l.value.id),1),(0,n.createElementVNode)("div",null,"Name: "+(0,n.toDisplayString)(l.value.name),1),(0,n.createElementVNode)("div",null,"Path: "+(0,n.toDisplayString)(l.value.path),1),(0,n.createElementVNode)("div",null,"Type: "+(0,n.toDisplayString)(l.value.type),1),(0,n.createElementVNode)("div",null,"Provider: "+(0,n.toDisplayString)(l.value.provider),1)])]})),_:1})}}};var q={key:0},W={key:1},J={key:0,class:"text-gray-700 tracking-wide"},K={key:1},X={key:1,class:"italic text-gray-300 text-sm"};const ee={__name:"AdminChannelDataItem",props:{data:Object,dataType:String,dataTypeDb:String},emits:["open-modal"],setup:function(e,t){var r=t.emit;return function(t,o){var a,i,l;return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[e.data[e.dataTypeDb]?((0,n.openBlock)(),(0,n.createElementBlock)("div",q,[(0,n.createVNode)(Z,{data:e.data,dataType:e.dataType,dataTypeDb:e.dataTypeDb,onOpenModal:o[0]||(o[0]=function(e){return r("open-modal")})},null,8,["data","dataType","dataTypeDb"])])):((0,n.openBlock)(),(0,n.createElementBlock)("div",W,[(0,n.createElementVNode)("button",{onClick:o[1]||(o[1]=function(e){return r("open-modal")})},[null!==(a=e.data[e.dataTypeDb])&&void 0!==a&&a.name?((0,n.openBlock)(),(0,n.createElementBlock)("span",J,[e.data.playback_priority_type===e.dataType?((0,n.openBlock)(),(0,n.createElementBlock)("span",{key:0,class:(0,n.normalizeClass)({"text-black font-bold":e.data.playback_priority_type===e.dataType})},(0,n.toDisplayString)(null===(i=e.data)||void 0===i?void 0:i.dataTypeDb.name),3)):((0,n.openBlock)(),(0,n.createElementBlock)("span",K,(0,n.toDisplayString)(null===(l=e.data)||void 0===l?void 0:l.dataTypeDb.name),1))])):((0,n.openBlock)(),(0,n.createElementBlock)("span",X,"no "+(0,n.toDisplayString)(e.dataType),1))])])),(0,n.createVNode)((0,n.unref)(F.A),{source:e.data,"source-type":e.dataType},null,8,["source","source-type"])])}}};var te={key:0},re={class:"text-xs",id:"tooltip"},ne={key:0},oe={key:1},ae={key:0,class:"cursor-help text-green-500 font-semibold"},ie={key:1,class:"cursor-help text-blue-500 font-semibold"},le={key:1,class:"italic text-gray-300 text-xs"};const ce={__name:"AdminChannelCurrentVideo",props:{data:Object},setup:function(e){return function(t,r){var o,a=(0,n.resolveComponent)("Popper");return null!==(o=e.data)&&void 0!==o&&o.currentVideo?((0,n.openBlock)(),(0,n.createElementBlock)("div",te,[(0,n.createVNode)(a,{hover:"",openDelay:"50",closeDelay:"50","offset-skid":"0","offset-distance":"0",placement:"bottom"},{content:(0,n.withCtx)((function(){var t,r,o,a,i,l,c;return[(0,n.createElementVNode)("div",re,[(0,n.createElementVNode)("div",null,"ID: "+(0,n.toDisplayString)(null===(t=e.data)||void 0===t?void 0:t.currentVideo.id),1),(0,n.createElementVNode)("div",null,"File Name: "+(0,n.toDisplayString)(null===(r=e.data)||void 0===r?void 0:r.currentVideo.file_name),1),(0,n.createElementVNode)("div",null,"Type: "+(0,n.toDisplayString)(null===(o=e.data)||void 0===o?void 0:o.currentVideo.type),1),(0,n.createElementVNode)("div",null,"Folder: "+(0,n.toDisplayString)(null===(a=e.data)||void 0===a?void 0:a.currentVideo.folder),1),(0,n.createElementVNode)("div",null,"Storage Location: "+(0,n.toDisplayString)(null===(i=e.data)||void 0===i?void 0:i.currentVideo.storage_location),1),(0,n.createElementVNode)("div",null,[(0,n.createTextVNode)("Processing: "),null!==(l=e.data)&&void 0!==l&&l.currentVideo.is_processing?((0,n.openBlock)(),(0,n.createElementBlock)("span",ne,"true")):((0,n.openBlock)(),(0,n.createElementBlock)("span",oe,"false"))]),(0,n.createElementVNode)("div",null,"Length: "+(0,n.toDisplayString)(null===(c=e.data)||void 0===c?void 0:c.currentVideo.length),1)])]})),default:(0,n.withCtx)((function(){var t,r;return[null!==(t=e.data)&&void 0!==t&&t.currentVideo.name?((0,n.openBlock)(),(0,n.createElementBlock)("span",ae,(0,n.toDisplayString)(null===(r=e.data)||void 0===r?void 0:r.currentVideo.name),1)):((0,n.openBlock)(),(0,n.createElementBlock)("span",ie,"Video has no name"))]})),_:1})])):((0,n.openBlock)(),(0,n.createElementBlock)("div",le,"No video object playing"))}}};function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ue(){ue=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new B(n||[]);return o(i,"_invoke",{value:V(e,r,l)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",m="suspendedYield",p="executing",h="completed",y={};function v(){}function g(){}function b(){}var w={};s(w,i,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(L([])));E&&E!==r&&n.call(E,i)&&(w=E);var k=b.prototype=v.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=d(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==se(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function V(t,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=C(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(t,r,n);if("normal"===s.type){if(o=n.done?h:m,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function C(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(se(t)+" is not iterable")}return g.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},N(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,B.prototype={constructor:B,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function de(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function fe(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){de(a,n,o,i,l,"next",e)}function l(e){de(a,n,o,i,l,"throw",e)}i(void 0)}))}}var me={class:"table-row bg-white border-b dark:bg-gray-800 dark:border-gray-700"},pe={class:"table-cell min-w-[8rem] px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap"},he={key:0,class:"ml-2 text-xs badge badge-secondary badge-outline"},ye={class:"md:table-cell px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap text-center"},ve={class:"table-cell px-6 py-4 align-middle text-center"},ge={class:"table-cell px-6 py-4 align-middle text-center"},be={class:"table-cell px-6 py-4 align-middle text-center"},we={class:"table-cell px-6 py-4 align-middle"},xe={class:"flex justify-center items-center w-full"},Ee={class:"cursor-pointer label"},ke=["id"],Ne={class:"modal-box"},Se=(0,n.createElementVNode)("form",{method:"dialog"},[(0,n.createElementVNode)("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕")],-1),Ve=(0,n.createElementVNode)("h3",{class:"font-bold text-lg mb-2"},"Edit Channel Name",-1);const Ce={__name:"AdminChannelRow",props:{channel:Object},emits:["open-modal"],setup:function(e,t){var r=t.emit,o=(0,l.useAdminStore)(),a=(0,i.useNotificationStore)(),c=e,s=r,u=(0,n.ref)(c.channel.name),d=function(){document.getElementById("adminEditChannel_"+c.channel.id).showModal()},f=function(){var e=fe(ue().mark((function e(){return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.updateChannel(c.channel.id,u.value);case 2:document.getElementById("adminEditChannel_"+c.channel.id).close();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(e){s("open-modal",{channel:c.channel,type:e}),o.setActiveItem(e)},p=function(){var e=fe(ue().mark((function e(t){return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.toggleChannelActiveStatus(c.channel.id);case 3:return e.next=5,o.fetchChannels();case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error toggling channel active status:",e.t0),a.setToastNotification("Error toggling channel active status: "+e.t0,"error");case 11:return e.prev=11,t&&t.target&&t.target.blur(),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,7,11,14]])})));return function(t){return e.apply(this,arguments)}}();return function(t,r){var o;return(0,n.openBlock)(),(0,n.createElementBlock)("div",me,[(0,n.createElementVNode)("div",pe,[(0,n.createElementVNode)("button",{onClick:(0,n.withModifiers)(d,["prevent"]),class:"text-xl"},(0,n.toDisplayString)(e.channel.name),1),null!==(o=e.channel)&&void 0!==o&&o.isLive?((0,n.openBlock)(),(0,n.createElementBlock)("div",he,"live")):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",ye,[(0,n.createVNode)(ce,{data:e.channel},null,8,["data"])]),(0,n.createElementVNode)("div",ve,[(0,n.createVNode)((0,n.unref)(ee),{data:e.channel,dataType:"externalSource",dataTypeDb:"external_source",onOpenModal:r[0]||(r[0]=function(e){return m("externalSource")})},null,8,["data"])]),(0,n.createElementVNode)("div",ge,[(0,n.createVNode)((0,n.unref)(ee),{data:e.channel,dataType:"channelPlaylist",dataTypeDb:"channel_playlist",onOpenModal:r[1]||(r[1]=function(e){return m("channelPlaylist")})},null,8,["data"])]),(0,n.createElementVNode)("div",be,[(0,n.createVNode)((0,n.unref)(ee),{data:e.channel,dataType:"mistStream",dataTypeDb:"mist_stream",onOpenModal:r[2]||(r[2]=function(e){return m("mistStream")})},null,8,["data"])]),(0,n.createElementVNode)("div",we,[(0,n.createElementVNode)("div",xe,[(0,n.createElementVNode)("label",Ee,[(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":r[3]||(r[3]=function(t){return e.channel.active=t}),type:"checkbox",onClick:(0,n.withModifiers)(p,["prevent"]),class:"toggle toggle-success"},null,512),[[n.vModelCheckbox,e.channel.active]])])])]),(0,n.createElementVNode)("dialog",{id:"adminEditChannel_"+e.channel.id,class:"modal"},[(0,n.createElementVNode)("div",Ne,[Se,Ve,(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":r[4]||(r[4]=function(e){return u.value=e}),type:"text",class:"input input-bordered w-full max-w-xs"},null,512),[[n.vModelText,u.value]]),(0,n.createElementVNode)("button",{onClick:(0,n.withModifiers)(f,["prevent"]),class:"btn btn-primary ml-2"},"Submit")])],8,ke)])}}};var _e={class:"flex flex-row justify-center my-6 w-full"},Te={class:"join"},Be=["value","onChange","aria-label"];const Le={__name:"AdminChannelPaginator",setup:function(e){var t=(0,l.useAdminStore)();return function(e,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",_e,[(0,n.createElementVNode)("div",Te,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(t).totalChannelsPages,(function(e){return(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("input",{key:e,type:"radio",name:"options",value:e,"onUpdate:modelValue":r[0]||(r[0]=function(e){return(0,n.unref)(t).currentChannelsPage=e}),onChange:function(){return(0,n.unref)(t).setChannelsPage(e)},class:"join-item btn btn-square !bg-none","aria-label":"".concat(e)},null,40,Be)),[[n.vModelRadio,(0,n.unref)(t).currentChannelsPage]])})),128))])])}}};var Pe=r(61273),Oe={class:"table-row"},Ie={scope:"col",class:"table-cell px-6 py-3 uppercase"},Ae=(0,n.createElementVNode)("span",{class:"uppercase"},"Channel ",-1),Me=(0,n.createStaticVNode)('<div scope="col" class="hidden md:table-cell px-6 py-3 uppercase text-center"><span class="uppercase">Current Video</span></div><div scope="col" class="table-cell px-6 py-3 uppercase text-center"><span class="uppercase">External Source</span></div><div scope="col" class="px-6 py-3 max-w-64 text-center"><span class="uppercase">Channel Playlist</span></div><div scope="col" class="table-cell px-6 py-3 text-center"><span class="uppercase">Mist Stream</span></div><div scope="col" class="table-cell px-6 py-3 w-52 text-center"><span class="uppercase">Active</span></div>',5);const je={__name:"AdminChannelRowHeader",emits:["reloadChannelsList"],setup:function(e,t){var r=t.emit;return function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("div",Oe,[(0,n.createElementVNode)("div",Ie,[(0,n.createVNode)((0,n.unref)(Pe.gc),{icon:"fa-repeat",class:"mr-2 cursor-pointer hover:text-blue-500",onClick:t[0]||(t[0]=(0,n.withModifiers)((function(e){return r("reloadChannelsList")}),["prevent"]))}),Ae]),Me])}}};function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Ge(){Ge=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new B(n||[]);return o(i,"_invoke",{value:V(e,r,l)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",m="suspendedYield",p="executing",h="completed",y={};function v(){}function g(){}function b(){}var w={};s(w,i,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(L([])));E&&E!==r&&n.call(E,i)&&(w=E);var k=b.prototype=v.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=d(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==De(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function V(t,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=C(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(t,r,n);if("normal"===s.type){if(o=n.done?h:m,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function C(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(De(t)+" is not iterable")}return g.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},N(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,B.prototype={constructor:B,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Fe(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Ye(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Fe(a,n,o,i,l,"next",e)}function l(e){Fe(a,n,o,i,l,"throw",e)}i(void 0)}))}}var Ue={class:"place-self-center flex flex-col"},ze={id:"topDiv",class:"bg-white text-black dark:bg-gray-800 dark:text-gray-50 p-5 mb-10"},Re=(0,n.createElementVNode)("div",{class:"bg-orange-300 px-2 text-black mb-3"},[(0,n.createElementVNode)("p",null,[(0,n.createElementVNode)("span",{class:"font-semibold"},"TRAVIS NOTE: "),(0,n.createTextVNode)("Use FFMPEG to push an .mp4 to a mist stream. This will allow us to schedule video objects from anywhere into our channels, and we can have a channel that loads the current video at the right time spot in the video based on our schedule saved in the database.")])],-1),He={class:"flex flex-col"},$e={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},Qe={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},Ze={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},qe={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},We={class:"table w-full text-sm text-left text-gray-500 dark:text-gray-400"},Je={class:"table-header-group text-xs text-gray-700 bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},Ke={class:"table-row-group"};const Xe={__name:"Index",setup:function(e){(0,o.c)("admin.channels");var t=(0,a.useAppSettingStore)(),r=(0,i.useNotificationStore)(),d=(0,l.useAdminStore)();d.fetchChannels();var f=function(e){var t=e.channel,r=e.type;d.setSelectedChannel(t),d.setCurrentType(r),d.fetchItems(r),document.getElementById("dynamicModal").showModal()},m=function(){var e=Ye(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.fetchChannels();case 3:r.setToastNotification("Channels reloaded successfully!","success",3e3),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),r.setToastNotification("Failed to reload channels.","error",3e3);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return function(e,r){var o=(0,n.resolveComponent)("Head");return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[(0,n.createVNode)(o,{title:"Admin/Channels"}),(0,n.createElementVNode)("div",Ue,[(0,n.createElementVNode)("div",ze,[(0,n.unref)(t).showFlashMessage?((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(s.A),{key:0,flash:e.$page.props.flash},null,8,["flash"])):(0,n.createCommentVNode)("",!0),(0,n.createVNode)((0,n.unref)(c.A),{displayBadges:!0,badgePrimaryNumber:(0,n.unref)(d).activeChannelsCount,badgeSecondaryNumber:(0,n.unref)(d).channels.length},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)("Channels ")]})),_:1},8,["badgePrimaryNumber","badgeSecondaryNumber"]),(0,n.createVNode)((0,n.unref)(G)),Re,(0,n.createElementVNode)("div",He,[(0,n.createElementVNode)("div",$e,[(0,n.createElementVNode)("div",Qe,[(0,n.createElementVNode)("div",Ze,[(0,n.createElementVNode)("div",qe,[(0,n.createElementVNode)("div",We,[(0,n.createElementVNode)("div",Je,[(0,n.createVNode)(je,{onReloadChannelsList:m})]),(0,n.createElementVNode)("div",Ke,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(d).paginatedChannels,(function(e){return(0,n.openBlock)(),(0,n.createBlock)(Ce,{key:e.id,channel:e,onOpenModal:f},null,8,["channel"])})),128))])]),(0,n.createVNode)(Le)]),(0,n.createVNode)((0,n.unref)(u.A))])])])])])])],64)}}}}}]);
//# sourceMappingURL=4714.js.map