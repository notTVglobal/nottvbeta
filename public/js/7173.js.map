{"version":3,"file":"js/7173.js","mappings":"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","sources":["webpack:///./resources/js/Utilities/PageSetup.js","webpack:///./resources/js/Pages/Shop/Subscription.vue?e8d0","webpack:///./resources/js/Pages/Shop/Subscription.vue","webpack:///./resources/js/Pages/Shop/Subscription.vue?5f6f","webpack:///./resources/js/Pages/Shop/Subscription.vue?e876"],"sourcesContent":["import { onBeforeMount, onMounted } from 'vue'\nimport { useUserStore } from \"@/Stores/UserStore\"\nimport { useAppSettingStore } from \"@/Stores/AppSettingStore\"\nimport { useVideoPlayerStore } from \"@/Stores/VideoPlayerStore\"\nimport { Inertia } from '@inertiajs/inertia'\n\nexport function usePageSetup(pageName) {\n    const userStore = useUserStore()\n    const appSettingStore = useAppSettingStore()\n    const videoPlayerStore = useVideoPlayerStore()\n\n    appSettingStore.currentPage = pageName\n    appSettingStore.showFlashMessage = true\n    appSettingStore.pageIsHidden = false\n\n    if (userStore.isMobile || window.innerWidth < 1024) {\n        appSettingStore.ott = 0;\n    } else {\n        appSettingStore.ott = 1;\n    }\n\n    videoPlayerStore.makeVideoTopRight()\n\n    if (appSettingStore.pageReload) {\n        appSettingStore.pageReload = false\n        window.location.reload(true);\n    }\n    // Check if the URL contains query strings\n\n\n    // Only scroll into view if there are no query strings\n\n        // const topDiv = document.getElementById(\"topDiv\")\n        // if (topDiv) {\n        //     topDiv.scrollIntoView()\n        // }\n        Inertia.on('navigate', (event) => {\n            const hasQueryStrings = window.location.search !== '';\n            if (!hasQueryStrings || appSettingStore.shouldScrollToTop) {\n                requestAnimationFrame(() => {\n                    const topDiv = document.getElementById(\"topDiv\");\n                    if (topDiv) {\n                        topDiv.scrollIntoView({behavior: 'auto'});\n                    } else {\n                        window.scrollTo(0, 0);\n                    }\n                });\n            }\n            appSettingStore.shouldScrollToTop = false;\n        })\n    // Only update if we're not already on this page to avoid overwriting with the current URL\n    appSettingStore.setPrevUrl()\n    appSettingStore.showOttButtons = true\n    appSettingStore.noLayout = false\n\n    // Inertia.reload()\n\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"*[data-v-14583e22]{box-sizing:border-box}body[data-v-14583e22]{-webkit-font-smoothing:antialiased;align-content:center;display:flex;font-family:-apple-system,BlinkMacSystemFont,sans-serif;font-size:16px;height:100vh;justify-content:center;width:100vw}form[data-v-14583e22]{align-self:center;border-radius:7px;box-shadow:0 0 0 .5px #32325d1a,0 2px 5px 0 #32325d1a,0 1px 1.5px 0 #00000012;min-width:500px;padding:40px;width:30vw}.hidden[data-v-14583e22]{display:none}#payment-message[data-v-14583e22]{color:#697386;font-size:16px;line-height:20px;padding-top:12px;text-align:center}#payment-element[data-v-14583e22]{margin-bottom:24px}button[data-v-14583e22]{background:#5469d4;border:0;border-radius:4px;box-shadow:0 4px 5.5px 0 #00000012;color:#fff;cursor:pointer;display:block;font-family:Arial,sans-serif;font-size:16px;font-weight:600;padding:12px 16px;transition:all .2s ease;width:100%}button[data-v-14583e22]:hover{filter:contrast(115%)}button[data-v-14583e22]:disabled{cursor:default;opacity:.5}.spinner[data-v-14583e22],.spinner[data-v-14583e22]:after,.spinner[data-v-14583e22]:before{border-radius:50%}.spinner[data-v-14583e22]{box-shadow:inset 0 0 0 2px;color:#fff;font-size:22px;height:20px;margin:0 auto;position:relative;text-indent:-99999px;transform:translateZ(0);width:20px}.spinner[data-v-14583e22]:after,.spinner[data-v-14583e22]:before{content:\\\"\\\";position:absolute}.spinner[data-v-14583e22]:before{animation:loading-14583e22 2s ease 1.5s infinite;border-radius:20.4px 0 0 20.4px;height:20.4px;left:-.2px;top:-.2px;transform-origin:10.4px 10.2px}.spinner[data-v-14583e22]:after,.spinner[data-v-14583e22]:before{background:#5469d4;width:10.4px}.spinner[data-v-14583e22]:after{animation:loading-14583e22 2s ease infinite;border-radius:0 10.2px 10.2px 0;height:10.2px;left:10.2px;top:-.1px;transform-origin:0 10.2px}@keyframes loading-14583e22{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@media only screen and (max-width:600px){form[data-v-14583e22]{min-width:auto;width:80vw}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./resources/js/Pages/Shop/Subscription.vue\"],\"names\":[],\"mappings\":\"AA0PA,mBACE,qBACF,CAEA,sBAGE,kCAAmC,CAGnC,oBAAqB,CAFrB,YAAa,CAHb,uDAA0D,CAC1D,cAAe,CAKf,YAAa,CAFb,sBAAuB,CAGvB,WACF,CAEA,sBAGE,iBAAkB,CAGlB,iBAAkB,CAFlB,6EAC4E,CAH5E,eAAgB,CAKhB,YAAa,CANb,UAOF,CAEA,yBACE,YACF,CAEA,kCACE,aAAyB,CACzB,cAAe,CACf,gBAAiB,CACjB,gBAAiB,CACjB,iBACF,CAEA,kCACE,kBACF,CAGA,wBACE,kBAAmB,CAInB,QAAS,CADT,iBAAkB,CAQlB,kCAAiD,CATjD,UAAc,CAMd,cAAe,CACf,aAAc,CARd,4BAA8B,CAK9B,cAAe,CACf,eAAgB,CAFhB,iBAAkB,CAKlB,uBAAyB,CAEzB,UACF,CAEA,8BACE,qBACF,CAEA,iCAEE,cAAe,CADf,UAEF,CAGA,2FAGE,iBACF,CAEA,0BAQE,0BAA2B,CAP3B,UAAc,CACd,cAAe,CAKf,WAAY,CAHZ,aAAgB,CAChB,iBAAkB,CAFlB,oBAAqB,CAQrB,uBAAwB,CALxB,UAMF,CAEA,iEAGE,UAAW,CADX,iBAEF,CAEA,iCAUE,gDAAwC,CANxC,+BAAgC,CAFhC,aAAc,CAId,UAAY,CADZ,SAAW,CAGX,8BAGF,CAEA,iEAVE,kBAAmB,CAFnB,YAuBF,CAXA,gCAUE,2CAAmC,CANnC,+BAAgC,CAFhC,aAAc,CAId,WAAY,CADZ,SAAW,CAGX,yBAGF,CAaA,4BACE,GAEE,sBACF,CACA,GAEE,uBACF,CACF,CAEA,yCACE,sBAEE,cAAkB,CADlB,UAEF,CACF\",\"sourcesContent\":[\"<template>\\n\\n  <Head title=\\\"Upgrade Account\\\"/>\\n\\n  <div class=\\\"w-full lace-self-center flex flex-col gap-y-3 bg-orange-400\\\">\\n    <div id=\\\"topDiv\\\" class=\\\"w-full bg-gray-800 text-gray-50 dark:bg-gray-800 dark:text-gray-50 p-5 mb-10\\\">\\n\\n      <!--            <Message v-if=\\\"appSettingStore.showFlashMessage\\\" :flash=\\\"$page.props.flash\\\"/>-->\\n\\n      <header class=\\\"flex justify-between pt-4\\\">\\n        <h1 class=\\\"text-3xl font-semibold pb-3\\\">Subscription</h1>\\n      </header>\\n\\n      <div v-if=\\\"shopStore.upgradeSelection===''\\\" class=\\\"w-full flex flex-col\\\">\\n        <div class=\\\"text-xl\\\">Choose a subscription:</div>\\n        <div class=\\\"mt-2 w-fit\\\">\\n          <button @click.prevent=\\\"shopStore.upgradeMonthly()\\\">Premium Monthly - $25 / month</button>\\n        </div>\\n        <div class=\\\"mt-2 w-fit\\\">\\n          <button @click.prevent=\\\"shopStore.upgradeYearly()\\\">Premium Yearly - $250 / year</button>\\n        </div>\\n        <div class=\\\"mt-2 w-fit hidden\\\">\\n          <button @click.prevent=\\\"shopStore.upgradeForever()\\\">Premium Forever - $999 / one time</button>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"flex flex-row mt-4 px-8\\\">\\n        <div v-if=\\\"shopStore.upgradeSelection!==''\\\" class=\\\"space-y-2 flex flex-col\\\">\\n          <div v-if=\\\"shopStore.upgradeSelection==='monthly'\\\">\\n            <label for=\\\"standard\\\" class=\\\"font-semibold\\\">Premium Monthly - $25 / month</label>\\n          </div>\\n          <div v-if=\\\"shopStore.upgradeSelection==='yearly'\\\">\\n            <label for=\\\"standard\\\" class=\\\"font-semibold\\\">Premium Yearly - $250 / year</label>\\n          </div>\\n          <div v-if=\\\"shopStore.upgradeSelection==='forever'\\\">\\n            <label for=\\\"standard\\\" class=\\\"font-semibold\\\">Premium Forever - $999 / one time</label>\\n          </div>\\n        </div>\\n        <div v-if=\\\"shopStore.upgradeSelection!==''\\\"\\n             class=\\\"px-2 text-blue-500 hover:text-blue-400 font-semibold hover:underline hover:cursor-pointer\\\"\\n             @click=\\\"shopStore.changeUpgradeSelection()\\\">(change)\\n        </div>\\n      </div>\\n\\n      <div v-show=\\\"!shopStore.showPaymentForm\\\" class=\\\"mx-auto mt-8 px-12\\\">\\n        <h2 class=\\\"mt-6 mx-auto text-xl font-semibold text-white dark:text-gray-100\\\">Payment form is loading...</h2>\\n      </div>\\n\\n      <div class=\\\"w-full mx-auto mt-8\\\">\\n        <h2 class=\\\"text-2xl font-semibold text-gray-100 dark:text-gray-100\\\">Payment</h2>\\n\\n        <form id=\\\"payment-form\\\" class=\\\"w-full\\\">\\n          <div id=\\\"link-authentication-element\\\" class=\\\"mb-2\\\">\\n            <!--Stripe.js injects the Link Authentication Element-->\\n          </div>\\n          <div id=\\\"payment-element\\\" class=\\\"w-full\\\">\\n            <!--Stripe.js injects the Payment Element-->\\n          </div>\\n\\n          <button id=\\\"submit\\\"\\n                  class=\\\"h-fit bg-blue-600 hover:bg-blue-500 text-white rounded py-2 px-4\\\"\\n                  @click.prevent=\\\"submit()\\\">\\n            <div class=\\\"spinner hidden\\\" id=\\\"spinner\\\"></div>\\n            <span id=\\\"button-text\\\">Pay now</span>\\n          </button>\\n          <div id=\\\"payment-message\\\" class=\\\"hidden\\\"></div>\\n        </form>\\n\\n        <!-- {/* Show any error or success messages */}-->\\n        <div v-if=\\\"error\\\" id=\\\"payment-error\\\" class=\\\"text-red-600 font-semibold w-full my-2\\\"> {{ error }}</div>\\n        <div v-if=\\\"message\\\" id=\\\"payment-message\\\" class=\\\"mt-1 text-white\\\">{{ message }}</div>\\n      </div>\\n\\n\\n    </div>\\n  </div>\\n\\n</template>\\n\\n<script setup>\\nimport { onMounted } from 'vue'\\nimport { usePageSetup } from '@/Utilities/PageSetup'\\nimport { useAppSettingStore } from '@/Stores/AppSettingStore'\\nimport { useShopStore } from '@/Stores/ShopStore'\\nimport { useForm } from '@inertiajs/inertia-vue3'\\nimport { loadStripe } from '@stripe/stripe-js'\\n\\nusePageSetup('shop/subscribe')\\n\\nconst appSettingStore = useAppSettingStore()\\nconst shopStore = useShopStore()\\n\\nlet props = defineProps({\\n  user: Object,\\n  error: String,\\n  intent: Object,\\n  elements: {},\\n})\\n\\nconst options = {\\n  mode: 'setup',\\n  currency: 'cad',\\n}\\n\\nlet stripe\\nlet elements\\nlet emailAddress\\n\\nlet StripeAPIKey = ''\\nStripeAPIKey = process.env.MIX_STRIPE_KEY\\n\\nonMounted(async () => {\\n  shopStore.customer = props.user\\n\\n  stripe = await loadStripe(StripeAPIKey)\\n\\n  initialize()\\n\\n  showPaymentForm()\\n\\n  document\\n      .querySelector('#payment-form')\\n  // .addEventListener(\\\"submit\\\", handleSubmit);\\n\\n\\n})\\n\\nfunction showPaymentForm() {\\n  shopStore.showPaymentForm = true\\n}\\n\\nfunction initialize() {\\n\\n  const clientSecret = props.intent.client_secret\\n  const appearance = {\\n    theme: 'stripe',\\n    variables: {\\n      colorPrimary: '#0570de',\\n      colorBackground: '#ffffff',\\n      colorBackgroundText: '#ffffff',\\n      colorText: '#222222',\\n      colorDanger: '#df1b41',\\n      fontFamily: 'Ideal Sans, system-ui, sans-serif',\\n      spacingUnit: '4px',\\n    },\\n    rules: {\\n      '.Label': {\\n        color: 'var(--colorBackgroundText)',\\n      },\\n    },\\n  }\\n\\n  elements = stripe.elements({appearance, clientSecret})\\n\\n  // this is for linkPayments\\n  // const linkAuthenticationElement = elements.create(\\\"linkAuthentication\\\");\\n  // linkAuthenticationElement.mount(\\\"#link-authentication-element\\\");\\n  //\\n  // linkAuthenticationElement.on('change', (event) => {\\n  //     emailAddress = event.value.email;\\n  // });\\n\\n  const paymentElementOptions = {\\n    layout: 'tabs',\\n  }\\n\\n  const paymentElement = elements.create('payment', paymentElementOptions)\\n  paymentElement.mount('#payment-element')\\n\\n}\\n\\nasync function submit() {\\n  if (shopStore.upgradeStripeId === '' || null) {\\n    alert('Please select a subscription.')\\n    return\\n  }\\n  setLoading(true)\\n\\n  const {setupIntent, error} = await stripe.confirmSetup({\\n    elements,\\n    confirmParams: {\\n      // Make sure to change this to your payment completion page\\n      return_url: 'https://not.tv/subscription_success',\\n      // receipt_email: emailAddress,\\n    },\\n    redirect: 'if_required',\\n\\n\\n  })\\n\\n  // This point will only be reached if there is an immediate error when\\n  // confirming the payment. Otherwise, your customer will be redirected to\\n  // your `return_url`. For some payment methods like iDEAL, your customer will\\n  // be redirected to an intermediate site first to authorize the payment, then\\n  // redirected to the `return_url`.\\n\\n  if (error) {\\n    if (error.type === 'card_error' || error.type === 'validation_error') {\\n      showMessage(error.message)\\n    } else {\\n      showMessage('An unexpected error occurred.')\\n      setLoading(false)\\n    }\\n  } else {\\n    // console.log(setupIntent)\\n    let form = useForm({\\n      paymentMethod: setupIntent.payment_method,\\n      plan: shopStore.upgradeStripeId,\\n    })\\n\\n    //Submit the form\\n    form.post('/contribute/subscription')\\n\\n  }\\n}\\n\\n\\n// ------- UI helpers -------\\n\\nfunction showMessage(messageText) {\\n  const messageContainer = document.querySelector('#payment-message')\\n\\n  messageContainer.classList.remove('hidden')\\n  messageContainer.textContent = messageText\\n\\n  setTimeout(function () {\\n    messageContainer.classList.add('hidden')\\n    messageContainer.textContent = ''\\n  }, 4000)\\n}\\n\\n// Show a spinner on payment submission\\nfunction setLoading(isLoading) {\\n  if (isLoading) {\\n    // Disable the button and show a spinner\\n    document.querySelector('#submit').disabled = true\\n    document.querySelector('#spinner').classList.remove('hidden')\\n    document.querySelector('#button-text').classList.add('hidden')\\n  } else {\\n    document.querySelector('#submit').disabled = false\\n    document.querySelector('#spinner').classList.add('hidden')\\n    document.querySelector('#button-text').classList.remove('hidden')\\n  }\\n}\\n\\n</script>\\n\\n<style scoped>\\n\\n/* Variables */\\n* {\\n  box-sizing: border-box;\\n}\\n\\nbody {\\n  font-family: -apple-system, BlinkMacSystemFont, sans-serif;\\n  font-size: 16px;\\n  -webkit-font-smoothing: antialiased;\\n  display: flex;\\n  justify-content: center;\\n  align-content: center;\\n  height: 100vh;\\n  width: 100vw;\\n}\\n\\nform {\\n  width: 30vw;\\n  min-width: 500px;\\n  align-self: center;\\n  box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),\\n  0px 2px 5px 0px rgba(50, 50, 93, 0.1), 0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);\\n  border-radius: 7px;\\n  padding: 40px;\\n}\\n\\n.hidden {\\n  display: none;\\n}\\n\\n#payment-message {\\n  color: rgb(105, 115, 134);\\n  font-size: 16px;\\n  line-height: 20px;\\n  padding-top: 12px;\\n  text-align: center;\\n}\\n\\n#payment-element {\\n  margin-bottom: 24px;\\n}\\n\\n/* Buttons and links */\\nbutton {\\n  background: #5469d4;\\n  font-family: Arial, sans-serif;\\n  color: #ffffff;\\n  border-radius: 4px;\\n  border: 0;\\n  padding: 12px 16px;\\n  font-size: 16px;\\n  font-weight: 600;\\n  cursor: pointer;\\n  display: block;\\n  transition: all 0.2s ease;\\n  box-shadow: 0px 4px 5.5px 0px rgba(0, 0, 0, 0.07);\\n  width: 100%;\\n}\\n\\nbutton:hover {\\n  filter: contrast(115%);\\n}\\n\\nbutton:disabled {\\n  opacity: 0.5;\\n  cursor: default;\\n}\\n\\n/* spinner/processing state, errors */\\n.spinner,\\n.spinner:before,\\n.spinner:after {\\n  border-radius: 50%;\\n}\\n\\n.spinner {\\n  color: #ffffff;\\n  font-size: 22px;\\n  text-indent: -99999px;\\n  margin: 0px auto;\\n  position: relative;\\n  width: 20px;\\n  height: 20px;\\n  box-shadow: inset 0 0 0 2px;\\n  -webkit-transform: translateZ(0);\\n  -ms-transform: translateZ(0);\\n  transform: translateZ(0);\\n}\\n\\n.spinner:before,\\n.spinner:after {\\n  position: absolute;\\n  content: \\\"\\\";\\n}\\n\\n.spinner:before {\\n  width: 10.4px;\\n  height: 20.4px;\\n  background: #5469d4;\\n  border-radius: 20.4px 0 0 20.4px;\\n  top: -0.2px;\\n  left: -0.2px;\\n  -webkit-transform-origin: 10.4px 10.2px;\\n  transform-origin: 10.4px 10.2px;\\n  -webkit-animation: loading 2s infinite ease 1.5s;\\n  animation: loading 2s infinite ease 1.5s;\\n}\\n\\n.spinner:after {\\n  width: 10.4px;\\n  height: 10.2px;\\n  background: #5469d4;\\n  border-radius: 0 10.2px 10.2px 0;\\n  top: -0.1px;\\n  left: 10.2px;\\n  -webkit-transform-origin: 0px 10.2px;\\n  transform-origin: 0px 10.2px;\\n  -webkit-animation: loading 2s infinite ease;\\n  animation: loading 2s infinite ease;\\n}\\n\\n@-webkit-keyframes loading {\\n  0% {\\n    -webkit-transform: rotate(0deg);\\n    transform: rotate(0deg);\\n  }\\n  100% {\\n    -webkit-transform: rotate(360deg);\\n    transform: rotate(360deg);\\n  }\\n}\\n\\n@keyframes loading {\\n  0% {\\n    -webkit-transform: rotate(0deg);\\n    transform: rotate(0deg);\\n  }\\n  100% {\\n    -webkit-transform: rotate(360deg);\\n    transform: rotate(360deg);\\n  }\\n}\\n\\n@media only screen and (max-width: 600px) {\\n  form {\\n    width: 80vw;\\n    min-width: initial;\\n  }\\n}\\n\\n</style>\\n\\n\\n\\n\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","<template>\n\n  <Head title=\"Upgrade Account\"/>\n\n  <div class=\"w-full lace-self-center flex flex-col gap-y-3 bg-orange-400\">\n    <div id=\"topDiv\" class=\"w-full bg-gray-800 text-gray-50 dark:bg-gray-800 dark:text-gray-50 p-5 mb-10\">\n\n      <!--            <Message v-if=\"appSettingStore.showFlashMessage\" :flash=\"$page.props.flash\"/>-->\n\n      <header class=\"flex justify-between pt-4\">\n        <h1 class=\"text-3xl font-semibold pb-3\">Subscription</h1>\n      </header>\n\n      <div v-if=\"shopStore.upgradeSelection===''\" class=\"w-full flex flex-col\">\n        <div class=\"text-xl\">Choose a subscription:</div>\n        <div class=\"mt-2 w-fit\">\n          <button @click.prevent=\"shopStore.upgradeMonthly()\">Premium Monthly - $25 / month</button>\n        </div>\n        <div class=\"mt-2 w-fit\">\n          <button @click.prevent=\"shopStore.upgradeYearly()\">Premium Yearly - $250 / year</button>\n        </div>\n        <div class=\"mt-2 w-fit hidden\">\n          <button @click.prevent=\"shopStore.upgradeForever()\">Premium Forever - $999 / one time</button>\n        </div>\n      </div>\n\n      <div class=\"flex flex-row mt-4 px-8\">\n        <div v-if=\"shopStore.upgradeSelection!==''\" class=\"space-y-2 flex flex-col\">\n          <div v-if=\"shopStore.upgradeSelection==='monthly'\">\n            <label for=\"standard\" class=\"font-semibold\">Premium Monthly - $25 / month</label>\n          </div>\n          <div v-if=\"shopStore.upgradeSelection==='yearly'\">\n            <label for=\"standard\" class=\"font-semibold\">Premium Yearly - $250 / year</label>\n          </div>\n          <div v-if=\"shopStore.upgradeSelection==='forever'\">\n            <label for=\"standard\" class=\"font-semibold\">Premium Forever - $999 / one time</label>\n          </div>\n        </div>\n        <div v-if=\"shopStore.upgradeSelection!==''\"\n             class=\"px-2 text-blue-500 hover:text-blue-400 font-semibold hover:underline hover:cursor-pointer\"\n             @click=\"shopStore.changeUpgradeSelection()\">(change)\n        </div>\n      </div>\n\n      <div v-show=\"!shopStore.showPaymentForm\" class=\"mx-auto mt-8 px-12\">\n        <h2 class=\"mt-6 mx-auto text-xl font-semibold text-white dark:text-gray-100\">Payment form is loading...</h2>\n      </div>\n\n      <div class=\"w-full mx-auto mt-8\">\n        <h2 class=\"text-2xl font-semibold text-gray-100 dark:text-gray-100\">Payment</h2>\n\n        <form id=\"payment-form\" class=\"w-full\">\n          <div id=\"link-authentication-element\" class=\"mb-2\">\n            <!--Stripe.js injects the Link Authentication Element-->\n          </div>\n          <div id=\"payment-element\" class=\"w-full\">\n            <!--Stripe.js injects the Payment Element-->\n          </div>\n\n          <button id=\"submit\"\n                  class=\"h-fit bg-blue-600 hover:bg-blue-500 text-white rounded py-2 px-4\"\n                  @click.prevent=\"submit()\">\n            <div class=\"spinner hidden\" id=\"spinner\"></div>\n            <span id=\"button-text\">Pay now</span>\n          </button>\n          <div id=\"payment-message\" class=\"hidden\"></div>\n        </form>\n\n        <!-- {/* Show any error or success messages */}-->\n        <div v-if=\"error\" id=\"payment-error\" class=\"text-red-600 font-semibold w-full my-2\"> {{ error }}</div>\n        <div v-if=\"message\" id=\"payment-message\" class=\"mt-1 text-white\">{{ message }}</div>\n      </div>\n\n\n    </div>\n  </div>\n\n</template>\n\n<script setup>\nimport { onMounted } from 'vue'\nimport { usePageSetup } from '@/Utilities/PageSetup'\nimport { useAppSettingStore } from '@/Stores/AppSettingStore'\nimport { useShopStore } from '@/Stores/ShopStore'\nimport { useForm } from '@inertiajs/inertia-vue3'\nimport { loadStripe } from '@stripe/stripe-js'\n\nusePageSetup('shop/subscribe')\n\nconst appSettingStore = useAppSettingStore()\nconst shopStore = useShopStore()\n\nlet props = defineProps({\n  user: Object,\n  error: String,\n  intent: Object,\n  elements: {},\n})\n\nconst options = {\n  mode: 'setup',\n  currency: 'cad',\n}\n\nlet stripe\nlet elements\nlet emailAddress\n\nlet StripeAPIKey = ''\nStripeAPIKey = process.env.MIX_STRIPE_KEY\n\nonMounted(async () => {\n  shopStore.customer = props.user\n\n  stripe = await loadStripe(StripeAPIKey)\n\n  initialize()\n\n  showPaymentForm()\n\n  document\n      .querySelector('#payment-form')\n  // .addEventListener(\"submit\", handleSubmit);\n\n\n})\n\nfunction showPaymentForm() {\n  shopStore.showPaymentForm = true\n}\n\nfunction initialize() {\n\n  const clientSecret = props.intent.client_secret\n  const appearance = {\n    theme: 'stripe',\n    variables: {\n      colorPrimary: '#0570de',\n      colorBackground: '#ffffff',\n      colorBackgroundText: '#ffffff',\n      colorText: '#222222',\n      colorDanger: '#df1b41',\n      fontFamily: 'Ideal Sans, system-ui, sans-serif',\n      spacingUnit: '4px',\n    },\n    rules: {\n      '.Label': {\n        color: 'var(--colorBackgroundText)',\n      },\n    },\n  }\n\n  elements = stripe.elements({appearance, clientSecret})\n\n  // this is for linkPayments\n  // const linkAuthenticationElement = elements.create(\"linkAuthentication\");\n  // linkAuthenticationElement.mount(\"#link-authentication-element\");\n  //\n  // linkAuthenticationElement.on('change', (event) => {\n  //     emailAddress = event.value.email;\n  // });\n\n  const paymentElementOptions = {\n    layout: 'tabs',\n  }\n\n  const paymentElement = elements.create('payment', paymentElementOptions)\n  paymentElement.mount('#payment-element')\n\n}\n\nasync function submit() {\n  if (shopStore.upgradeStripeId === '' || null) {\n    alert('Please select a subscription.')\n    return\n  }\n  setLoading(true)\n\n  const {setupIntent, error} = await stripe.confirmSetup({\n    elements,\n    confirmParams: {\n      // Make sure to change this to your payment completion page\n      return_url: 'https://not.tv/subscription_success',\n      // receipt_email: emailAddress,\n    },\n    redirect: 'if_required',\n\n\n  })\n\n  // This point will only be reached if there is an immediate error when\n  // confirming the payment. Otherwise, your customer will be redirected to\n  // your `return_url`. For some payment methods like iDEAL, your customer will\n  // be redirected to an intermediate site first to authorize the payment, then\n  // redirected to the `return_url`.\n\n  if (error) {\n    if (error.type === 'card_error' || error.type === 'validation_error') {\n      showMessage(error.message)\n    } else {\n      showMessage('An unexpected error occurred.')\n      setLoading(false)\n    }\n  } else {\n    // console.log(setupIntent)\n    let form = useForm({\n      paymentMethod: setupIntent.payment_method,\n      plan: shopStore.upgradeStripeId,\n    })\n\n    //Submit the form\n    form.post('/contribute/subscription')\n\n  }\n}\n\n\n// ------- UI helpers -------\n\nfunction showMessage(messageText) {\n  const messageContainer = document.querySelector('#payment-message')\n\n  messageContainer.classList.remove('hidden')\n  messageContainer.textContent = messageText\n\n  setTimeout(function () {\n    messageContainer.classList.add('hidden')\n    messageContainer.textContent = ''\n  }, 4000)\n}\n\n// Show a spinner on payment submission\nfunction setLoading(isLoading) {\n  if (isLoading) {\n    // Disable the button and show a spinner\n    document.querySelector('#submit').disabled = true\n    document.querySelector('#spinner').classList.remove('hidden')\n    document.querySelector('#button-text').classList.add('hidden')\n  } else {\n    document.querySelector('#submit').disabled = false\n    document.querySelector('#spinner').classList.add('hidden')\n    document.querySelector('#button-text').classList.remove('hidden')\n  }\n}\n\n</script>\n\n<style scoped>\n\n/* Variables */\n* {\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, sans-serif;\n  font-size: 16px;\n  -webkit-font-smoothing: antialiased;\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  height: 100vh;\n  width: 100vw;\n}\n\nform {\n  width: 30vw;\n  min-width: 500px;\n  align-self: center;\n  box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),\n  0px 2px 5px 0px rgba(50, 50, 93, 0.1), 0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);\n  border-radius: 7px;\n  padding: 40px;\n}\n\n.hidden {\n  display: none;\n}\n\n#payment-message {\n  color: rgb(105, 115, 134);\n  font-size: 16px;\n  line-height: 20px;\n  padding-top: 12px;\n  text-align: center;\n}\n\n#payment-element {\n  margin-bottom: 24px;\n}\n\n/* Buttons and links */\nbutton {\n  background: #5469d4;\n  font-family: Arial, sans-serif;\n  color: #ffffff;\n  border-radius: 4px;\n  border: 0;\n  padding: 12px 16px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  display: block;\n  transition: all 0.2s ease;\n  box-shadow: 0px 4px 5.5px 0px rgba(0, 0, 0, 0.07);\n  width: 100%;\n}\n\nbutton:hover {\n  filter: contrast(115%);\n}\n\nbutton:disabled {\n  opacity: 0.5;\n  cursor: default;\n}\n\n/* spinner/processing state, errors */\n.spinner,\n.spinner:before,\n.spinner:after {\n  border-radius: 50%;\n}\n\n.spinner {\n  color: #ffffff;\n  font-size: 22px;\n  text-indent: -99999px;\n  margin: 0px auto;\n  position: relative;\n  width: 20px;\n  height: 20px;\n  box-shadow: inset 0 0 0 2px;\n  -webkit-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  transform: translateZ(0);\n}\n\n.spinner:before,\n.spinner:after {\n  position: absolute;\n  content: \"\";\n}\n\n.spinner:before {\n  width: 10.4px;\n  height: 20.4px;\n  background: #5469d4;\n  border-radius: 20.4px 0 0 20.4px;\n  top: -0.2px;\n  left: -0.2px;\n  -webkit-transform-origin: 10.4px 10.2px;\n  transform-origin: 10.4px 10.2px;\n  -webkit-animation: loading 2s infinite ease 1.5s;\n  animation: loading 2s infinite ease 1.5s;\n}\n\n.spinner:after {\n  width: 10.4px;\n  height: 10.2px;\n  background: #5469d4;\n  border-radius: 0 10.2px 10.2px 0;\n  top: -0.1px;\n  left: 10.2px;\n  -webkit-transform-origin: 0px 10.2px;\n  transform-origin: 0px 10.2px;\n  -webkit-animation: loading 2s infinite ease;\n  animation: loading 2s infinite ease;\n}\n\n@-webkit-keyframes loading {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loading {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@media only screen and (max-width: 600px) {\n  form {\n    width: 80vw;\n    min-width: initial;\n  }\n}\n\n</style>\n\n\n\n\n\n","import api from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-9.use[1]!../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-9.use[2]!../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./Subscription.vue?vue&type=style&index=0&id=14583e22&scoped=true&lang=css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import script from \"./Subscription.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Subscription.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Subscription.vue?vue&type=style&index=0&id=14583e22&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-14583e22\"]])\n\nexport default __exports__"],"names":["usePageSetup","pageName","userStore","useUserStore","appSettingStore","useAppSettingStore","videoPlayerStore","useVideoPlayerStore","currentPage","showFlashMessage","pageIsHidden","isMobile","window","innerWidth","ott","makeVideoTopRight","pageReload","location","reload","Inertia","on","event","search","shouldScrollToTop","requestAnimationFrame","topDiv","document","getElementById","scrollIntoView","behavior","scrollTo","setPrevUrl","showOttButtons","noLayout","___CSS_LOADER_EXPORT___","push","module","id","stripe","elements","shopStore","useShopStore","props","__props","initialize","clientSecret","intent","client_secret","appearance","theme","variables","colorPrimary","colorBackground","colorBackgroundText","colorText","colorDanger","fontFamily","spacingUnit","rules","color","create","layout","mount","_submit","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","_yield$stripe$confirm","setupIntent","error","wrap","_context2","prev","next","upgradeStripeId","alert","abrupt","setLoading","confirmSetup","confirmParams","return_url","redirect","sent","type","showMessage","message","useForm","paymentMethod","payment_method","plan","post","stop","apply","arguments","messageText","messageContainer","querySelector","classList","remove","textContent","setTimeout","add","isLoading","disabled","process","onMounted","_callee","_context","customer","user","loadStripe","showPaymentForm","options","locals"],"sourceRoot":""}