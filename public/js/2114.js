"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2114],{5398:(e,t,n)=>{n.d(t,{m:()=>o});var o=(0,n(9876).Q_)("newsStore",{state:function(){return{newsArticleIdTiptop:"",newsArticleTitleTiptop:"",newsArticleContentTiptop:""}},actions:{}})},6050:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(4015),r=n.n(o),i=n(3645),l=n.n(i)()(r());l.push([e.id,"p[data-v-770a4e2f]{margin-bottom:1em;margin-top:.75em}ol[data-v-770a4e2f],ul[data-v-770a4e2f]{padding:0 1rem}","",{version:3,sources:["webpack://./resources/js/Components/TextEditor/TiptapNewsPostEdit.vue"],names:[],mappings:"AAwGA,mBAEI,iBAAkB,CADlB,gBAEJ,CACA,wCAEI,cACJ",sourcesContent:['<template>\n    <button @click.prevent="editor.chain().focus().toggleBold().run()" class="py-1 px-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-400 rounded-lg font-bold">\n        B\n    </button>\n    <button @click.prevent="editor.chain().focus().toggleItalic().run()" class="py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-400 rounded-lg font-italic">\n        i\n    </button>\n\x3c!--    <button--\x3e\n\x3c!--        @click="editor.chain().focus().undo().run()"--\x3e\n\x3c!--        :disabled="!editor.can().undo()"--\x3e\n\x3c!--    >--\x3e\n\x3c!--        undo--\x3e\n\x3c!--    </button>--\x3e\n\x3c!--    <button--\x3e\n\x3c!--        @click="editor.chain().focus().redo().run()"--\x3e\n\x3c!--        :disabled="!editor.can().redo()"--\x3e\n\x3c!--    >--\x3e\n\x3c!--        redo--\x3e\n\x3c!--    </button>--\x3e\n\x3c!--    <button @click.prevent="editor.chain().focus().toggleBulletList().run()"  class="ProseMirror py-1 px-3 ml-2 mb-2 bg-gray-200 rounded-lg">--\x3e\n\x3c!--        Bullets--\x3e\n\x3c!--    </button>--\x3e\n\x3c!--    <button @click.prevent="editor.chain().focus().toggleList().run()" class="py-1 px-3 ml-2 mb-2 bg-gray-200 rounded-lg">--\x3e\n\x3c!--        List--\x3e\n\x3c!--    </button>--\x3e\n\x3c!--    <button @click.prevent="editor.chain().focus().toggleBlockquote().run()" class="py-1 px-3 ml-2 mb-2 bg-gray-200 rounded-lg">--\x3e\n\x3c!--        Block--\x3e\n\x3c!--    </button>--\x3e\n\x3c!--    <button @click.prevent="editor.chain().focus().toggleCode().run()" class="py-1 px-3 ml-2 mb-2 bg-gray-200 rounded-lg">--\x3e\n\x3c!--        Code--\x3e\n\x3c!--    </button>--\x3e\n\x3c!--    <tabbable-textarea :editor="editor" class="element" />--\x3e\n    <div class="overflow-y-scroll min-h-[13rem] max-h-[13rem] mb-2 pb-2 bg-gray-50 border border-1 border-gray-300 focus:outline-none text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 ">\n        <editor-content :editor="editor" class=""/>\n    </div>\n</template>\n\n<script setup>\nimport {useNewsStore} from "@/Stores/NewsStore"\nimport { Editor, EditorContent } from \'@tiptap/vue-3\'\nimport StarterKit from \'@tiptap/starter-kit\'\nimport Document from \'@tiptap/extension-document\'\nimport Paragraph from \'@tiptap/extension-paragraph\'\nimport Text from \'@tiptap/extension-text\'\nimport HardBreak from \'@tiptap/extension-hard-break\'\n// import {History} from "@tiptap/extension-history";\n// import {BulletList} from "@tiptap/extension-bullet-list";\nimport {ListItem} from "@tiptap/extension-list-item";\n// import {onBeforeUnmount} from "vue";\nimport {Inertia} from "@inertiajs/inertia";\nimport throttle from "lodash/throttle"\nimport axios from "axios";\nimport TabbableTextarea from "@/Components/TabbableTextarea.vue";\n\nlet newsStore = useNewsStore();\n\nconst editor = new Editor({\n    content: newsStore.newsArticleContentTiptop,\n    extensions: [\n        StarterKit,\n    ],\n\n\n\n    onUpdate: ({ editor }) => {\n        newsStore.newsArticleContentTiptop = editor.getHTML()\n        // const value = editor.getJSON()\n\n        // Auto-save -> triggered on every change,\n        // currently disabled. Needs to be throttled.\n        //\n        // axios.post(\'/news/save\', { id: newsStore.newsArticleIdTiptop, body:newsStore.newsArticleContentTiptop, title:newsStore.newsArticleTitleTiptop })\n    },\n\n    autofocus: true,\n    editorProps: {\n        attributes: {\n            class: \'min-h-[12rem] max-h-[12rem] block w-full p-2.5 focus:outline-none\'\n        }\n    }\n})\n\n// editor.commands.setContent({\n//     "type": "doc",\n//     "content": newsStore.newsArticleTiptop,\n// })\n\n// const json = editor.getJSON()\n// newsStore.newsArticleTiptop = editor.getHTML()\n\n\n// onBeforeUnmount(() => {\n//     // this isn\'t working, I think it\'s\n//     // needed for the history extension.\n//     editor.destroy()\n// })\n\n// History.configure({\n//     depth: 10,\n// })\n\n<\/script>\n\n<style scoped>\np {\n    margin-top: 0.75em;\n    margin-bottom: 1em;\n}\nul,\nol {\n    padding: 0 1rem;\n}\n</style>\n'],sourceRoot:""}]);const s=l},9715:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(821),r=["onKeydown","textContent"];const i={__name:"TabbableTextarea",props:{modelValue:String},emits:["update:modelValue"],setup:function(e,t){var n=t.emit;function i(e){var t=e.target,n=t.value,o=t.selectionStart,r=t.selectionEnd;t.value=n.substring(0,o)+"\t"+n.substring(r),t.selectionStart=t.selectionEnd=o+1}return function(t,l){return(0,o.openBlock)(),(0,o.createElementBlock)("textarea",{onKeydown:(0,o.withKeys)((0,o.withModifiers)(i,["prevent"]),["tab"]),onKeyup:l[0]||(l[0]=function(e){return(0,o.unref)(n)("update:modelValue",e.target.value)}),textContent:(0,o.toDisplayString)(e.modelValue)},null,40,r)}}}},2114:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var o=n(821),r=n(191),i=n(771),l=n(5398),s=n(9038),a=n(1114),c=n(6044),d=(n(415),n(3513),n(7553),n(6671),n(7439),n(9680),n(3493),n(9669),n(9715),{class:"overflow-y-scroll min-h-[13rem] max-h-[13rem] mb-2 pb-2 bg-gray-50 border border-1 border-gray-300 focus:outline-none text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500"});const u={__name:"TiptapNewsPostEdit",setup:function(e){var t=(0,l.m)(),n=new a.ML({content:t.newsArticleContentTiptop,extensions:[c.Z],onUpdate:function(e){var n=e.editor;t.newsArticleContentTiptop=n.getHTML()},autofocus:!0,editorProps:{attributes:{class:"min-h-[12rem] max-h-[12rem] block w-full p-2.5 focus:outline-none"}}});return function(e,t){return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createElementVNode)("button",{onClick:t[0]||(t[0]=(0,o.withModifiers)((function(e){return(0,o.unref)(n).chain().focus().toggleBold().run()}),["prevent"])),class:"py-1 px-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-400 rounded-lg font-bold"}," B "),(0,o.createElementVNode)("button",{onClick:t[1]||(t[1]=(0,o.withModifiers)((function(e){return(0,o.unref)(n).chain().focus().toggleItalic().run()}),["prevent"])),class:"py-1 px-3 ml-2 mb-2 text-black hover:text-white bg-gray-200 hover:bg-gray-400 rounded-lg font-italic"}," i "),(0,o.createElementVNode)("div",d,[(0,o.createVNode)((0,o.unref)(a.kg),{editor:(0,o.unref)(n),class:""},null,8,["editor"])])],64)}}};var p=n(3379),m=n.n(p),b=n(6050),g={insert:"head",singleton:!1};m()(b.Z,g);b.Z.locals;const x=(0,n(3744).Z)(u,[["__scopeId","data-v-770a4e2f"]]);var f=(0,o.createElementVNode)("div",{id:"topDiv"},null,-1),w={class:"place-self-center flex flex-col gap-y-3"},y={class:"bg-white text-black dark:bg-gray-800 dark:text-gray-50 p-5 mb-10"},v={class:"flex flex-row justify-between"},h=(0,o.createElementVNode)("h2",{class:"text-xl font-semibold leading-tight"}," Edit News Post ",-1),k={class:"flex justify-end space-x-2"},T={key:0,class:"px-4 py-2 text-white bg-yellow-600 hover:bg-yellow-500 rounded-lg disabled:bg-gray-400"},C={class:"p-6 border-b border-gray-200"},E=["onSubmit"],N={class:"mb-6"},B=(0,o.createElementVNode)("label",{for:"Title",class:"block mb-2 text-sm font-bold text-gray-900 dark:text-gray-300"},"Title",-1),V={key:0,class:"text-sm text-red-600"},A={class:"mb-6"},S=(0,o.createElementVNode)("label",{for:"slug",class:"block mb-2 text-sm font-bold text-gray-900 dark:text-gray-300"},"Content",-1),I={key:1,class:"text-sm text-red-600"},M=["disabled"];const L={__name:"Edit",props:{news:Object,can:Object},setup:function(e){var t=e,n=(0,r.q)(),a=(0,i.L)(),c=(0,l.m)();n.currentPage="newsEdit",(0,o.onBeforeMount)((function(){a.scrollToTopCounter=0})),(0,o.onMounted)((function(){n.makeVideoTopRight(),0===a.scrollToTopCounter&&(document.getElementById("topDiv").scrollIntoView(),a.scrollToTopCounter++)})),c.newsArticleIdTiptop=t.news.id,c.newsArticleTitleTiptop=t.news.title,c.newsArticleContentTiptop=t.news.content;var d=(0,s.cI)({id:t.news.id,title:t.news.title,body:c.newsArticleContentTiptop});d.body=c.newsArticleContentTiptop;var u=function(){d.body=c.newsArticleContentTiptop,d.put(route("news.update",t.news.id))};function p(){c.newsArticleContentTiptop="",window.history.back()}return function(e,r){var i=(0,o.resolveComponent)("Head"),l=(0,o.resolveComponent)("Link");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createVNode)(i,{title:"Edit News Post"}),f,(0,o.createElementVNode)("div",w,[(0,o.createElementVNode)("div",y,[(0,o.createElementVNode)("div",v,[h,(0,o.createElementVNode)("div",k,[(0,o.createVNode)(l,{href:"/newsroom"},{default:(0,o.withCtx)((function(){return[t.can.viewNewsroom?((0,o.openBlock)(),(0,o.createElementBlock)("button",T,"Newsroom")):(0,o.createCommentVNode)("",!0)]})),_:1}),(0,o.createElementVNode)("div",null,[(0,o.createElementVNode)("button",{onClick:p,class:"px-4 py-2 text-white bg-orange-600 hover:bg-orange-500 rounded-lg"},"Cancel ")])])]),(0,o.createElementVNode)("div",C,[(0,o.createElementVNode)("form",{onSubmit:(0,o.withModifiers)(u,["prevent"])},[(0,o.createElementVNode)("div",N,[B,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=function(e){return(0,o.unref)(d).title=e}),name:"title",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:""},null,512),[[o.vModelText,(0,o.unref)(d).title]]),(0,o.unref)(d).errors.title?((0,o.openBlock)(),(0,o.createElementBlock)("div",V,(0,o.toDisplayString)((0,o.unref)(d).errors.title),1)):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("div",A,[S,"newsEdit"===(0,o.unref)(n).currentPage?((0,o.openBlock)(),(0,o.createBlock)(x,{key:0,name:"content"})):(0,o.createCommentVNode)("",!0),(0,o.unref)(d).errors.content?((0,o.openBlock)(),(0,o.createElementBlock)("div",I,(0,o.toDisplayString)((0,o.unref)(d).errors.content),1)):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("button",{type:"submit",class:(0,o.normalizeClass)(["text-white bg-blue-700 hover:bg-blue-500 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5",{"opacity-25":(0,o.unref)(d).processing}]),disabled:(0,o.unref)(d).processing}," Save ",10,M)],40,E)])])])],64)}}}}}]);
//# sourceMappingURL=2114.js.map