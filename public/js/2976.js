/*! For license information please see 2976.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2976],{24831:(e,t,n)=>{n.d(t,{U:()=>s});n(70821);var r=n(90771),o=n(58358),a=n(40191),i=n(87879);function s(e){var t=(0,r.useUserStore)(),n=(0,o.useAppSettingStore)(),s=(0,a.useVideoPlayerStore)();n.currentPage=e,n.showFlashMessage=!0,n.pageIsHidden=!1,t.isMobile||window.innerWidth<1024||n.fullPage?n.ott=0:(n.ott=1,n.showOttButtons=!0),s.makeVideoTopRight(),n.pageReload&&(n.pageReload=!1,n.pageWasReloaded=!0,window.location.reload()),i.Nd.on("navigate",(function(e){t.isMobile||window.innerWidth<1024||n.fullPage?n.ott=0:n.ott=1,""!==window.location.search&&!n.shouldScrollToTop||requestAnimationFrame((function(){var e=document.getElementById("topDiv");e?e.scrollIntoView({behavior:"auto"}):window.scrollTo(0,0)})),n.shouldScrollToTop=!1})),n.setPrevUrl(),n.showOttButtons=!0,n.noLayout=!1}},20248:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(94015),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,'*[data-v-438bb899]{box-sizing:border-box}body[data-v-438bb899]{-webkit-font-smoothing:antialiased;align-content:center;display:flex;font-family:-apple-system,BlinkMacSystemFont,sans-serif;font-size:16px;height:100vh;justify-content:center;width:100vw}form[data-v-438bb899]{align-self:center;border-radius:7px;box-shadow:0 0 0 .5px #32325d1a,0 2px 5px 0 #32325d1a,0 1px 1.5px 0 #00000012;min-width:500px;padding:40px;width:30vw}.hidden[data-v-438bb899]{display:none}#payment-message[data-v-438bb899]{color:#697386;font-size:16px;line-height:20px;padding-top:12px;text-align:center}#payment-element[data-v-438bb899]{margin-bottom:24px}button[data-v-438bb899]{background:#5469d4;border:0;border-radius:4px;box-shadow:0 4px 5.5px 0 #00000012;color:#fff;cursor:pointer;display:block;font-family:Arial,sans-serif;font-size:16px;font-weight:600;padding:12px 16px;transition:all .2s ease;width:100%}button[data-v-438bb899]:hover{filter:contrast(115%)}button[data-v-438bb899]:disabled{cursor:default;opacity:.5}.spinner[data-v-438bb899],.spinner[data-v-438bb899]:after,.spinner[data-v-438bb899]:before{border-radius:50%}.spinner[data-v-438bb899]{box-shadow:inset 0 0 0 2px;color:#fff;font-size:22px;height:20px;margin:0 auto;position:relative;text-indent:-99999px;transform:translateZ(0);width:20px}.spinner[data-v-438bb899]:after,.spinner[data-v-438bb899]:before{content:"";position:absolute}.spinner[data-v-438bb899]:before{animation:loading-438bb899 2s ease 1.5s infinite;border-radius:20.4px 0 0 20.4px;height:20.4px;left:-.2px;top:-.2px;transform-origin:10.4px 10.2px}.spinner[data-v-438bb899]:after,.spinner[data-v-438bb899]:before{background:#5469d4;width:10.4px}.spinner[data-v-438bb899]:after{animation:loading-438bb899 2s ease infinite;border-radius:0 10.2px 10.2px 0;height:10.2px;left:10.2px;top:-.1px;transform-origin:0 10.2px}@keyframes loading-438bb899{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@media only screen and (max-width:600px){form[data-v-438bb899]{min-width:auto;width:80vw}}',"",{version:3,sources:["webpack://./resources/js/Pages/Shop/OneTimeContribution.vue"],names:[],mappings:"AA+aA,mBACE,qBACF,CAEA,sBAGE,kCAAmC,CAGnC,oBAAqB,CAFrB,YAAa,CAHb,uDAA0D,CAC1D,cAAe,CAKf,YAAa,CAFb,sBAAuB,CAGvB,WACF,CAEA,sBAGE,iBAAkB,CAGlB,iBAAkB,CAFlB,6EAC4E,CAH5E,eAAgB,CAKhB,YAAa,CANb,UAOF,CAEA,yBACE,YACF,CAEA,kCACE,aAAyB,CACzB,cAAe,CACf,gBAAiB,CACjB,gBAAiB,CACjB,iBACF,CAEA,kCACE,kBACF,CAGA,wBACE,kBAAmB,CAInB,QAAS,CADT,iBAAkB,CAQlB,kCAAiD,CATjD,UAAc,CAMd,cAAe,CACf,aAAc,CARd,4BAA8B,CAK9B,cAAe,CACf,eAAgB,CAFhB,iBAAkB,CAKlB,uBAAyB,CAEzB,UACF,CAEA,8BACE,qBACF,CAEA,iCAEE,cAAe,CADf,UAEF,CAGA,2FAGE,iBACF,CAEA,0BAQE,0BAA2B,CAP3B,UAAc,CACd,cAAe,CAKf,WAAY,CAHZ,aAAgB,CAChB,iBAAkB,CAFlB,oBAAqB,CAQrB,uBAAwB,CALxB,UAMF,CAEA,iEAGE,UAAW,CADX,iBAEF,CAEA,iCAUE,gDAAwC,CANxC,+BAAgC,CAFhC,aAAc,CAId,UAAY,CADZ,SAAW,CAGX,8BAGF,CAEA,iEAVE,kBAAmB,CAFnB,YAuBF,CAXA,gCAUE,2CAAmC,CANnC,+BAAgC,CAFhC,aAAc,CAId,WAAY,CADZ,SAAW,CAGX,yBAGF,CAaA,4BACE,GAEE,sBACF,CACA,GAEE,uBACF,CACF,CAEA,yCACE,sBAEE,cAAkB,CADlB,UAEF,CACF",sourcesContent:["<template>\n\n  <Head v-if=\"shopStore.selectedFavourite\" :title=\"`Contribution to ${shopStore.selectedFavourite.name}`\"/>\n  <Head v-else :title=\"`Contribute a Donation`\"/>\n\n  <div class=\"w-full lace-self-center flex flex-col gap-y-3 bg-orange-400\">\n    <div id=\"topDiv\" class=\"w-full bg-gray-800 text-gray-50 dark:bg-gray-800 dark:text-gray-50 p-5 mb-10\">\n\n      \x3c!--            <Message v-if=\"appSettingStore.showFlashMessage\" :flash=\"$page.props.flash\"/>--\x3e\n\n      <header class=\"flex justify-center pt-4 mt-2 mb-4\">\n        <h1 class=\"text-3xl font-semibold pb-3\">\n          <span v-if=\"shopStore.selectedFavourite.name\" class=\"capitalize\">Contribute to {{\n              shopStore.selectedFavourite.name\n            }}</span>\n          <span v-else>Contribute to notTV</span>\n        </h1>\n      </header>\n\n\n      <section id=\"security-assurance\">\n        <div style=\"text-align: center; margin-bottom: 20px;\">\n          \x3c!-- Font Awesome Padlock Icon --\x3e\n          <font-awesome-icon icon=\"fa-lock\" aria-hidden=\"true\" style=\"font-size: 24px; color: #2c3e50;\"/>\n        </div>\n        <div style=\"text-align: center; max-width: 600px; margin: auto;\">\n          <h2>Your Security, Our Priority</h2>\n          <p>We take your security seriously. All transactions are encrypted and processed through secure payment\n            gateways. Your payment information is never stored on our servers, ensuring your data remains private and\n            protected.</p>\n        </div>\n      </section>\n\n\n      <div class=\"flex flex-col justify-center items-center w-full mx-auto mt-8\">\n        <div v-if=\"shopStore.selectedFavourite.name\" class=\"flex flex-col text-center\">\n          <h2 class=\"text-2xl font-semibold text-gray-100 dark:text-gray-100\">${{ shopStore.donationAmount }} Donation\n            to</h2>\n          <div class=\"flex items-center gap-2 mt-2\">\n            <FavouriteSelectedImage :item=\"shopStore.selectedFavourite\"/>\n            <span class=\"text-xl\">{{ shopStore.selectedFavourite.name }}</span>\n          </div>\n        </div>\n        <div v-else class=\"flex flex-col\">\n          <h2 class=\"text-2xl font-semibold text-gray-100 dark:text-gray-100 mb-2\">${{ shopStore.donationAmount }}\n            Donation\n            to</h2>\n          <img :src=\"`/storage/images/logo_white.svg`\" alt=\"notTV Logo White\" class=\"w-30\">\n        </div>\n\n        <div v-if=\"!shopStore.showPaymentForm\"\n             class=\"flex flex-col w-full items-center justify-center text-center mx-auto mt-8 px-12\">\n          <h2 class=\"mt-6 mx-auto text-xl font-semibold text-white dark:text-gray-100\">Payment form is loading...</h2>\n          <span class=\"loading loading-dots loading-lg text-info\"></span>\n        </div>\n\n        <form id=\"payment-form\" class=\"w-full\" @submit.prevent=\"submit\">\n          <div id=\"link-authentication-element\" class=\"mb-2\"></div>\n          <div id=\"payment-element\" class=\"w-full\"></div>\n          <div class=\"mb-2 text-xs text-gray-300\">\n            By clicking ‘Complete Payment’, you agree to our Terms and Conditions and acknowledge our Privacy Policy.\n          </div>\n          <button id=\"submit\" class=\"h-fit bg-blue-600 hover:bg-blue-500 text-white rounded py-2 px-4\"\n                  :disabled=\"processing\">\n            <div class=\"spinner hidden\" id=\"spinner\"></div>\n            <span v-if=\"!processing && shopStore.showPaymentForm\" id=\"button-text\">Complete Payment</span>\n          </button>\n          <div id=\"payment-message\" class=\"hidden\">{{ paymentMessage }}</div>\n        </form>\n        \x3c!--        <form id=\"payment-form\" class=\"w-full\">--\x3e\n        \x3c!--          <div id=\"link-authentication-element\" class=\"mb-2\">--\x3e\n        \x3c!--            &lt;!&ndash;Stripe.js injects the Link Authentication Element&ndash;&gt;--\x3e\n        \x3c!--          </div>--\x3e\n        \x3c!--          <div id=\"payment-element\" class=\"w-full\">--\x3e\n        \x3c!--            &lt;!&ndash;Stripe.js injects the Payment Element&ndash;&gt;--\x3e\n        \x3c!--          </div>--\x3e\n        \x3c!--          <div class=\"mb-2 text-xs text-gray-300\">By clicking ‘Complete Payment’, you agree to our Terms and Conditions--\x3e\n        \x3c!--            and acknowledge our Privacy Policy.--\x3e\n        \x3c!--          </div>--\x3e\n        \x3c!--          <button id=\"submit\"--\x3e\n        \x3c!--                  class=\"h-fit bg-blue-600 hover:bg-blue-500 text-white rounded py-2 px-4\"--\x3e\n        \x3c!--                  @click.prevent=\"submit()\">--\x3e\n        \x3c!--            <div class=\"spinner hidden\" id=\"spinner\"></div>--\x3e\n        \x3c!--            <span id=\"button-text\">Complete Payment</span>--\x3e\n        \x3c!--          </button>--\x3e\n        \x3c!--          <div id=\"payment-message\" class=\"hidden\"></div>--\x3e\n        \x3c!--        </form>--\x3e\n\n        <div>Your payment is secured with SSL encryption.</div>\n\n        \x3c!-- {/* Show any error or success messages */}--\x3e\n        <div v-if=\"error\" id=\"payment-error\" class=\"text-red-600 font-semibold w-full my-2\"> {{ error }}</div>\n        \x3c!--        <div v-if=\"message\" id=\"payment-message\" class=\"mt-1 text-white\">{{ message }}</div>--\x3e\n      </div>\n\n    </div>\n  </div>\n\n</template>\n\n<script setup>\nimport { ref, onMounted, watch } from 'vue'\nimport { usePageSetup } from '@/Utilities/PageSetup'\nimport { useUserStore } from '@/Stores/UserStore'\nimport { useAppSettingStore } from '@/Stores/AppSettingStore'\nimport { useNotificationStore } from '@/Stores/NotificationStore'\nimport { useShopStore } from '@/Stores/ShopStore'\nimport { useForm } from '@inertiajs/vue3'\n// import { loadStripe } from '@stripe/stripe-js'\nimport FavouriteSelectedImage from '@/Components/Pages/Shop/FavouriteSelectedImage.vue'\n\nusePageSetup('shop/subscribe')\n\nconst userStore = useUserStore()\nconst appSettingStore = useAppSettingStore()\nconst notificationStore = useNotificationStore()\nconst shopStore = useShopStore()\n\nlet props = defineProps({\n  user: Object,\n  error: String,\n  intent: Object,\n  elements: {},\n})\n\nconst paymentMessage = ref('')\nconst processing = ref(false)\nlet stripe\nlet elements\n\n\n\n// const showPaymentForm = () => {\n//\n// }\n\nconst initialize = () => {\n  const clientSecret = props.intent.client_secret\n  const appearance = {\n    theme: 'stripe',\n    variables: {\n      colorPrimary: '#0570de',\n      colorBackground: '#ffffff',\n      colorBackgroundText: '#ffffff',\n      colorText: '#222222',\n      colorDanger: '#df1b41',\n      fontFamily: 'Ideal Sans, system-ui, sans-serif',\n      spacingUnit: '4px',\n    },\n    rules: {\n      '.Label': {\n        color: 'var(--colorBackgroundText)',\n      },\n    },\n  }\n\n  elements = stripe.elements({appearance, clientSecret})\n\n  const paymentElementOptions = {\n    layout: 'tabs',\n  }\n\n  const paymentElement = elements.create('payment', paymentElementOptions)\n  paymentElement.mount('#payment-element')\n  document.getElementById('payment-form').style.display = 'block'\n  // shopStore.showPaymentForm = true\n\n}\n\n\nconst createPaymentIntent = async () => {\n  try {\n    const amountInCents = shopStore.donationAmount * 100 // Convert to cents\n    const {data} = await axios.post('/shop/payment-intent', {\n      amount: amountInCents,\n      favourite_item_id: shopStore.selectedFavourite.id, // Include favourite item\n      favourite_item_name: shopStore.selectedFavourite.name, // Include favourite item\n      favourite_item_type: shopStore.selectedFavouriteType, // Include favourite item\n    })\n    return data.clientSecret\n  } catch (error) {\n    console.error('Error creating payment intent:', error)\n    showMessage('Failed to create payment intent. Please try again.')\n    setLoading(false)\n    throw error\n  }\n}\n\n// Watch for changes in userStore.hasConsentedToCookies\nwatch(\n    () => userStore.hasConsentedToCookies,\n    async (newVal) => {\n      appSettingStore.showCookieBanner = !newVal;\n      if (newVal) {\n        // Dynamically import Stripe library only after consent is given\n        const { loadStripe } = await import('@stripe/stripe-js');\n        const stripePromise = loadStripe(process.env.MIX_STRIPE_KEY);\n        stripe = await stripePromise;\n        initialize();\n        shopStore.showPaymentForm = true\n      }\n    },\n    { immediate: false } // Do not execute immediately on load\n);\n\n\n\nonMounted(async () => {\n      if (!userStore.hasConsentedToCookies) {\n        appSettingStore.showCookieBanner = true\n      } else {\n        // Dynamically import Stripe library if user has already consented\n        const { loadStripe } = await import('@stripe/stripe-js');\n        const stripePromise = loadStripe(process.env.MIX_STRIPE_KEY);\n        stripe = await stripePromise;\n        initialize();\n        shopStore.showPaymentForm = true;\n      }\n      shopStore.customer = props.user\n    },\n)\n\n\nconst submit = async () => {\n  setLoading(true)\n  paymentMessage.value = ''\n\n  try {\n    // Call elements.submit() to gather all required fields\n    const {error: submitError} = await elements.submit()\n    if (submitError) {\n      showMessage(submitError.message)\n      setLoading(false)\n      return\n    }\n\n    const clientSecret = await createPaymentIntent()\n\n    const {error, paymentIntent} = await stripe.confirmPayment({\n      elements,\n      confirmParams: {\n        return_url: 'https://not.tv/contribute/donation_success', // Replace with your success URL\n        // receipt_email: props.user.email,\n        receipt_email: 'travis@not.tv',\n        payment_method_data: {\n          billing_details: {\n            name: props.user.name, // Provide the customer name\n          },\n        },\n      },\n      clientSecret,\n    })\n\n    if (error) {\n      if (error.type === 'card_error' || error.type === 'validation_error') {\n        notificationStore.setGeneralServiceNotification(error.code, error.message)\n        showMessage(error.message)\n      } else {\n        showMessage('An unexpected error occurred.')\n      }\n      setLoading(false)\n    } else {\n      let form = useForm({\n        paymentMethod: paymentIntent.payment_method,\n        plan: shopStore.upgradeStripeId,\n      })\n\n      form.post('/contribute/donation_success', {\n        onFinish: () => {\n          setLoading(false)\n        },\n      })\n    }\n  } catch (error) {\n    console.error('Error in payment process:', error)\n  }\n}\n\n\n// const options = {\n//   mode: 'setup',\n//   currency: 'cad',\n// }\n//\n// let stripe\n// let elements\n\n// const paymentMessage = ref('');\n// const processing = ref(false);\n// const stripePromise = loadStripe(process.env.MIX_STRIPE_KEY);\n\n// onMounted(async () => {\n//   shopStore.customer = props.user\n//\n//   stripe = await loadStripe(StripeAPIKey)\n//\n//   initialize()\n//\n//   showPaymentForm()\n//\n//   document\n//       .querySelector('#payment-form')\n//   // .addEventListener(\"submit\", handleSubmit);\n//\n//\n// })\n\n// function showPaymentForm() {\n//   shopStore.showPaymentForm = true\n// }\n\n// function initialize() {\n//\n//   const clientSecret = props.intent.client_secret\n//   const appearance = {\n//     theme: 'stripe',\n//     variables: {\n//       colorPrimary: '#0570de',\n//       colorBackground: '#ffffff',\n//       colorBackgroundText: '#ffffff',\n//       colorText: '#222222',\n//       colorDanger: '#df1b41',\n//       fontFamily: 'Ideal Sans, system-ui, sans-serif',\n//       spacingUnit: '4px',\n//     },\n//     rules: {\n//       '.Label': {\n//         color: 'var(--colorBackgroundText)',\n//       },\n//     },\n//   }\n//\n//   elements = stripe.elements({appearance, clientSecret})\n\n// this is for linkPayments\n// const linkAuthenticationElement = elements.create(\"linkAuthentication\");\n// linkAuthenticationElement.mount(\"#link-authentication-element\");\n//\n// linkAuthenticationElement.on('change', (event) => {\n//     emailAddress = event.value.email;\n// });\n\n//   const paymentElementOptions = {\n//     layout: 'tabs',\n//   }\n//\n//   const paymentElement = elements.create('payment', paymentElementOptions)\n//   paymentElement.mount('#payment-element')\n//\n// }\n\n// async function submit() {\n//   if (shopStore.upgradeStripeId === '' || null) {\n//     alert('Please select a subscription.')\n//     return\n//   }\n//   setLoading(true)\n//\n//   const {setupIntent, error} = await stripe.confirmSetup({\n//     elements,\n//     confirmParams: {\n//       // Make sure to change this to your payment completion page\n//       return_url: 'https://not.tv/subscription_success',\n//       // receipt_email: emailAddress,\n//     },\n//     redirect: 'if_required',\n//\n//\n//   })\n\n// This point will only be reached if there is an immediate error when\n// confirming the payment. Otherwise, your customer will be redirected to\n// your `return_url`. For some payment methods like iDEAL, your customer will\n// be redirected to an intermediate site first to authorize the payment, then\n// redirected to the `return_url`.\n\n// if (error) {\n//   if (error.type === 'card_error' || error.type === 'validation_error') {\n//     showMessage(error.message)\n//   } else {\n//     showMessage('An unexpected error occurred.')\n//     setLoading(false)\n//   }\n// } else {\n//   // console.log(setupIntent)\n//   let form = useForm({\n//     paymentMethod: setupIntent.payment_method,\n//     plan: shopStore.upgradeStripeId,\n//   })\n//\n//   //Submit the form\n//   form.post('/contribute/subscription')\n//\n// }\n// }\n\n\n// ------- UI helpers -------\n\nfunction showMessage(messageText) {\n\n  const messageContainer = document.querySelector('#payment-message')\n\n  messageContainer.classList.remove('hidden')\n  messageContainer.textContent = messageText\n\n  setTimeout(function () {\n    messageContainer.classList.add('hidden')\n    messageContainer.textContent = ''\n  }, 4000)\n}\n\n// Show a spinner on payment submission\nfunction setLoading(isLoading) {\n  if (isLoading) {\n    // Disable the button and show a spinner\n    document.querySelector('#submit').disabled = true\n    document.querySelector('#spinner').classList.remove('hidden')\n    document.querySelector('#button-text').classList.add('hidden')\n  } else {\n    document.querySelector('#submit').disabled = false\n    document.querySelector('#spinner').classList.add('hidden')\n    document.querySelector('#button-text').classList.remove('hidden')\n  }\n}\n\n<\/script>\n\n<style scoped>\n\n/* Variables */\n* {\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, sans-serif;\n  font-size: 16px;\n  -webkit-font-smoothing: antialiased;\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  height: 100vh;\n  width: 100vw;\n}\n\nform {\n  width: 30vw;\n  min-width: 500px;\n  align-self: center;\n  box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),\n  0px 2px 5px 0px rgba(50, 50, 93, 0.1), 0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);\n  border-radius: 7px;\n  padding: 40px;\n}\n\n.hidden {\n  display: none;\n}\n\n#payment-message {\n  color: rgb(105, 115, 134);\n  font-size: 16px;\n  line-height: 20px;\n  padding-top: 12px;\n  text-align: center;\n}\n\n#payment-element {\n  margin-bottom: 24px;\n}\n\n/* Buttons and links */\nbutton {\n  background: #5469d4;\n  font-family: Arial, sans-serif;\n  color: #ffffff;\n  border-radius: 4px;\n  border: 0;\n  padding: 12px 16px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  display: block;\n  transition: all 0.2s ease;\n  box-shadow: 0px 4px 5.5px 0px rgba(0, 0, 0, 0.07);\n  width: 100%;\n}\n\nbutton:hover {\n  filter: contrast(115%);\n}\n\nbutton:disabled {\n  opacity: 0.5;\n  cursor: default;\n}\n\n/* spinner/processing state, errors */\n.spinner,\n.spinner:before,\n.spinner:after {\n  border-radius: 50%;\n}\n\n.spinner {\n  color: #ffffff;\n  font-size: 22px;\n  text-indent: -99999px;\n  margin: 0px auto;\n  position: relative;\n  width: 20px;\n  height: 20px;\n  box-shadow: inset 0 0 0 2px;\n  -webkit-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  transform: translateZ(0);\n}\n\n.spinner:before,\n.spinner:after {\n  position: absolute;\n  content: \"\";\n}\n\n.spinner:before {\n  width: 10.4px;\n  height: 20.4px;\n  background: #5469d4;\n  border-radius: 20.4px 0 0 20.4px;\n  top: -0.2px;\n  left: -0.2px;\n  -webkit-transform-origin: 10.4px 10.2px;\n  transform-origin: 10.4px 10.2px;\n  -webkit-animation: loading 2s infinite ease 1.5s;\n  animation: loading 2s infinite ease 1.5s;\n}\n\n.spinner:after {\n  width: 10.4px;\n  height: 10.2px;\n  background: #5469d4;\n  border-radius: 0 10.2px 10.2px 0;\n  top: -0.1px;\n  left: 10.2px;\n  -webkit-transform-origin: 0px 10.2px;\n  transform-origin: 0px 10.2px;\n  -webkit-animation: loading 2s infinite ease;\n  animation: loading 2s infinite ease;\n}\n\n@-webkit-keyframes loading {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loading {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@media only screen and (max-width: 600px) {\n  form {\n    width: 80vw;\n    min-width: initial;\n  }\n}\n\n\n</style>\n\n\n\n\n\n"],sourceRoot:""}]);const s=i},53609:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(70821),o=n(54784),a=n(60490),i=n(25543);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l={key:0},u={key:1},d=["src","alt"],p=["src"],m={key:2,src:"/storage/images/Ping.png",alt:"no profile photo, using our ping logo as a placeholder",class:"h-10 w-10 rounded-full object-cover"};const f={__name:"FavouriteSelectedImage",props:{item:Object},setup:function(e){var t=(0,o.useShopStore)(),n=(0,r.ref)(null),c=(0,r.ref)({}),f=function(e){var t;return null!==(t=c.value[e])&&void 0!==t&&t};return function(o,h){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{ref:function(t){return function(e,t){e&&(0,a.S1d)(e,(function(e){s(e,1)[0].isIntersecting&&(c.value[t]=!0)}),{root:n.value,threshold:.1})}(t,e.item.id)}},["show"===(0,r.unref)(t).selectedFavouriteType?((0,r.openBlock)(),(0,r.createElementBlock)("div",l,[f(e.item.id)?((0,r.openBlock)(),(0,r.createBlock)(i.Z,{key:0,image:e.item.image,alt:"",class:(0,r.normalizeClass)("skeleton h-10 w-10 rounded-full object-cover")},null,8,["image"])):(0,r.createCommentVNode)("",!0)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",u,[e.item.profile_photo_path&&f(e.item.id)?((0,r.openBlock)(),(0,r.createElementBlock)("img",{key:0,src:"/storage/"+e.item.profile_photo_path,alt:e.item.name+" profile photo",class:"h-10 w-10 rounded-full object-cover"},null,8,d)):e.item.profile_photo_url&&f(e.item.id)?((0,r.openBlock)(),(0,r.createElementBlock)("img",{key:1,src:e.item.profile_photo_url,alt:"creator.name",class:"h-10 w-10 rounded-full object-cover"},null,8,p)):f(e.item.id)?((0,r.openBlock)(),(0,r.createElementBlock)("img",m)):(0,r.createCommentVNode)("",!0)]))],512)}}}},42976:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var r=n(70821),o=n(24831),a=n(90771),i=n(58358),s=n(83004),c=n(54784),l=n(87879),u=n(53609);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(){p=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof x?t:x,i=Object.create(a.prototype),s=new I(r||[]);return o(i,"_invoke",{value:F(e,n,s)}),i}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",y="executing",g="completed",v={};function x(){}function b(){}function A(){}var w={};l(w,i,(function(){return this}));var S=Object.getPrototypeOf,C=S&&S(S(T([])));C&&C!==n&&r.call(C,i)&&(w=C);var k=A.prototype=x.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function B(e,t){function n(o,a,i,s){var c=m(e[o],e,a);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==d(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function F(t,n,r){var o=f;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===g){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var c=_(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var l=m(t,n,r);if("normal"===l.type){if(o=r.done?g:h,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=g,r.method="throw",r.arg=l.arg)}}}function _(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=m(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(d(t)+" is not iterable")}return b.prototype=A,o(k,"constructor",{value:A,configurable:!0}),o(A,"constructor",{value:b,configurable:!0}),b.displayName=l(A,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,A):(e.__proto__=A,l(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(B.prototype),l(B.prototype,s,(function(){return this})),t.AsyncIterator=B,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new B(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(k),l(k,c,"Generator"),l(k,i,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function m(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,s,"next",e)}function s(e){m(a,r,o,i,s,"throw",e)}i(void 0)}))}}var h=function(e){return(0,r.pushScopeId)("data-v-438bb899"),e=e(),(0,r.popScopeId)(),e},y={class:"w-full lace-self-center flex flex-col gap-y-3 bg-orange-400"},g={id:"topDiv",class:"w-full bg-gray-800 text-gray-50 dark:bg-gray-800 dark:text-gray-50 p-5 mb-10"},v={class:"flex justify-center pt-4 mt-2 mb-4"},x={class:"text-3xl font-semibold pb-3"},b={key:0,class:"capitalize"},A={key:1},w={id:"security-assurance"},S={style:{"text-align":"center","margin-bottom":"20px"}},C=h((function(){return(0,r.createElementVNode)("div",{style:{"text-align":"center","max-width":"600px",margin:"auto"}},[(0,r.createElementVNode)("h2",null,"Your Security, Our Priority"),(0,r.createElementVNode)("p",null,"We take your security seriously. All transactions are encrypted and processed through secure payment gateways. Your payment information is never stored on our servers, ensuring your data remains private and protected.")],-1)})),k={class:"flex flex-col justify-center items-center w-full mx-auto mt-8"},E={key:0,class:"flex flex-col text-center"},B={class:"text-2xl font-semibold text-gray-100 dark:text-gray-100"},F={class:"flex items-center gap-2 mt-2"},_={class:"text-xl"},P={key:1,class:"flex flex-col"},L={class:"text-2xl font-semibold text-gray-100 dark:text-gray-100 mb-2"},I=["src"],T={key:2,class:"flex flex-col w-full items-center justify-center text-center mx-auto mt-8 px-12"},N=[h((function(){return(0,r.createElementVNode)("h2",{class:"mt-6 mx-auto text-xl font-semibold text-white dark:text-gray-100"},"Payment form is loading...",-1)})),h((function(){return(0,r.createElementVNode)("span",{class:"loading loading-dots loading-lg text-info"},null,-1)}))],j=h((function(){return(0,r.createElementVNode)("div",{id:"link-authentication-element",class:"mb-2"},null,-1)})),V=h((function(){return(0,r.createElementVNode)("div",{id:"payment-element",class:"w-full"},null,-1)})),M=h((function(){return(0,r.createElementVNode)("div",{class:"mb-2 text-xs text-gray-300"}," By clicking ‘Complete Payment’, you agree to our Terms and Conditions and acknowledge our Privacy Policy. ",-1)})),D=["disabled"],O=h((function(){return(0,r.createElementVNode)("div",{class:"spinner hidden",id:"spinner"},null,-1)})),U={key:0,id:"button-text"},G={id:"payment-message",class:"hidden"},q=h((function(){return(0,r.createElementVNode)("div",null,"Your payment is secured with SSL encryption.",-1)})),z={key:3,id:"payment-error",class:"text-red-600 font-semibold w-full my-2"};const Y={__name:"OneTimeContribution",props:{user:Object,error:String,intent:Object,elements:{}},setup:function(e){(0,o.U)("shop/subscribe");var t,d,m=(0,a.useUserStore)(),h=(0,i.useAppSettingStore)(),Y=(0,s.useNotificationStore)(),Z=(0,c.useShopStore)(),K=e,W=(0,r.ref)(""),H=(0,r.ref)(!1),R=function(){var e=K.intent.client_secret;(d=t.elements({appearance:{theme:"stripe",variables:{colorPrimary:"#0570de",colorBackground:"#ffffff",colorBackgroundText:"#ffffff",colorText:"#222222",colorDanger:"#df1b41",fontFamily:"Ideal Sans, system-ui, sans-serif",spacingUnit:"4px"},rules:{".Label":{color:"var(--colorBackgroundText)"}}},clientSecret:e})).create("payment",{layout:"tabs"}).mount("#payment-element"),document.getElementById("payment-form").style.display="block"},X=function(){var e=f(p().mark((function e(){var t,n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=100*Z.donationAmount,e.next=4,axios.post("/shop/payment-intent",{amount:t,favourite_item_id:Z.selectedFavourite.id,favourite_item_name:Z.selectedFavourite.name,favourite_item_type:Z.selectedFavouriteType});case 4:return n=e.sent,r=n.data,e.abrupt("return",r.clientSecret);case 9:throw e.prev=9,e.t0=e.catch(0),console.error("Error creating payment intent:",e.t0),Q("Failed to create payment intent. Please try again."),J(!1),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,r.watch)((function(){return m.hasConsentedToCookies}),function(){var e=f(p().mark((function e(r){var o,a,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.showCookieBanner=!r,!r){e.next=12;break}return e.next=4,n.e(8898).then(n.bind(n,54465));case 4:return o=e.sent,a=o.loadStripe,i=a("pk_test_51KJwK5Kahp38LUVYOjg7h425exCr6UZmMm1M24d31ZaS0HTsgPWIZE9Hd2F0KnREVHuPm2VHesX3J5SQfFFg7fTC00DMNpq1Lj"),e.next=9,i;case 9:t=e.sent,R(),Z.showPaymentForm=!0;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{immediate:!1}),(0,r.onMounted)(f(p().mark((function e(){var r,o,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.hasConsentedToCookies){e.next=4;break}h.showCookieBanner=!0,e.next=14;break;case 4:return e.next=6,n.e(8898).then(n.bind(n,54465));case 6:return r=e.sent,o=r.loadStripe,a=o("pk_test_51KJwK5Kahp38LUVYOjg7h425exCr6UZmMm1M24d31ZaS0HTsgPWIZE9Hd2F0KnREVHuPm2VHesX3J5SQfFFg7fTC00DMNpq1Lj"),e.next=11,a;case 11:t=e.sent,R(),Z.showPaymentForm=!0;case 14:Z.customer=K.user;case 15:case"end":return e.stop()}}),e)}))));var $=function(){var e=f(p().mark((function e(){var n,r,o,a,i,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(!0),W.value="",e.prev=2,e.next=5,d.submit();case 5:if(n=e.sent,!(r=n.error)){e.next=11;break}return Q(r.message),J(!1),e.abrupt("return");case 11:return e.next=13,X();case 13:return o=e.sent,e.next=16,t.confirmPayment({elements:d,confirmParams:{return_url:"https://not.tv/contribute/donation_success",receipt_email:"travis@not.tv",payment_method_data:{billing_details:{name:K.user.name}}},clientSecret:o});case 16:a=e.sent,i=a.error,s=a.paymentIntent,i?("card_error"===i.type||"validation_error"===i.type?(Y.setGeneralServiceNotification(i.code,i.message),Q(i.message)):Q("An unexpected error occurred."),J(!1)):(0,l.cI)({paymentMethod:s.payment_method,plan:Z.upgradeStripeId}).post("/contribute/donation_success",{onFinish:function(){J(!1)}}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),console.error("Error in payment process:",e.t0);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}}();function Q(e){var t=document.querySelector("#payment-message");t.classList.remove("hidden"),t.textContent=e,setTimeout((function(){t.classList.add("hidden"),t.textContent=""}),4e3)}function J(e){e?(document.querySelector("#submit").disabled=!0,document.querySelector("#spinner").classList.remove("hidden"),document.querySelector("#button-text").classList.add("hidden")):(document.querySelector("#submit").disabled=!1,document.querySelector("#spinner").classList.add("hidden"),document.querySelector("#button-text").classList.remove("hidden"))}return function(t,n){var o=(0,r.resolveComponent)("Head"),a=(0,r.resolveComponent)("font-awesome-icon");return(0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.unref)(Z).selectedFavourite?((0,r.openBlock)(),(0,r.createBlock)(o,{key:0,title:"Contribution to ".concat((0,r.unref)(Z).selectedFavourite.name)},null,8,["title"])):((0,r.openBlock)(),(0,r.createBlock)(o,{key:1,title:"Contribute a Donation"})),(0,r.createElementVNode)("div",y,[(0,r.createElementVNode)("div",g,[(0,r.createElementVNode)("header",v,[(0,r.createElementVNode)("h1",x,[(0,r.unref)(Z).selectedFavourite.name?((0,r.openBlock)(),(0,r.createElementBlock)("span",b,"Contribute to "+(0,r.toDisplayString)((0,r.unref)(Z).selectedFavourite.name),1)):((0,r.openBlock)(),(0,r.createElementBlock)("span",A,"Contribute to notTV"))])]),(0,r.createElementVNode)("section",w,[(0,r.createElementVNode)("div",S,[(0,r.createVNode)(a,{icon:"fa-lock","aria-hidden":"true",style:{"font-size":"24px",color:"#2c3e50"}})]),C]),(0,r.createElementVNode)("div",k,[(0,r.unref)(Z).selectedFavourite.name?((0,r.openBlock)(),(0,r.createElementBlock)("div",E,[(0,r.createElementVNode)("h2",B,"$"+(0,r.toDisplayString)((0,r.unref)(Z).donationAmount)+" Donation to",1),(0,r.createElementVNode)("div",F,[(0,r.createVNode)(u.Z,{item:(0,r.unref)(Z).selectedFavourite},null,8,["item"]),(0,r.createElementVNode)("span",_,(0,r.toDisplayString)((0,r.unref)(Z).selectedFavourite.name),1)])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",P,[(0,r.createElementVNode)("h2",L,"$"+(0,r.toDisplayString)((0,r.unref)(Z).donationAmount)+" Donation to",1),(0,r.createElementVNode)("img",{src:"/storage/images/logo_white.svg",alt:"notTV Logo White",class:"w-30"},null,8,I)])),(0,r.unref)(Z).showPaymentForm?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",T,N)),(0,r.createElementVNode)("form",{id:"payment-form",class:"w-full",onSubmit:(0,r.withModifiers)($,["prevent"])},[j,V,M,(0,r.createElementVNode)("button",{id:"submit",class:"h-fit bg-blue-600 hover:bg-blue-500 text-white rounded py-2 px-4",disabled:H.value},[O,!H.value&&(0,r.unref)(Z).showPaymentForm?((0,r.openBlock)(),(0,r.createElementBlock)("span",U,"Complete Payment")):(0,r.createCommentVNode)("",!0)],8,D),(0,r.createElementVNode)("div",G,(0,r.toDisplayString)(W.value),1)],32),q,e.error?((0,r.openBlock)(),(0,r.createElementBlock)("div",z,(0,r.toDisplayString)(e.error),1)):(0,r.createCommentVNode)("",!0)])])])],64)}}};var Z=n(93379),K=n.n(Z),W=n(20248),H={insert:"head",singleton:!1};K()(W.Z,H);W.Z.locals;const R=(0,n(83744).Z)(Y,[["__scopeId","data-v-438bb899"]])}}]);
//# sourceMappingURL=2976.js.map